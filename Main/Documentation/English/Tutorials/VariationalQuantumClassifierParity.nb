(* Content-type: application/vnd.wolfram.mathematica *)

(*** Wolfram Notebook File ***)
(* http://www.wolfram.com/nb *)

(* CreatedBy='Wolfram 14.2' *)

(*CacheID: 234*)
(* Internal cache information:
NotebookFileLineBreakTest
NotebookFileLineBreakTest
NotebookDataPosition[       154,          7]
NotebookDataLength[    160368,       4460]
NotebookOptionsPosition[    134913,       3955]
NotebookOutlinePosition[    137957,       4022]
CellTagsIndexPosition[    137914,       4019]
WindowTitle->Variational Quantum Classifier: Parity
WindowFrame->Normal*)

(* Beginning of Notebook Content *)
Notebook[{
Cell[BoxData[GridBox[{
   {GridBox[{
      {
       ItemBox[Cell[BoxData[
         RowBox[{
          TemplateBox[{12},
           "Spacer1"], Cell[
          "QUANTUM MOB/ QUANTUM PLAYBOOK TECH NOTE", "PacletNameCell",
           TextAlignment->Center,ExpressionUUID->
           "59883dcf-d365-43d2-8e0c-99e9cee1a44c"], 
          TemplateBox[{8},
           "Spacer1"]}]],
         TextAlignment->Center,ExpressionUUID->
         "c181214d-b7ae-4716-9fe6-9dc28a594e69"],
        Background->RGBColor[
         0.3843137254901961, 0.4627450980392157, 0.7019607843137254],
        ItemSize->Full], ""}
     },
     GridBoxAlignment->{"Rows" -> {{Center}}},
     GridBoxItemSize->{"Columns" -> {Full, 
         Scaled[0.02]}, "Rows" -> {{2.5}}}], Cell[TextData[{
     Cell[BoxData[
      TagBox[
       ActionMenuBox[
        FrameBox[Cell[TextData[{
          "Functions",
          " ",
          Cell[BoxData[
           GraphicsBox[
            {GrayLevel[0.66667], Thickness[0.13], 
             LineBox[{{-1.8, 0.5}, {0, 0}, {1.8, 0.5}}]},
            AspectRatio->1,
            ImageSize->20,
            PlotRange->{{-3, 4}, {-1, 1}},
            PlotRangePadding->Scaled[0.025]]],ExpressionUUID->
           "cb7c1436-a9c7-4724-a9eb-4ada92c9e360"]
         }],ExpressionUUID->"5593f709-4b75-45fa-8517-1815d4b2480c"],
         StripOnInput->False],{
        StyleBox[
          "\"BasisEmbedding\"", "SeeAlsoRelated", StripOnInput -> False] :> 
         Documentation`HelpLookup["paclet:QuantumMob/Q3S/ref/BasisEmbedding"],
          StyleBox[
          "\"FindMinimum\"", "SeeAlsoRelated", StripOnInput -> False] :> 
         Documentation`HelpLookup["paclet:ref/FindMinimum"]},
        Appearance->None,
        MenuAppearance->Automatic,
        MenuStyle->"TutorialFunction"],
       MouseAppearanceTag["LinkHand"]]],
      LineSpacing->{1.4, 0},ExpressionUUID->
      "909660a3-e1d6-4928-bd6d-97f397cad6cd"],
     "\[ThickSpace]\[ThickSpace]\[ThickSpace]\[ThickSpace]\[ThickSpace]\
\[ThickSpace]",
     Cell[BoxData[
      TagBox[
       ActionMenuBox[
        FrameBox[Cell[TextData[{
          "Related Guides",
          " ",
          Cell[BoxData[
           GraphicsBox[
            {GrayLevel[0.66667], Thickness[0.13], 
             LineBox[{{-1.8, 0.5}, {0, 0}, {1.8, 0.5}}]},
            AspectRatio->1,
            ImageSize->20,
            PlotRange->{{-3, 4}, {-1, 1}},
            PlotRangePadding->Scaled[0.025]]],ExpressionUUID->
           "af666dcf-0eab-467c-bc97-a3592c89d7b3"]
         }],ExpressionUUID->"c5256993-663e-429e-9a69-c13ddcc18579"],
         StripOnInput->False],{
        "\"Quantum Information Systems\"" :> 
         Documentation`HelpLookup[
          "paclet:QuantumMob/Q3S/guide/QuantumInformationSystems"], 
         "\"Quantum Many-Body Systems\"" :> 
         Documentation`HelpLookup[
          "paclet:QuantumMob/Q3S/guide/QuantumManyBodySystems"], 
         "\"Quantum Spin Systems\"" :> 
         Documentation`HelpLookup[
          "paclet:QuantumMob/Q3S/guide/QuantumSpinSystems"]},
        Appearance->None,
        MenuAppearance->Automatic,
        MenuStyle->"TutorialMoreAboutSection"],
       MouseAppearanceTag["LinkHand"]]],
      LineSpacing->{1.4, 0},ExpressionUUID->
      "9ed7a6ef-2927-4ade-b368-1517cdbf3f97"],
     "\[ThickSpace]\[ThickSpace]\[ThickSpace]\[ThickSpace]\[ThickSpace]\
\[ThickSpace]",
     Cell[BoxData[
      TagBox[
       ActionMenuBox[
        FrameBox[Cell[TextData[{
          "Related Tech Notes",
          " ",
          Cell[BoxData[
           GraphicsBox[
            {GrayLevel[0.66667], Thickness[0.13], 
             LineBox[{{-1.8, 0.5}, {0, 0}, {1.8, 0.5}}]},
            AspectRatio->1,
            ImageSize->20,
            PlotRange->{{-3, 4}, {-1, 1}},
            PlotRangePadding->Scaled[0.025]]],ExpressionUUID->
           "3e30150a-1be2-45b2-9b80-c4cb7f00b6a5"]
         }],ExpressionUUID->"adb51aec-42bf-41e1-a02d-a378025abd0e"],
         StripOnInput->False],{
        "\"A Quantum Playbook\"" :> 
         Documentation`HelpLookup[
          "paclet:QuantumMob/QuantumPlaybook/tutorial/QuantumPlaybook"], 
         "\"Quantum Information Systems with Q3\"" :> 
         Documentation`HelpLookup[
          "paclet:QuantumMob/Q3S/tutorial/QuantumInformationSystems"], 
         "\"Quantum Many-Body Systems with Q3\"" :> 
         Documentation`HelpLookup[
          "paclet:QuantumMob/Q3S/tutorial/QuantumManyBodySystems"], 
         "\"Quantum Spin Systems with Q3\"" :> 
         Documentation`HelpLookup[
          "paclet:QuantumMob/Q3S/tutorial/QuantumSpinSystems"], 
         "\"Variational classifier\"" :> 
         Documentation`HelpLookup[
          "paclet:https://pennylane.ai/qml/demos/tutorial_variational_\
classifier"]},
        Appearance->None,
        MenuAppearance->Automatic,
        MenuStyle->"RelatedTutorialsSection"],
       MouseAppearanceTag["LinkHand"]]],
      LineSpacing->{1.4, 0},ExpressionUUID->
      "ec17a7ce-3fcb-4de1-b5e0-801017c79383"],
     "\[ThickSpace]\[ThickSpace]\[ThickSpace]\[ThickSpace]\[ThickSpace]\
\[ThickSpace]",
     Cell[BoxData[
      TagBox[
       ActionMenuBox[
        FrameBox[Cell[TextData[{
          "URL",
          " ",
          Cell[BoxData[
           GraphicsBox[
            {GrayLevel[0.66667], Thickness[0.13], 
             LineBox[{{-1.8, 0.5}, {0, 0}, {1.8, 0.5}}]},
            AspectRatio->1,
            ImageSize->20,
            PlotRange->{{-3, 4}, {-1, 1}},
            PlotRangePadding->Scaled[0.025]]],ExpressionUUID->
           "31e91ff2-964f-44bd-99b3-709653580562"]
         }],ExpressionUUID->"477a69ff-b4a9-453c-9b26-d8f7cccaa2c2"],
         StripOnInput->False],{
        "\"QuantumMob/QuantumPlaybook/tutorial/\
VariationalQuantumClassifierParity\"" :> None, 
         "\"Copy Wolfram Documentation Center URL\"" :> 
         CopyToClipboard[
          "QuantumMob/QuantumPlaybook/tutorial/\
VariationalQuantumClassifierParity"], Delimiter, "\"Copy web URL\"" :> 
         Module[{DocumentationSearch`Private`nb$}, 
           DocumentationSearch`Private`nb$ = 
            NotebookPut[
             Notebook[{
               Cell[BoxData[
                 MakeBoxes[
                  Hyperlink[
                   "http://reference.wolfram.com/language/QuantumMob/\
QuantumPlaybook/tutorial/VariationalQuantumClassifierParity.html"], 
                   StandardForm]], "Input", TextClipboardType -> 
                 "PlainText"]}, Visible -> False]]; 
           SelectionMove[DocumentationSearch`Private`nb$, All, Notebook]; 
           FrontEndTokenExecute[DocumentationSearch`Private`nb$, "Copy"]; 
           NotebookClose[DocumentationSearch`Private`nb$]; Null], 
         "\"Go to web URL\"" :> 
         FrontEndExecute[{
           NotebookLocate[{
             URL[If[TrueQ[False], 
                 "http://reference.wolfram.com/system-modeler/", 
                 "http://reference.wolfram.com/language/"] <> 
               "QuantumMob/QuantumPlaybook/tutorial/\
VariationalQuantumClassifierParity" <> ".html"], None}]}]},
        Appearance->None,
        MenuAppearance->Automatic,
        MenuStyle->"URLMenu"],
       MouseAppearanceTag["LinkHand"]]],
      LineSpacing->{1.4, 0},ExpressionUUID->
      "0e3c2882-7dc5-4f91-b4cb-98ed62c1bb4b"]
    }], "AnchorBar",
     CacheGraphics->False,ExpressionUUID->
     "ab5e417f-2bcf-4e56-9759-852747a3beac"]}
  }]], "AnchorBarGrid",
 CellID->1,ExpressionUUID->"389a2d78-5774-47f4-9c13-3f39896b9a62"],

Cell[CellGroupData[{

Cell["Variational Quantum Classifier: Parity", "TechNoteTitle",
 CellID->519812075,ExpressionUUID->"647c5c2c-d616-45b5-a467-f5352ac5ba41"],

Cell[BoxData[GridBox[{
   {
    TemplateBox[{
      Cell["Setup"], 
      "paclet:QuantumMob/QuantumPlaybook/tutorial/\
VariationalQuantumClassifierParity#2070070916", 
      StyleBox[
       GraphicsBox[{
         Thickness[0.18], 
         RGBColor[0.3843137254901961, 0.4627450980392157, 0.7019607843137254], 
         LineBox[{{-1.8, 0.5}, {0, 0}, {1.8, 0.5}}]}, AspectRatio -> 1, 
        PlotRange -> {{-3, 4}, {-1, 1}}, ImageSize -> 20, PlotRangePadding -> 
        Scaled[0.025]], Magnification -> 0.68 Inherited, StripOnInput -> 
       False], 
      StyleBox[
       GraphicsBox[{
         Thickness[0.18], 
         RGBColor[0.9686274509803922, 0.4666666666666667, 0.], 
         LineBox[{{-1.8, 0.5}, {0, 0}, {1.8, 0.5}}]}, AspectRatio -> 1, 
        PlotRange -> {{-3, 4}, {-1, 1}}, ImageSize -> 20, PlotRangePadding -> 
        Scaled[0.025]], Magnification -> 0.68 Inherited, StripOnInput -> 
       False]},
     "GrayLinkWithIcon",
     BaseStyle->{"TutorialJumpBoxLink"}], 
    TemplateBox[{
      Cell["Quantum Circuit Layer"], 
      "paclet:QuantumMob/QuantumPlaybook/tutorial/\
VariationalQuantumClassifierParity#1732304737", 
      StyleBox[
       GraphicsBox[{
         Thickness[0.18], 
         RGBColor[0.3843137254901961, 0.4627450980392157, 0.7019607843137254], 
         LineBox[{{-1.8, 0.5}, {0, 0}, {1.8, 0.5}}]}, AspectRatio -> 1, 
        PlotRange -> {{-3, 4}, {-1, 1}}, ImageSize -> 20, PlotRangePadding -> 
        Scaled[0.025]], Magnification -> 0.68 Inherited, StripOnInput -> 
       False], 
      StyleBox[
       GraphicsBox[{
         Thickness[0.18], 
         RGBColor[0.9686274509803922, 0.4666666666666667, 0.], 
         LineBox[{{-1.8, 0.5}, {0, 0}, {1.8, 0.5}}]}, AspectRatio -> 1, 
        PlotRange -> {{-3, 4}, {-1, 1}}, ImageSize -> 20, PlotRangePadding -> 
        Scaled[0.025]], Magnification -> 0.68 Inherited, StripOnInput -> 
       False]},
     "GrayLinkWithIcon",
     BaseStyle->{"TutorialJumpBoxLink"}]},
   {
    TemplateBox[{
      Cell["Data"], 
      "paclet:QuantumMob/QuantumPlaybook/tutorial/\
VariationalQuantumClassifierParity#1599589615", 
      StyleBox[
       GraphicsBox[{
         Thickness[0.18], 
         RGBColor[0.3843137254901961, 0.4627450980392157, 0.7019607843137254], 
         LineBox[{{-1.8, 0.5}, {0, 0}, {1.8, 0.5}}]}, AspectRatio -> 1, 
        PlotRange -> {{-3, 4}, {-1, 1}}, ImageSize -> 20, PlotRangePadding -> 
        Scaled[0.025]], Magnification -> 0.68 Inherited, StripOnInput -> 
       False], 
      StyleBox[
       GraphicsBox[{
         Thickness[0.18], 
         RGBColor[0.9686274509803922, 0.4666666666666667, 0.], 
         LineBox[{{-1.8, 0.5}, {0, 0}, {1.8, 0.5}}]}, AspectRatio -> 1, 
        PlotRange -> {{-3, 4}, {-1, 1}}, ImageSize -> 20, PlotRangePadding -> 
        Scaled[0.025]], Magnification -> 0.68 Inherited, StripOnInput -> 
       False]},
     "GrayLinkWithIcon",
     BaseStyle->{"TutorialJumpBoxLink"}], 
    TemplateBox[{
      Cell["Optimization"], 
      "paclet:QuantumMob/QuantumPlaybook/tutorial/\
VariationalQuantumClassifierParity#1787628089", 
      StyleBox[
       GraphicsBox[{
         Thickness[0.18], 
         RGBColor[0.3843137254901961, 0.4627450980392157, 0.7019607843137254], 
         LineBox[{{-1.8, 0.5}, {0, 0}, {1.8, 0.5}}]}, AspectRatio -> 1, 
        PlotRange -> {{-3, 4}, {-1, 1}}, ImageSize -> 20, PlotRangePadding -> 
        Scaled[0.025]], Magnification -> 0.68 Inherited, StripOnInput -> 
       False], 
      StyleBox[
       GraphicsBox[{
         Thickness[0.18], 
         RGBColor[0.9686274509803922, 0.4666666666666667, 0.], 
         LineBox[{{-1.8, 0.5}, {0, 0}, {1.8, 0.5}}]}, AspectRatio -> 1, 
        PlotRange -> {{-3, 4}, {-1, 1}}, ImageSize -> 20, PlotRangePadding -> 
        Scaled[0.025]], Magnification -> 0.68 Inherited, StripOnInput -> 
       False]},
     "GrayLinkWithIcon",
     BaseStyle->{"TutorialJumpBoxLink"}]}
  }]], "TechNoteJumpBox",ExpressionUUID->"d9fd18e5-5c0a-4a2e-8dae-\
8d47966deace"],

Cell[TextData[{
 "This demonstration is a translation of the tutorial \[OpenCurlyDoubleQuote]",
 Cell[BoxData[
  TemplateBox[{
    Cell[
     TextData["Variational classifier"]], 
    "https://pennylane.ai/qml/demos/tutorial_variational_classifier"},
   "WebLink",
   BaseStyle->{"TechNoteText"}]],ExpressionUUID->
  "b6e31623-985d-457a-a227-251610900057"],
 "\[CloseCurlyDoubleQuote] in PennyLane by Maria Schuld. It demonstrates \
variational quantum classifiers; that is, quantum circuits that can be \
trained from labelled data to classify new data samples."
}], "TechNoteText",
 CellID->239396700,ExpressionUUID->"da6a3aab-c035-4ebb-8530-73e784c7ee2e"],

Cell[TextData[{
 "In particular, we will see that the variational quantum classifier can \
reproduce the parity function ",
 Cell[BoxData[
  FormBox[
   RowBox[{"f", ":", 
    RowBox[{
     SuperscriptBox[
      RowBox[{"{", 
       RowBox[{"0", ",", "1"}], "}"}], "n"], "\[RightArrow]", 
     RowBox[{"{", 
      RowBox[{"1", ",", 
       RowBox[{"-", "1"}]}], "}"}]}]}], TraditionalForm]],ExpressionUUID->
  "52f7962c-26d6-4fdf-be4e-1828e0efd6d7"],
 ", where ",
 Cell[BoxData[
  FormBox[
   RowBox[{
    RowBox[{"f", "(", "x", ")"}], "=", "1"}], TraditionalForm]],
  ExpressionUUID->"b63cf966-dce4-4ebe-81fd-99c2da6245e4"],
 " if there are even number of ones in ",
 Cell[BoxData[
  FormBox["x", TraditionalForm]],ExpressionUUID->
  "07e4ffa1-a0be-4338-b979-c82f0975103e"],
 " and ",
 Cell[BoxData[
  FormBox[
   RowBox[{"-", "1"}], TraditionalForm]],ExpressionUUID->
  "0070e191-22c0-42be-872d-d444e4dcc28e"],
 " otherwise. This optimization example demonstrates how to encode binary \
inputs into the initial state of the variational circuit, which is simply a \
computational basis state."
}], "TechNoteText",
 CellID->1384746856,ExpressionUUID->"f6ff7e9e-be6c-410e-8633-2cde9b3d68a2"],

Cell[BoxData[GridBox[{
   {
    TemplateBox[{
      Cell[
       TextData["BasisEmbedding"]], 
      "paclet:QuantumMob/Q3S/ref/BasisEmbedding", "QuantumMob Package Symbol"},
     "PackageLink",
     BaseStyle->{"DefinitionBox", CellFrame -> 0}], Cell[
    "Encodes data into amplitudes of a quantum state", "TechNoteTableText",
     ExpressionUUID->"12573cdf-e5db-437a-ab89-59ea8bf4bfc3"]},
   {
    TemplateBox[{
      Cell[
       TextData["FindMinimum"]], "paclet:ref/FindMinimum"},
     "RefLink",
     BaseStyle->{"DefinitionBox", CellFrame -> 0}], Cell[
    "Find the minimum of a function", "TechNoteTableText",ExpressionUUID->
     "893eb682-611e-4e78-98ae-47faab377e81"]}
  }]], "DefinitionBox",
 CellID->1292802137,ExpressionUUID->"53677078-2d3d-4e66-bbe1-6e7642f00d82"],

Cell["Frequently used function in variational classification.", \
"TechNoteCaption",
 CellID->2033459860,ExpressionUUID->"6fabdab9-8d2f-424b-a4af-2835696bb07d"],

Cell["Make sure to load the Q3 package.", "TechNoteMathCaption",
 CellID->1305108662,ExpressionUUID->"2aef7f18-68da-4d06-8903-f614aa182f96"],

Cell[BoxData[
 RowBox[{"Needs", "[", "\"\<QuantumMob`Q3S`\>\"", "]"}]], "Input",
 CellLabel->"In[10]:=",
 CellID->563311776,ExpressionUUID->"970fe880-592b-4284-9559-cebcd8d40f4a"],

Cell[CellGroupData[{

Cell["Setup", "TechNoteSection",
 CellID->2070070916,ExpressionUUID->"0f32a0ac-4e9c-4e23-b4ba-875b59d34396"],

Cell[TextData[{
 "The qubits to be modeled are ",
 StyleBox["S[", "Input"],
 StyleBox[Cell[BoxData[
  FormBox["i", TraditionalForm]], "Input",ExpressionUUID->
  "221c368f-5825-4fb4-946a-2679df55c4ef"], "Input"],
 StyleBox[",$]", "Input"],
 " for ",
 Cell[BoxData[
  FormBox[
   RowBox[{
    RowBox[{"i", "=", "1"}], ",", "\[Ellipsis]", ",", "n"}], 
   TraditionalForm]],ExpressionUUID->"80d47652-4ee7-460e-8b89-b198352d2b51"],
 "."
}], "TechNoteText",
 CellID->1080054462,ExpressionUUID->"35c0cdc3-414f-4a85-8934-8d159076594d"],

Cell[BoxData[
 RowBox[{"Let", "[", 
  RowBox[{"Qubit", ",", "S"}], "]"}]], "Input",
 CellLabel->"In[5]:=",
 CellID->551157850,ExpressionUUID->"4538a37b-a0ca-402f-8587-a5747f66411a"],

Cell[CellGroupData[{

Cell[BoxData[{
 RowBox[{
  RowBox[{"$n", "=", "4"}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"$N", "=", 
   RowBox[{"Power", "[", 
    RowBox[{"2", ",", "$n"}], "]"}]}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"kk", "=", 
   RowBox[{"Range", "[", "$n", "]"}]}], ";"}], "\[IndentingNewLine]", 
 RowBox[{"SS", "=", 
  RowBox[{"S", "[", 
   RowBox[{"kk", ",", "$"}], "]"}]}]}], "Input",
 CellLabel->"In[9]:=",
 CellID->1447508049,ExpressionUUID->"77191089-1e5e-4d9d-8246-925bd3554e1c"],

Cell[BoxData[
 RowBox[{"{", 
  RowBox[{
   InterpretationBox[
    SubscriptBox["S", 
     TemplateBox[{",", "\",\"", "1"},
      "RowWithSeparators"]],
    $CellContext`S[1, Q3S`$]], ",", 
   InterpretationBox[
    SubscriptBox["S", 
     TemplateBox[{",", "\",\"", "2"},
      "RowWithSeparators"]],
    $CellContext`S[2, Q3S`$]], ",", 
   InterpretationBox[
    SubscriptBox["S", 
     TemplateBox[{",", "\",\"", "3"},
      "RowWithSeparators"]],
    $CellContext`S[3, Q3S`$]], ",", 
   InterpretationBox[
    SubscriptBox["S", 
     TemplateBox[{",", "\",\"", "4"},
      "RowWithSeparators"]],
    $CellContext`S[4, Q3S`$]]}], "}"}]], "Output",
 CellLabel->"Out[12]=",
 CellID->2057153310,ExpressionUUID->"820c5d1f-164c-401f-a2ac-ae891848fe34"]
}, Open  ]]
}, Open  ]],

Cell[CellGroupData[{

Cell["Data", "TechNoteSection",
 CellID->1599589615,ExpressionUUID->"07653698-93ca-433b-bd56-6f2d2e6d6c2d"],

Cell["Load and preprocess the data.", "TechNoteText",
 CellID->1845640457,ExpressionUUID->"3edbdc37-1c60-4053-a7f2-69664532d85e"],

Cell[CellGroupData[{

Cell[BoxData[{
 RowBox[{
  RowBox[{"bits", "=", 
   RowBox[{"Tuples", "[", 
    RowBox[{
     RowBox[{"{", 
      RowBox[{"0", ",", "1"}], "}"}], ",", "$n"}], "]"}]}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"parity", "=", 
   RowBox[{
    RowBox[{"2", "*", 
     RowBox[{"Mod", "[", 
      RowBox[{
       RowBox[{
        RowBox[{
         RowBox[{"Count", "[", 
          RowBox[{"#", ",", "1"}], "]"}], "&"}], "/@", "bits"}], ",", "2"}], 
      "]"}]}], "-", "1"}]}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"data", "=", 
   RowBox[{"AssociationThread", "[", 
    RowBox[{"bits", "->", "parity"}], "]"}]}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"Normal", "[", "data", "]"}], "//", "TableForm"}]}], "Input",
 CellLabel->"In[17]:=",
 CellID->2006481062,ExpressionUUID->"337583ad-045f-4dac-8927-1da4ac39bd00"],

Cell[BoxData[
 TagBox[
  TagBox[GridBox[{
     {
      RowBox[{
       RowBox[{"{", 
        RowBox[{"0", ",", "0", ",", "0", ",", "0"}], "}"}], "\[Rule]", 
       RowBox[{"-", "1"}]}]},
     {
      RowBox[{
       RowBox[{"{", 
        RowBox[{"0", ",", "0", ",", "0", ",", "1"}], "}"}], "\[Rule]", 
       "1"}]},
     {
      RowBox[{
       RowBox[{"{", 
        RowBox[{"0", ",", "0", ",", "1", ",", "0"}], "}"}], "\[Rule]", 
       "1"}]},
     {
      RowBox[{
       RowBox[{"{", 
        RowBox[{"0", ",", "0", ",", "1", ",", "1"}], "}"}], "\[Rule]", 
       RowBox[{"-", "1"}]}]},
     {
      RowBox[{
       RowBox[{"{", 
        RowBox[{"0", ",", "1", ",", "0", ",", "0"}], "}"}], "\[Rule]", 
       "1"}]},
     {
      RowBox[{
       RowBox[{"{", 
        RowBox[{"0", ",", "1", ",", "0", ",", "1"}], "}"}], "\[Rule]", 
       RowBox[{"-", "1"}]}]},
     {
      RowBox[{
       RowBox[{"{", 
        RowBox[{"0", ",", "1", ",", "1", ",", "0"}], "}"}], "\[Rule]", 
       RowBox[{"-", "1"}]}]},
     {
      RowBox[{
       RowBox[{"{", 
        RowBox[{"0", ",", "1", ",", "1", ",", "1"}], "}"}], "\[Rule]", 
       "1"}]},
     {
      RowBox[{
       RowBox[{"{", 
        RowBox[{"1", ",", "0", ",", "0", ",", "0"}], "}"}], "\[Rule]", 
       "1"}]},
     {
      RowBox[{
       RowBox[{"{", 
        RowBox[{"1", ",", "0", ",", "0", ",", "1"}], "}"}], "\[Rule]", 
       RowBox[{"-", "1"}]}]},
     {
      RowBox[{
       RowBox[{"{", 
        RowBox[{"1", ",", "0", ",", "1", ",", "0"}], "}"}], "\[Rule]", 
       RowBox[{"-", "1"}]}]},
     {
      RowBox[{
       RowBox[{"{", 
        RowBox[{"1", ",", "0", ",", "1", ",", "1"}], "}"}], "\[Rule]", 
       "1"}]},
     {
      RowBox[{
       RowBox[{"{", 
        RowBox[{"1", ",", "1", ",", "0", ",", "0"}], "}"}], "\[Rule]", 
       RowBox[{"-", "1"}]}]},
     {
      RowBox[{
       RowBox[{"{", 
        RowBox[{"1", ",", "1", ",", "0", ",", "1"}], "}"}], "\[Rule]", 
       "1"}]},
     {
      RowBox[{
       RowBox[{"{", 
        RowBox[{"1", ",", "1", ",", "1", ",", "0"}], "}"}], "\[Rule]", 
       "1"}]},
     {
      RowBox[{
       RowBox[{"{", 
        RowBox[{"1", ",", "1", ",", "1", ",", "1"}], "}"}], "\[Rule]", 
       RowBox[{"-", "1"}]}]}
    },
    GridBoxAlignment->{"Columns" -> {{Left}}, "Rows" -> {{Baseline}}},
    GridBoxSpacings->{"Columns" -> {
        Offset[0.27999999999999997`], {
         Offset[0.5599999999999999]}, 
        Offset[0.27999999999999997`]}, "Rows" -> {
        Offset[0.2], {
         Offset[0.4]}, 
        Offset[0.2]}}],
   Column],
  Function[BoxForm`e$, 
   TableForm[BoxForm`e$]]]], "Output",
 CellLabel->"Out[20]//TableForm=",
 CellID->1941040869,ExpressionUUID->"1f6d71e0-a9d7-46fd-abc3-fa01e654595a"]
}, Open  ]],

Cell["Embed the input data to quantum states.", "TechNoteText",
 CellID->1049292018,ExpressionUUID->"abde0806-0353-4839-a67f-68ea337dc538"],

Cell[CellGroupData[{

Cell[BoxData[{
 RowBox[{
  RowBox[{"$in", "=", 
   RowBox[{
    RowBox[{"BasisEmbedding", "[", "SS", "]"}], "/@", 
    RowBox[{"Keys", "[", "data", "]"}]}]}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"$in", "=", 
   RowBox[{"Matrix", "/@", "$in"}]}], ";"}], "\[IndentingNewLine]", 
 RowBox[{"MatrixForm", "/@", "$in"}]}], "Input",
 CellLabel->"In[47]:=",
 CellID->332895033,ExpressionUUID->"ac7f38ce-fc75-4d96-915e-2388fe18e0d7"],

Cell[BoxData[
 RowBox[{"{", 
  RowBox[{
   TagBox[
    RowBox[{"(", "\[NoBreak]", 
     TagBox[GridBox[{
        {"1"},
        {"0"},
        {"0"},
        {"0"},
        {"0"},
        {"0"},
        {"0"},
        {"0"},
        {"0"},
        {"0"},
        {"0"},
        {"0"},
        {"0"},
        {"0"},
        {"0"},
        {"0"}
       },
       GridBoxAlignment->{"Columns" -> {{Center}}, "Rows" -> {{Baseline}}},
       GridBoxSpacings->{"Columns" -> {
           Offset[0.27999999999999997`], {
            Offset[0.5599999999999999]}, 
           Offset[0.27999999999999997`]}, "Rows" -> {
           Offset[0.2], {
            Offset[0.4]}, 
           Offset[0.2]}}],
      Column], "\[NoBreak]", ")"}],
    Function[BoxForm`e$, 
     MatrixForm[SparseArray[Automatic, {16}, 0, {1, {{0, 1}, {{1}}}, {1}}]]]],
    ",", 
   TagBox[
    RowBox[{"(", "\[NoBreak]", 
     TagBox[GridBox[{
        {"0"},
        {"1"},
        {"0"},
        {"0"},
        {"0"},
        {"0"},
        {"0"},
        {"0"},
        {"0"},
        {"0"},
        {"0"},
        {"0"},
        {"0"},
        {"0"},
        {"0"},
        {"0"}
       },
       GridBoxAlignment->{"Columns" -> {{Center}}, "Rows" -> {{Baseline}}},
       GridBoxSpacings->{"Columns" -> {
           Offset[0.27999999999999997`], {
            Offset[0.5599999999999999]}, 
           Offset[0.27999999999999997`]}, "Rows" -> {
           Offset[0.2], {
            Offset[0.4]}, 
           Offset[0.2]}}],
      Column], "\[NoBreak]", ")"}],
    Function[BoxForm`e$, 
     MatrixForm[SparseArray[Automatic, {16}, 0, {1, {{0, 1}, {{2}}}, {1}}]]]],
    ",", 
   TagBox[
    RowBox[{"(", "\[NoBreak]", 
     TagBox[GridBox[{
        {"0"},
        {"0"},
        {"1"},
        {"0"},
        {"0"},
        {"0"},
        {"0"},
        {"0"},
        {"0"},
        {"0"},
        {"0"},
        {"0"},
        {"0"},
        {"0"},
        {"0"},
        {"0"}
       },
       GridBoxAlignment->{"Columns" -> {{Center}}, "Rows" -> {{Baseline}}},
       GridBoxSpacings->{"Columns" -> {
           Offset[0.27999999999999997`], {
            Offset[0.5599999999999999]}, 
           Offset[0.27999999999999997`]}, "Rows" -> {
           Offset[0.2], {
            Offset[0.4]}, 
           Offset[0.2]}}],
      Column], "\[NoBreak]", ")"}],
    Function[BoxForm`e$, 
     MatrixForm[SparseArray[Automatic, {16}, 0, {1, {{0, 1}, {{3}}}, {1}}]]]],
    ",", 
   TagBox[
    RowBox[{"(", "\[NoBreak]", 
     TagBox[GridBox[{
        {"0"},
        {"0"},
        {"0"},
        {"1"},
        {"0"},
        {"0"},
        {"0"},
        {"0"},
        {"0"},
        {"0"},
        {"0"},
        {"0"},
        {"0"},
        {"0"},
        {"0"},
        {"0"}
       },
       GridBoxAlignment->{"Columns" -> {{Center}}, "Rows" -> {{Baseline}}},
       GridBoxSpacings->{"Columns" -> {
           Offset[0.27999999999999997`], {
            Offset[0.5599999999999999]}, 
           Offset[0.27999999999999997`]}, "Rows" -> {
           Offset[0.2], {
            Offset[0.4]}, 
           Offset[0.2]}}],
      Column], "\[NoBreak]", ")"}],
    Function[BoxForm`e$, 
     MatrixForm[SparseArray[Automatic, {16}, 0, {1, {{0, 1}, {{4}}}, {1}}]]]],
    ",", 
   TagBox[
    RowBox[{"(", "\[NoBreak]", 
     TagBox[GridBox[{
        {"0"},
        {"0"},
        {"0"},
        {"0"},
        {"1"},
        {"0"},
        {"0"},
        {"0"},
        {"0"},
        {"0"},
        {"0"},
        {"0"},
        {"0"},
        {"0"},
        {"0"},
        {"0"}
       },
       GridBoxAlignment->{"Columns" -> {{Center}}, "Rows" -> {{Baseline}}},
       GridBoxSpacings->{"Columns" -> {
           Offset[0.27999999999999997`], {
            Offset[0.5599999999999999]}, 
           Offset[0.27999999999999997`]}, "Rows" -> {
           Offset[0.2], {
            Offset[0.4]}, 
           Offset[0.2]}}],
      Column], "\[NoBreak]", ")"}],
    Function[BoxForm`e$, 
     MatrixForm[SparseArray[Automatic, {16}, 0, {1, {{0, 1}, {{5}}}, {1}}]]]],
    ",", 
   TagBox[
    RowBox[{"(", "\[NoBreak]", 
     TagBox[GridBox[{
        {"0"},
        {"0"},
        {"0"},
        {"0"},
        {"0"},
        {"1"},
        {"0"},
        {"0"},
        {"0"},
        {"0"},
        {"0"},
        {"0"},
        {"0"},
        {"0"},
        {"0"},
        {"0"}
       },
       GridBoxAlignment->{"Columns" -> {{Center}}, "Rows" -> {{Baseline}}},
       GridBoxSpacings->{"Columns" -> {
           Offset[0.27999999999999997`], {
            Offset[0.5599999999999999]}, 
           Offset[0.27999999999999997`]}, "Rows" -> {
           Offset[0.2], {
            Offset[0.4]}, 
           Offset[0.2]}}],
      Column], "\[NoBreak]", ")"}],
    Function[BoxForm`e$, 
     MatrixForm[SparseArray[Automatic, {16}, 0, {1, {{0, 1}, {{6}}}, {1}}]]]],
    ",", 
   TagBox[
    RowBox[{"(", "\[NoBreak]", 
     TagBox[GridBox[{
        {"0"},
        {"0"},
        {"0"},
        {"0"},
        {"0"},
        {"0"},
        {"1"},
        {"0"},
        {"0"},
        {"0"},
        {"0"},
        {"0"},
        {"0"},
        {"0"},
        {"0"},
        {"0"}
       },
       GridBoxAlignment->{"Columns" -> {{Center}}, "Rows" -> {{Baseline}}},
       GridBoxSpacings->{"Columns" -> {
           Offset[0.27999999999999997`], {
            Offset[0.5599999999999999]}, 
           Offset[0.27999999999999997`]}, "Rows" -> {
           Offset[0.2], {
            Offset[0.4]}, 
           Offset[0.2]}}],
      Column], "\[NoBreak]", ")"}],
    Function[BoxForm`e$, 
     MatrixForm[SparseArray[Automatic, {16}, 0, {1, {{0, 1}, {{7}}}, {1}}]]]],
    ",", 
   TagBox[
    RowBox[{"(", "\[NoBreak]", 
     TagBox[GridBox[{
        {"0"},
        {"0"},
        {"0"},
        {"0"},
        {"0"},
        {"0"},
        {"0"},
        {"1"},
        {"0"},
        {"0"},
        {"0"},
        {"0"},
        {"0"},
        {"0"},
        {"0"},
        {"0"}
       },
       GridBoxAlignment->{"Columns" -> {{Center}}, "Rows" -> {{Baseline}}},
       GridBoxSpacings->{"Columns" -> {
           Offset[0.27999999999999997`], {
            Offset[0.5599999999999999]}, 
           Offset[0.27999999999999997`]}, "Rows" -> {
           Offset[0.2], {
            Offset[0.4]}, 
           Offset[0.2]}}],
      Column], "\[NoBreak]", ")"}],
    Function[BoxForm`e$, 
     MatrixForm[SparseArray[Automatic, {16}, 0, {1, {{0, 1}, {{8}}}, {1}}]]]],
    ",", 
   TagBox[
    RowBox[{"(", "\[NoBreak]", 
     TagBox[GridBox[{
        {"0"},
        {"0"},
        {"0"},
        {"0"},
        {"0"},
        {"0"},
        {"0"},
        {"0"},
        {"1"},
        {"0"},
        {"0"},
        {"0"},
        {"0"},
        {"0"},
        {"0"},
        {"0"}
       },
       GridBoxAlignment->{"Columns" -> {{Center}}, "Rows" -> {{Baseline}}},
       GridBoxSpacings->{"Columns" -> {
           Offset[0.27999999999999997`], {
            Offset[0.5599999999999999]}, 
           Offset[0.27999999999999997`]}, "Rows" -> {
           Offset[0.2], {
            Offset[0.4]}, 
           Offset[0.2]}}],
      Column], "\[NoBreak]", ")"}],
    Function[BoxForm`e$, 
     MatrixForm[SparseArray[Automatic, {16}, 0, {1, {{0, 1}, {{9}}}, {1}}]]]],
    ",", 
   TagBox[
    RowBox[{"(", "\[NoBreak]", 
     TagBox[GridBox[{
        {"0"},
        {"0"},
        {"0"},
        {"0"},
        {"0"},
        {"0"},
        {"0"},
        {"0"},
        {"0"},
        {"1"},
        {"0"},
        {"0"},
        {"0"},
        {"0"},
        {"0"},
        {"0"}
       },
       GridBoxAlignment->{"Columns" -> {{Center}}, "Rows" -> {{Baseline}}},
       GridBoxSpacings->{"Columns" -> {
           Offset[0.27999999999999997`], {
            Offset[0.5599999999999999]}, 
           Offset[0.27999999999999997`]}, "Rows" -> {
           Offset[0.2], {
            Offset[0.4]}, 
           Offset[0.2]}}],
      Column], "\[NoBreak]", ")"}],
    Function[BoxForm`e$, 
     MatrixForm[
     SparseArray[Automatic, {16}, 0, {1, {{0, 1}, {{10}}}, {1}}]]]], ",", 
   TagBox[
    RowBox[{"(", "\[NoBreak]", 
     TagBox[GridBox[{
        {"0"},
        {"0"},
        {"0"},
        {"0"},
        {"0"},
        {"0"},
        {"0"},
        {"0"},
        {"0"},
        {"0"},
        {"1"},
        {"0"},
        {"0"},
        {"0"},
        {"0"},
        {"0"}
       },
       GridBoxAlignment->{"Columns" -> {{Center}}, "Rows" -> {{Baseline}}},
       GridBoxSpacings->{"Columns" -> {
           Offset[0.27999999999999997`], {
            Offset[0.5599999999999999]}, 
           Offset[0.27999999999999997`]}, "Rows" -> {
           Offset[0.2], {
            Offset[0.4]}, 
           Offset[0.2]}}],
      Column], "\[NoBreak]", ")"}],
    Function[BoxForm`e$, 
     MatrixForm[
     SparseArray[Automatic, {16}, 0, {1, {{0, 1}, {{11}}}, {1}}]]]], ",", 
   TagBox[
    RowBox[{"(", "\[NoBreak]", 
     TagBox[GridBox[{
        {"0"},
        {"0"},
        {"0"},
        {"0"},
        {"0"},
        {"0"},
        {"0"},
        {"0"},
        {"0"},
        {"0"},
        {"0"},
        {"1"},
        {"0"},
        {"0"},
        {"0"},
        {"0"}
       },
       GridBoxAlignment->{"Columns" -> {{Center}}, "Rows" -> {{Baseline}}},
       GridBoxSpacings->{"Columns" -> {
           Offset[0.27999999999999997`], {
            Offset[0.5599999999999999]}, 
           Offset[0.27999999999999997`]}, "Rows" -> {
           Offset[0.2], {
            Offset[0.4]}, 
           Offset[0.2]}}],
      Column], "\[NoBreak]", ")"}],
    Function[BoxForm`e$, 
     MatrixForm[
     SparseArray[Automatic, {16}, 0, {1, {{0, 1}, {{12}}}, {1}}]]]], ",", 
   TagBox[
    RowBox[{"(", "\[NoBreak]", 
     TagBox[GridBox[{
        {"0"},
        {"0"},
        {"0"},
        {"0"},
        {"0"},
        {"0"},
        {"0"},
        {"0"},
        {"0"},
        {"0"},
        {"0"},
        {"0"},
        {"1"},
        {"0"},
        {"0"},
        {"0"}
       },
       GridBoxAlignment->{"Columns" -> {{Center}}, "Rows" -> {{Baseline}}},
       GridBoxSpacings->{"Columns" -> {
           Offset[0.27999999999999997`], {
            Offset[0.5599999999999999]}, 
           Offset[0.27999999999999997`]}, "Rows" -> {
           Offset[0.2], {
            Offset[0.4]}, 
           Offset[0.2]}}],
      Column], "\[NoBreak]", ")"}],
    Function[BoxForm`e$, 
     MatrixForm[
     SparseArray[Automatic, {16}, 0, {1, {{0, 1}, {{13}}}, {1}}]]]], ",", 
   TagBox[
    RowBox[{"(", "\[NoBreak]", 
     TagBox[GridBox[{
        {"0"},
        {"0"},
        {"0"},
        {"0"},
        {"0"},
        {"0"},
        {"0"},
        {"0"},
        {"0"},
        {"0"},
        {"0"},
        {"0"},
        {"0"},
        {"1"},
        {"0"},
        {"0"}
       },
       GridBoxAlignment->{"Columns" -> {{Center}}, "Rows" -> {{Baseline}}},
       GridBoxSpacings->{"Columns" -> {
           Offset[0.27999999999999997`], {
            Offset[0.5599999999999999]}, 
           Offset[0.27999999999999997`]}, "Rows" -> {
           Offset[0.2], {
            Offset[0.4]}, 
           Offset[0.2]}}],
      Column], "\[NoBreak]", ")"}],
    Function[BoxForm`e$, 
     MatrixForm[
     SparseArray[Automatic, {16}, 0, {1, {{0, 1}, {{14}}}, {1}}]]]], ",", 
   TagBox[
    RowBox[{"(", "\[NoBreak]", 
     TagBox[GridBox[{
        {"0"},
        {"0"},
        {"0"},
        {"0"},
        {"0"},
        {"0"},
        {"0"},
        {"0"},
        {"0"},
        {"0"},
        {"0"},
        {"0"},
        {"0"},
        {"0"},
        {"1"},
        {"0"}
       },
       GridBoxAlignment->{"Columns" -> {{Center}}, "Rows" -> {{Baseline}}},
       GridBoxSpacings->{"Columns" -> {
           Offset[0.27999999999999997`], {
            Offset[0.5599999999999999]}, 
           Offset[0.27999999999999997`]}, "Rows" -> {
           Offset[0.2], {
            Offset[0.4]}, 
           Offset[0.2]}}],
      Column], "\[NoBreak]", ")"}],
    Function[BoxForm`e$, 
     MatrixForm[
     SparseArray[Automatic, {16}, 0, {1, {{0, 1}, {{15}}}, {1}}]]]], ",", 
   TagBox[
    RowBox[{"(", "\[NoBreak]", 
     TagBox[GridBox[{
        {"0"},
        {"0"},
        {"0"},
        {"0"},
        {"0"},
        {"0"},
        {"0"},
        {"0"},
        {"0"},
        {"0"},
        {"0"},
        {"0"},
        {"0"},
        {"0"},
        {"0"},
        {"1"}
       },
       GridBoxAlignment->{"Columns" -> {{Center}}, "Rows" -> {{Baseline}}},
       GridBoxSpacings->{"Columns" -> {
           Offset[0.27999999999999997`], {
            Offset[0.5599999999999999]}, 
           Offset[0.27999999999999997`]}, "Rows" -> {
           Offset[0.2], {
            Offset[0.4]}, 
           Offset[0.2]}}],
      Column], "\[NoBreak]", ")"}],
    Function[BoxForm`e$, 
     MatrixForm[
     SparseArray[Automatic, {16}, 0, {1, {{0, 1}, {{16}}}, {1}}]]]]}], 
  "}"}]], "Output",
 CellLabel->"Out[49]=",
 CellID->370112065,ExpressionUUID->"2fba8b63-e53a-4c88-9d53-6b417626c991"]
}, Open  ]]
}, Open  ]],

Cell[CellGroupData[{

Cell["Quantum Circuit Layer", "TechNoteSection",
 CellID->1732304737,ExpressionUUID->"173b22c8-40b5-4016-9854-d3c190c3aa67"],

Cell[TextData[{
 "The parameters to be optimized are ",
 StyleBox["a[", "Input"],
 Cell[BoxData[
  FormBox[
   RowBox[{
    StyleBox["layer",
     FontSlant->"Italic"], ",", "i", ",", "j"}], TraditionalForm]],
  ExpressionUUID->"68df1916-4014-4393-be85-1303fae3089a"],
 StyleBox["]", "Input"],
 " for ",
 Cell[BoxData[
  FormBox[
   RowBox[{
    RowBox[{"i", "=", "1"}], ",", "\[Ellipsis]", ",", "n"}], 
   TraditionalForm]],ExpressionUUID->"6abbb2ac-6fe6-42a0-9754-d31abbd71943"],
 " and ",
 Cell[BoxData[
  FormBox[
   RowBox[{
    RowBox[{"j", "=", "1"}], ",", "\[Ellipsis]", ",", "3"}], 
   TraditionalForm]],ExpressionUUID->"818e6d23-2798-43db-81ae-4b873eb39339"],
 "."
}], "TechNoteText",
 CellID->1481153565,ExpressionUUID->"675a987c-6e94-40d0-9940-0f17d4aeb9e0"],

Cell[BoxData[
 RowBox[{"Let", "[", 
  RowBox[{"Real", ",", "a"}], "]"}]], "Input",
 CellLabel->"In[50]:=",
 CellID->226058522,ExpressionUUID->"147347a8-a7a7-4c23-98b6-157d6feaab5b"],

Cell["Define a quantum circuit layer.", "TechNoteText",
 CellID->935626912,ExpressionUUID->"26e73af7-7d57-4b4b-92ce-a3d7f413c158"],

Cell[BoxData[{
 RowBox[{
  RowBox[{"layer", "[", 
   RowBox[{
    RowBox[{"aa_", "?", "MatrixQ"}], ",", 
    RowBox[{"ss", ":", 
     RowBox[{"{", 
      RowBox[{"__", "?", "QubitQ"}], "}"}]}]}], "]"}], ":=", 
  RowBox[{
   RowBox[{"QuantumCircuit", "[", "\[IndentingNewLine]", 
    RowBox[{
     RowBox[{"Table", "[", 
      RowBox[{
       RowBox[{"EulerRotation", "[", 
        RowBox[{
         RowBox[{"aa", "[", 
          RowBox[{"[", "k", "]"}], "]"}], ",", 
         RowBox[{"ss", "[", 
          RowBox[{"[", "k", "]"}], "]"}]}], "]"}], ",", 
       RowBox[{"{", 
        RowBox[{"k", ",", "kk"}], "}"}]}], "]"}], ",", "\[IndentingNewLine]", 
     
     RowBox[{"Apply", "[", 
      RowBox[{"Sequence", ",", 
       RowBox[{"CNOT", "@@@", 
        RowBox[{"Transpose", "@", 
         RowBox[{"{", 
          RowBox[{"ss", ",", 
           RowBox[{"RotateLeft", "@", "ss"}]}], "}"}]}]}]}], "]"}]}], 
    "\[IndentingNewLine]", "]"}], "/;", 
   RowBox[{
    RowBox[{"Length", "[", "aa", "]"}], "==", 
    RowBox[{"Length", "[", "ss", "]"}]}]}]}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"layer", "[", 
   RowBox[{"aa_", "?", "MatrixQ"}], "]"}], ":=", 
  RowBox[{"layer", "[", 
   RowBox[{"aa", ",", "SS"}], "]"}]}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"layer", "[", "n_Integer", "]"}], ":=", 
  RowBox[{"QuantumCircuit", "@@", 
   RowBox[{"Table", "[", 
    RowBox[{
     RowBox[{"layer", "[", 
      RowBox[{"Array", "[", 
       RowBox[{
        RowBox[{"a", "[", "k", "]"}], ",", 
        RowBox[{"{", 
         RowBox[{"$n", ",", "3"}], "}"}]}], "]"}], "]"}], ",", 
     RowBox[{"{", 
      RowBox[{"k", ",", "n"}], "}"}]}], "]"}]}]}]}], "Input",
 CellLabel->"In[51]:=",
 CellID->602466469,ExpressionUUID->"aa35a60b-d40f-44c2-bd96-1cc87f31c3ab"],

Cell[TextData[{
 "For example, the following quantum circuit contains 24 real parameters, \
with three parameters ",
 Cell[BoxData[
  FormBox[
   RowBox[{
    RowBox[{"a", "[", 
     RowBox[{"k", ",", "i", ",", "1"}], "]"}], ",", 
    RowBox[{"a", "[", 
     RowBox[{"k", ",", "i", ",", "2"}], "]"}], ",", 
    RowBox[{"a", "[", 
     RowBox[{"k", ",", "i", ",", "3"}], "]"}]}], TraditionalForm]],
  ExpressionUUID->"f5230016-cae5-4383-8d81-2210a1dd074c"],
 " associated with each qubit ",
 Cell[BoxData[
  FormBox["i", TraditionalForm]],ExpressionUUID->
  "5b9085b8-c53e-405f-8a33-5f00fd059a9e"],
 " on layer ",
 Cell[BoxData[
  FormBox["k", TraditionalForm]],ExpressionUUID->
  "6790f77e-903b-4a5a-b9a8-ad0581b84a45"],
 "."
}], "TechNoteText",
 CellID->1287530389,ExpressionUUID->"76331035-de8c-41b6-8eb3-60f6a951d06a"],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"ll", "=", 
  RowBox[{"layer", "[", "2", "]"}]}]], "Input",
 CellLabel->"In[54]:=",
 CellID->791747932,ExpressionUUID->"49bbca86-90db-4edf-a7e9-bfdf352a9ad6"],

Cell[BoxData[
 InterpretationBox[
  GraphicsBox[{
    {Dashing[{Small, Small}], LineBox[{}]}, 
    LineBox[{{{0, -1}, {11, -1}}, {{0, -2}, {11, -2}}, {{0, -3}, {11, -3}}, {{
     0, -4}, {11, -4}}}], {{
      {GrayLevel[1], EdgeForm[None], RectangleBox[{0.6, -1.4}, {1.4, -0.6}]}, 
      LineBox[{{0.6, -1.4}, {1.4, -1.4}, {1.4, -0.6}, {0.6, -0.6}, {
       0.6, -1.4}}], InsetBox[
       StyleBox[
        SubscriptBox["\<\"U\"\>", "\<\"E\"\>"],
        StripOnInput->False,
        FontSize->Scaled[0.03636363636363637],
        FontWeight->"Light",
        FontSlant->Italic], {1, -1}, NCache[
       ImageScaled[{Rational[1, 2], Rational[1, 2]}], 
        ImageScaled[{0.5, 0.5}]]]}, {
      {GrayLevel[1], EdgeForm[None], RectangleBox[{0.6, -2.4}, {1.4, -1.6}]}, 
      LineBox[{{0.6, -2.4}, {1.4, -2.4}, {1.4, -1.6}, {0.6, -1.6}, {
       0.6, -2.4}}], InsetBox[
       StyleBox[
        SubscriptBox["\<\"U\"\>", "\<\"E\"\>"],
        StripOnInput->False,
        FontSize->Scaled[0.03636363636363637],
        FontWeight->"Light",
        FontSlant->Italic], {1, -2}, NCache[
       ImageScaled[{Rational[1, 2], Rational[1, 2]}], 
        ImageScaled[{0.5, 0.5}]]]}, {
      {GrayLevel[1], EdgeForm[None], RectangleBox[{0.6, -3.4}, {1.4, -2.6}]}, 
      LineBox[{{0.6, -3.4}, {1.4, -3.4}, {1.4, -2.6}, {0.6, -2.6}, {
       0.6, -3.4}}], InsetBox[
       StyleBox[
        SubscriptBox["\<\"U\"\>", "\<\"E\"\>"],
        StripOnInput->False,
        FontSize->Scaled[0.03636363636363637],
        FontWeight->"Light",
        FontSlant->Italic], {1, -3}, NCache[
       ImageScaled[{Rational[1, 2], Rational[1, 2]}], 
        ImageScaled[{0.5, 0.5}]]]}, {
      {GrayLevel[1], EdgeForm[None], RectangleBox[{0.6, -4.4}, {1.4, -3.6}]}, 
      LineBox[{{0.6, -4.4}, {1.4, -4.4}, {1.4, -3.6}, {0.6, -3.6}, {
       0.6, -4.4}}], InsetBox[
       StyleBox[
        SubscriptBox["\<\"U\"\>", "\<\"E\"\>"],
        StripOnInput->False,
        FontSize->Scaled[0.03636363636363637],
        FontWeight->"Light",
        FontSlant->Italic], {1, -4}, NCache[
       ImageScaled[{Rational[1, 2], Rational[1, 2]}], 
        ImageScaled[{0.5, 0.5}]]]}}, {LineBox[{{2, -1}, {2, -2}}], 
     DiskBox[{2, -1}, 0.09], {CircleBox[{2, -2}, 0.26666666666666666], 
      LineBox[{{{1.7333333333333334`, -2}, {2.2666666666666666`, -2}}, {{
         2, -2.2666666666666666`}, {2, -1.7333333333333334`}}}]}}, {
     LineBox[{{3, -2}, {3, -3}}], 
     DiskBox[{3, -2}, 0.09], {CircleBox[{3, -3}, 0.26666666666666666], 
      LineBox[{{{2.7333333333333334`, -3}, {3.2666666666666666`, -3}}, {{
         3, -3.2666666666666666`}, {3, -2.7333333333333334`}}}]}}, {
     LineBox[{{4, -3}, {4, -4}}], 
     DiskBox[{4, -3}, 0.09], {CircleBox[{4, -4}, 0.26666666666666666], 
      LineBox[{{{3.7333333333333334`, -4}, {4.266666666666667, -4}}, {{
         4, -4.266666666666667}, {4, -3.7333333333333334`}}}]}}, {
     LineBox[{{5, -4}, {5, -1}}], 
     DiskBox[{5, -4}, 0.09], {CircleBox[{5, -1}, 0.26666666666666666], 
      LineBox[{{{4.733333333333333, -1}, {5.266666666666667, -1}}, {{
         5, -1.2666666666666666`}, {5, -0.7333333333333334}}}]}}, {{
      {GrayLevel[1], EdgeForm[None], RectangleBox[{5.6, -1.4}, {6.4, -0.6}]}, 
      LineBox[{{5.6, -1.4}, {6.4, -1.4}, {6.4, -0.6}, {5.6, -0.6}, {
       5.6, -1.4}}], InsetBox[
       StyleBox[
        SubscriptBox["\<\"U\"\>", "\<\"E\"\>"],
        StripOnInput->False,
        FontSize->Scaled[0.03636363636363637],
        FontWeight->"Light",
        FontSlant->Italic], {6, -1}, NCache[
       ImageScaled[{Rational[1, 2], Rational[1, 2]}], 
        ImageScaled[{0.5, 0.5}]]]}, {
      {GrayLevel[1], EdgeForm[None], RectangleBox[{5.6, -2.4}, {6.4, -1.6}]}, 
      LineBox[{{5.6, -2.4}, {6.4, -2.4}, {6.4, -1.6}, {5.6, -1.6}, {
       5.6, -2.4}}], InsetBox[
       StyleBox[
        SubscriptBox["\<\"U\"\>", "\<\"E\"\>"],
        StripOnInput->False,
        FontSize->Scaled[0.03636363636363637],
        FontWeight->"Light",
        FontSlant->Italic], {6, -2}, NCache[
       ImageScaled[{Rational[1, 2], Rational[1, 2]}], 
        ImageScaled[{0.5, 0.5}]]]}, {
      {GrayLevel[1], EdgeForm[None], RectangleBox[{5.6, -3.4}, {6.4, -2.6}]}, 
      LineBox[{{5.6, -3.4}, {6.4, -3.4}, {6.4, -2.6}, {5.6, -2.6}, {
       5.6, -3.4}}], InsetBox[
       StyleBox[
        SubscriptBox["\<\"U\"\>", "\<\"E\"\>"],
        StripOnInput->False,
        FontSize->Scaled[0.03636363636363637],
        FontWeight->"Light",
        FontSlant->Italic], {6, -3}, NCache[
       ImageScaled[{Rational[1, 2], Rational[1, 2]}], 
        ImageScaled[{0.5, 0.5}]]]}, {
      {GrayLevel[1], EdgeForm[None], RectangleBox[{5.6, -4.4}, {6.4, -3.6}]}, 
      LineBox[{{5.6, -4.4}, {6.4, -4.4}, {6.4, -3.6}, {5.6, -3.6}, {
       5.6, -4.4}}], InsetBox[
       StyleBox[
        SubscriptBox["\<\"U\"\>", "\<\"E\"\>"],
        StripOnInput->False,
        FontSize->Scaled[0.03636363636363637],
        FontWeight->"Light",
        FontSlant->Italic], {6, -4}, NCache[
       ImageScaled[{Rational[1, 2], Rational[1, 2]}], 
        ImageScaled[{0.5, 0.5}]]]}}, {LineBox[{{7, -1}, {7, -2}}], 
     DiskBox[{7, -1}, 0.09], {CircleBox[{7, -2}, 0.26666666666666666], 
      LineBox[{{{6.733333333333333, -2}, {7.266666666666667, -2}}, {{
         7, -2.2666666666666666`}, {7, -1.7333333333333334`}}}]}}, {
     LineBox[{{8, -2}, {8, -3}}], 
     DiskBox[{8, -2}, 0.09], {CircleBox[{8, -3}, 0.26666666666666666], 
      LineBox[{{{7.733333333333333, -3}, {8.266666666666667, -3}}, {{
         8, -3.2666666666666666`}, {8, -2.7333333333333334`}}}]}}, {
     LineBox[{{9, -3}, {9, -4}}], 
     DiskBox[{9, -3}, 0.09], {CircleBox[{9, -4}, 0.26666666666666666], 
      LineBox[{{{8.733333333333333, -4}, {9.266666666666667, -4}}, {{
         9, -4.266666666666667}, {9, -3.7333333333333334`}}}]}}, {
     LineBox[{{10, -4}, {10, -1}}], 
     DiskBox[{10, -4}, 0.09], {CircleBox[{10, -1}, 0.26666666666666666], 
      LineBox[{{{9.733333333333333, -1}, {10.266666666666667`, -1}}, {{
         10, -1.2666666666666666`}, {10, -0.7333333333333334}}}]}}},
   AxesStyle->Large,
   FrameStyle->Large,
   ImagePadding->{{23.400000000000002`, 23.400000000000002`}, {1, 1}},
   ImageSize->442.8,
   PlotRange->NCache[{Full, {
       Rational[-9, 2], 
       Rational[-1, 2]}}, {Full, {-4.5, -0.5}}],
   PlotRangePadding->Scaled[0.025]],
  Q3S`QuantumCircuit[{
    Q3S`EulerRotation[{
      $CellContext`a[1, 1, 1], 
      $CellContext`a[1, 1, 2], 
      $CellContext`a[1, 1, 3]}, 
     $CellContext`S[1, Q3S`$]], 
    Q3S`EulerRotation[{
      $CellContext`a[1, 2, 1], 
      $CellContext`a[1, 2, 2], 
      $CellContext`a[1, 2, 3]}, 
     $CellContext`S[2, Q3S`$]], 
    Q3S`EulerRotation[{
      $CellContext`a[1, 3, 1], 
      $CellContext`a[1, 3, 2], 
      $CellContext`a[1, 3, 3]}, 
     $CellContext`S[3, Q3S`$]], 
    Q3S`EulerRotation[{
      $CellContext`a[1, 4, 1], 
      $CellContext`a[1, 4, 2], 
      $CellContext`a[1, 4, 3]}, 
     $CellContext`S[4, Q3S`$]]}, 
   Q3S`CNOT[{
      $CellContext`S[1, Q3S`$]} -> {1}, {
     $CellContext`S[2, Q3S`$]}], 
   Q3S`CNOT[{
      $CellContext`S[2, Q3S`$]} -> {1}, {
     $CellContext`S[3, Q3S`$]}], 
   Q3S`CNOT[{
      $CellContext`S[3, Q3S`$]} -> {1}, {
     $CellContext`S[4, Q3S`$]}], 
   Q3S`CNOT[{
      $CellContext`S[4, Q3S`$]} -> {1}, {
     $CellContext`S[1, Q3S`$]}], {
    Q3S`EulerRotation[{
      $CellContext`a[2, 1, 1], 
      $CellContext`a[2, 1, 2], 
      $CellContext`a[2, 1, 3]}, 
     $CellContext`S[1, Q3S`$]], 
    Q3S`EulerRotation[{
      $CellContext`a[2, 2, 1], 
      $CellContext`a[2, 2, 2], 
      $CellContext`a[2, 2, 3]}, 
     $CellContext`S[2, Q3S`$]], 
    Q3S`EulerRotation[{
      $CellContext`a[2, 3, 1], 
      $CellContext`a[2, 3, 2], 
      $CellContext`a[2, 3, 3]}, 
     $CellContext`S[3, Q3S`$]], 
    Q3S`EulerRotation[{
      $CellContext`a[2, 4, 1], 
      $CellContext`a[2, 4, 2], 
      $CellContext`a[2, 4, 3]}, 
     $CellContext`S[4, Q3S`$]]}, 
   Q3S`CNOT[{
      $CellContext`S[1, Q3S`$]} -> {1}, {
     $CellContext`S[2, Q3S`$]}], 
   Q3S`CNOT[{
      $CellContext`S[2, Q3S`$]} -> {1}, {
     $CellContext`S[3, Q3S`$]}], 
   Q3S`CNOT[{
      $CellContext`S[3, Q3S`$]} -> {1}, {
     $CellContext`S[4, Q3S`$]}], 
   Q3S`CNOT[{
      $CellContext`S[4, Q3S`$]} -> {1}, {
     $CellContext`S[1, Q3S`$]}]]]], "Output",
 CellLabel->"Out[54]=",
 CellID->1082089555,ExpressionUUID->"5678e635-672d-4cf6-8e1e-55d3269c595e"]
}, Open  ]]
}, Open  ]],

Cell[CellGroupData[{

Cell["Optimization", "TechNoteSection",
 CellID->1787628089,ExpressionUUID->"111a4759-abc0-4afd-9106-1cb2facf3f30"],

Cell[CellGroupData[{

Cell["Using a single layer", "Subsection",
 CellID->1045681763,ExpressionUUID->"46c1c25b-65a3-4a2e-aff4-65604050e730"],

Cell[BoxData[
 RowBox[{
  RowBox[{"$L", "=", "1"}], ";"}]], "Input",
 CellLabel->"In[55]:=",
 CellID->1530851286,ExpressionUUID->"7a4d53d8-34a9-4acf-876e-f1c9ce6038b0"],

Cell["Pick a quantum circuit layer to apply on the input states.", \
"TechNoteText",
 CellID->988267993,ExpressionUUID->"9f6d96bf-2c8a-4209-928b-11be2236953a"],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"op", "=", 
  RowBox[{"layer", "[", "$L", "]"}]}]], "Input",
 CellLabel->"In[56]:=",
 CellID->787654452,ExpressionUUID->"93c310ba-cb78-4c88-a4b6-dffb50c24159"],

Cell[BoxData[
 InterpretationBox[
  GraphicsBox[{
    {Dashing[{Small, Small}], LineBox[{}]}, 
    LineBox[{{{0, -1}, {6, -1}}, {{0, -2}, {6, -2}}, {{0, -3}, {6, -3}}, {{
     0, -4}, {6, -4}}}], {{
      {GrayLevel[1], EdgeForm[None], RectangleBox[{0.6, -1.4}, {1.4, -0.6}]}, 
      LineBox[{{0.6, -1.4}, {1.4, -1.4}, {1.4, -0.6}, {0.6, -0.6}, {
       0.6, -1.4}}], InsetBox[
       StyleBox[
        SubscriptBox["\<\"U\"\>", "\<\"E\"\>"],
        StripOnInput->False,
        FontSize->Scaled[0.06666666666666667],
        FontWeight->"Light",
        FontSlant->Italic], {1, -1}, NCache[
       ImageScaled[{Rational[1, 2], Rational[1, 2]}], 
        ImageScaled[{0.5, 0.5}]]]}, {
      {GrayLevel[1], EdgeForm[None], RectangleBox[{0.6, -2.4}, {1.4, -1.6}]}, 
      LineBox[{{0.6, -2.4}, {1.4, -2.4}, {1.4, -1.6}, {0.6, -1.6}, {
       0.6, -2.4}}], InsetBox[
       StyleBox[
        SubscriptBox["\<\"U\"\>", "\<\"E\"\>"],
        StripOnInput->False,
        FontSize->Scaled[0.06666666666666667],
        FontWeight->"Light",
        FontSlant->Italic], {1, -2}, NCache[
       ImageScaled[{Rational[1, 2], Rational[1, 2]}], 
        ImageScaled[{0.5, 0.5}]]]}, {
      {GrayLevel[1], EdgeForm[None], RectangleBox[{0.6, -3.4}, {1.4, -2.6}]}, 
      LineBox[{{0.6, -3.4}, {1.4, -3.4}, {1.4, -2.6}, {0.6, -2.6}, {
       0.6, -3.4}}], InsetBox[
       StyleBox[
        SubscriptBox["\<\"U\"\>", "\<\"E\"\>"],
        StripOnInput->False,
        FontSize->Scaled[0.06666666666666667],
        FontWeight->"Light",
        FontSlant->Italic], {1, -3}, NCache[
       ImageScaled[{Rational[1, 2], Rational[1, 2]}], 
        ImageScaled[{0.5, 0.5}]]]}, {
      {GrayLevel[1], EdgeForm[None], RectangleBox[{0.6, -4.4}, {1.4, -3.6}]}, 
      LineBox[{{0.6, -4.4}, {1.4, -4.4}, {1.4, -3.6}, {0.6, -3.6}, {
       0.6, -4.4}}], InsetBox[
       StyleBox[
        SubscriptBox["\<\"U\"\>", "\<\"E\"\>"],
        StripOnInput->False,
        FontSize->Scaled[0.06666666666666667],
        FontWeight->"Light",
        FontSlant->Italic], {1, -4}, NCache[
       ImageScaled[{Rational[1, 2], Rational[1, 2]}], 
        ImageScaled[{0.5, 0.5}]]]}}, {LineBox[{{2, -1}, {2, -2}}], 
     DiskBox[{2, -1}, 0.09], {CircleBox[{2, -2}, 0.26666666666666666], 
      LineBox[{{{1.7333333333333334`, -2}, {2.2666666666666666`, -2}}, {{
         2, -2.2666666666666666`}, {2, -1.7333333333333334`}}}]}}, {
     LineBox[{{3, -2}, {3, -3}}], 
     DiskBox[{3, -2}, 0.09], {CircleBox[{3, -3}, 0.26666666666666666], 
      LineBox[{{{2.7333333333333334`, -3}, {3.2666666666666666`, -3}}, {{
         3, -3.2666666666666666`}, {3, -2.7333333333333334`}}}]}}, {
     LineBox[{{4, -3}, {4, -4}}], 
     DiskBox[{4, -3}, 0.09], {CircleBox[{4, -4}, 0.26666666666666666], 
      LineBox[{{{3.7333333333333334`, -4}, {4.266666666666667, -4}}, {{
         4, -4.266666666666667}, {4, -3.7333333333333334`}}}]}}, {
     LineBox[{{5, -4}, {5, -1}}], 
     DiskBox[{5, -4}, 0.09], {CircleBox[{5, -1}, 0.26666666666666666], 
      LineBox[{{{4.733333333333333, -1}, {5.266666666666667, -1}}, {{
         5, -1.2666666666666666`}, {5, -0.7333333333333334}}}]}}},
   AxesStyle->Large,
   FrameStyle->Large,
   ImagePadding->{{23.400000000000002`, 23.400000000000002`}, {1, 1}},
   ImageSize->262.8,
   PlotRange->NCache[{Full, {
       Rational[-9, 2], 
       Rational[-1, 2]}}, {Full, {-4.5, -0.5}}],
   PlotRangePadding->Scaled[0.025]],
  Q3S`QuantumCircuit[{
    Q3S`EulerRotation[{
      $CellContext`a[1, 1, 1], 
      $CellContext`a[1, 1, 2], 
      $CellContext`a[1, 1, 3]}, 
     $CellContext`S[1, Q3S`$]], 
    Q3S`EulerRotation[{
      $CellContext`a[1, 2, 1], 
      $CellContext`a[1, 2, 2], 
      $CellContext`a[1, 2, 3]}, 
     $CellContext`S[2, Q3S`$]], 
    Q3S`EulerRotation[{
      $CellContext`a[1, 3, 1], 
      $CellContext`a[1, 3, 2], 
      $CellContext`a[1, 3, 3]}, 
     $CellContext`S[3, Q3S`$]], 
    Q3S`EulerRotation[{
      $CellContext`a[1, 4, 1], 
      $CellContext`a[1, 4, 2], 
      $CellContext`a[1, 4, 3]}, 
     $CellContext`S[4, Q3S`$]]}, 
   Q3S`CNOT[{
      $CellContext`S[1, Q3S`$]} -> {1}, {
     $CellContext`S[2, Q3S`$]}], 
   Q3S`CNOT[{
      $CellContext`S[2, Q3S`$]} -> {1}, {
     $CellContext`S[3, Q3S`$]}], 
   Q3S`CNOT[{
      $CellContext`S[3, Q3S`$]} -> {1}, {
     $CellContext`S[4, Q3S`$]}], 
   Q3S`CNOT[{
      $CellContext`S[4, Q3S`$]} -> {1}, {
     $CellContext`S[1, Q3S`$]}]]]], "Output",
 CellLabel->"Out[56]=",
 CellID->2088087738,ExpressionUUID->"1c47cac9-e4cc-470d-bae7-a84e2861696e"]
}, Open  ]],

Cell[BoxData[
 RowBox[{
  RowBox[{"mat", "=", 
   RowBox[{"Normal", "@", 
    RowBox[{"Matrix", "[", "op", "]"}]}]}], ";"}]], "Input",
 CellLabel->"In[63]:=",
 CellID->359017298,ExpressionUUID->"e8a11652-d67f-496b-95b6-15ca0bbc30ca"],

Cell[BoxData[
 RowBox[{
  RowBox[{"Z1", "=", 
   RowBox[{"Matrix", "[", 
    RowBox[{
     RowBox[{"S", "[", 
      RowBox[{"1", ",", "3"}], "]"}], ",", "SS"}], "]"}]}], ";"}]], "Input",
 CellLabel->"In[64]:=",
 CellID->1806786521,ExpressionUUID->"f2c7596c-642d-4110-abb9-fc0b98bf656d"],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"w0", "=", 
  RowBox[{"Flatten", "@", 
   RowBox[{"RandomReal", "[", 
    RowBox[{
     RowBox[{
      RowBox[{"{", 
       RowBox[{"0", ",", "1"}], "}"}], "Pi"}], ",", 
     RowBox[{"{", 
      RowBox[{"$L", ",", "$n", ",", "3"}], "}"}]}], "]"}]}]}]], "Input",
 CellLabel->"In[65]:=",
 CellID->1331466339,ExpressionUUID->"d2d53f54-f0b6-411a-820e-1cc33435e4a4"],

Cell[BoxData[
 RowBox[{"{", 
  RowBox[{
  "1.4169388785916484`", ",", "0.7690111502866457`", ",", 
   "1.8619302935511577`", ",", "2.6419857408172662`", ",", 
   "2.906836379913326`", ",", "1.2800678077636833`", ",", 
   "2.7601943395614423`", ",", "2.5854515224275563`", ",", 
   "2.3639097464362298`", ",", "1.9390188995250934`", ",", 
   "3.010614504689306`", ",", "1.328152597256243`"}], "}"}]], "Output",
 CellLabel->"Out[65]=",
 CellID->513750506,ExpressionUUID->"5f98e01b-fe40-4ad2-b393-882849c0d2b3"]
}, Open  ]],

Cell["The parameters to use.", "TechNoteMathCaption",
 CellID->778390898,ExpressionUUID->"5289728c-e174-40cf-b656-cd61cbdc864f"],

Cell[BoxData[
 RowBox[{
  RowBox[{"aa", "=", 
   RowBox[{"a", "[", 
    RowBox[{
     RowBox[{"Range", "@", "$L"}], ",", 
     RowBox[{"Range", "@", "$n"}], ",", 
     RowBox[{"{", 
      RowBox[{"1", ",", "2", ",", "3"}], "}"}]}], "]"}]}], ";"}]], "Input",
 CellLabel->"In[66]:=",
 CellID->1785137132,ExpressionUUID->"b4eb6b98-549a-43d6-942a-887093eefa91"],

Cell["\<\
The parameters are angles and the following constraints are imposed.\
\>", "TechNoteMathCaption",
 CellID->904180189,ExpressionUUID->"13f9b5f8-cee7-451d-9be5-8948ed0d08cd"],

Cell[BoxData[
 RowBox[{
  RowBox[{"constraints", "=", 
   RowBox[{"Thread", "[", 
    RowBox[{"0", "<=", "aa", "<", "Pi"}], "]"}]}], ";"}]], "Input",
 CellLabel->"In[68]:=",
 CellID->1028409558,ExpressionUUID->"45e89a60-092e-4e4d-ab16-2ac96b72fd95"],

Cell[BoxData[
 RowBox[{
  RowBox[{"optimizer", "[", "ww_", "]"}], ":=", 
  RowBox[{"Module", "[", "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"{", 
     RowBox[{
      RowBox[{"ii", "=", 
       RowBox[{"RandomChoice", "[", 
        RowBox[{
         RowBox[{"Range", "@", 
          RowBox[{"Length", "@", "data"}]}], ",", "4"}], "]"}]}], ",", 
      "\[IndentingNewLine]", "yy", ",", "vv", ",", "avg", ",", "sol", ",", 
      "cost"}], "}"}], ",", "\[IndentingNewLine]", 
    RowBox[{
     RowBox[{"yy", "=", 
      RowBox[{"Part", "[", 
       RowBox[{
        RowBox[{"Values", "@", "data"}], ",", "ii"}], "]"}]}], ";", 
     "\[IndentingNewLine]", 
     RowBox[{"vv", "=", 
      RowBox[{"Transpose", "@", 
       RowBox[{"Part", "[", 
        RowBox[{"$in", ",", "ii"}], "]"}]}]}], ";", "\[IndentingNewLine]", 
     RowBox[{"vv", "=", 
      RowBox[{"Transpose", "[", 
       RowBox[{"mat", ".", "vv"}], "]"}]}], ";", "\[IndentingNewLine]", 
     RowBox[{"avg", "=", 
      RowBox[{"Map", "[", 
       RowBox[{
        RowBox[{
         RowBox[{
          RowBox[{"Conjugate", "[", "#", "]"}], ".", "Z1", ".", "#"}], "&"}], 
        ",", "vv"}], "]"}]}], ";", "\[IndentingNewLine]", 
     RowBox[{"cost", "=", 
      RowBox[{
       RowBox[{"Mean", "@", 
        RowBox[{"Abs", "[", 
         RowBox[{"avg", "-", "yy"}], "]"}]}], "^", "2"}]}], ";", 
     "\[IndentingNewLine]", 
     RowBox[{"EchoTiming", "[", "\[IndentingNewLine]", 
      RowBox[{
       RowBox[{
        RowBox[{"{", 
         RowBox[{"cost", ",", "sol"}], "}"}], "=", 
        RowBox[{"FindMinimum", "[", 
         RowBox[{
          RowBox[{"{", 
           RowBox[{"cost", ",", "constraints"}], "}"}], ",", 
          RowBox[{"Transpose", "@", 
           RowBox[{"{", 
            RowBox[{"aa", ",", "ww"}], "}"}]}], ",", "\[IndentingNewLine]", 
          RowBox[{"StepMonitor", ":>", 
           RowBox[{"PrintTemporary", "[", 
            RowBox[{"\"\<Cost: \>\"", ",", "cost"}], "]"}]}], ",", 
          "\[IndentingNewLine]", 
          RowBox[{"Method", "->", "\"\<IPOPT\>\""}]}], "]"}]}], ";"}], 
      "\[IndentingNewLine]", "]"}], ";", "\[IndentingNewLine]", 
     RowBox[{"Echo", "[", 
      RowBox[{
       RowBox[{"{", 
        RowBox[{
         RowBox[{"Chop", "[", 
          RowBox[{"avg", "/.", "sol"}], "]"}], ",", "yy", ",", "cost"}], 
        "}"}], ",", "\"\<{avg, yy, cost}\>\""}], "]"}], ";", 
     "\[IndentingNewLine]", 
     RowBox[{"Return", "[", 
      RowBox[{"aa", "/.", "sol"}], "]"}]}]}], "\[IndentingNewLine]", 
   "]"}]}]], "Input",
 CellLabel->"In[72]:=",
 CellID->450103983,ExpressionUUID->"0f3760c7-cd21-4d1f-9903-9f8ad31f13d3"],

Cell["Test the optimizer.", "TechNoteMathCaption",
 CellID->390365273,ExpressionUUID->"8bb3d6f0-287e-4639-a450-7559c86b18c2"],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"optimizer", "[", "w0", "]"}]], "Input",
 CellLabel->"In[73]:=",
 CellID->742028701,ExpressionUUID->"bfa05406-9a2e-4019-b6e8-501f3b1168c9"],

Cell[CellGroupData[{

Cell[BoxData["0.217922`"], "EchoTiming",
 CellID->1848226052,ExpressionUUID->"184e32ac-426a-4481-90e1-45da9253e228"],

Cell[BoxData[
 RowBox[{
  TagBox["\<\"{avg, yy, cost}\"\>",
   "EchoLabel"], "  ", 
  RowBox[{"{", 
   RowBox[{
    RowBox[{"{", 
     RowBox[{"0.9999989792836063`", ",", 
      RowBox[{"-", "0.9999989792836063`"}], ",", "0.9999989792836063`", ",", 
      RowBox[{"-", "0.9999989792836063`"}]}], "}"}], ",", 
    RowBox[{"{", 
     RowBox[{"1", ",", 
      RowBox[{"-", "1"}], ",", 
      RowBox[{"-", "1"}], ",", 
      RowBox[{"-", "1"}]}], "}"}], ",", "0.2500005103584575`"}], 
   "}"}]}]], "Echo",
 CellID->1931785756,ExpressionUUID->"b84bb44c-3d46-4977-b4b1-94d8e8f064dd"]
}, Open  ]],

Cell[BoxData[
 RowBox[{"{", 
  RowBox[{
  "1.5707673640605608`", ",", "1.570820841040316`", ",", "1.570967287177389`",
    ",", "1.5707135654074331`", ",", "3.140817939839422`", ",", 
   "1.5707038911378277`", ",", "1.5708712896179358`", ",", 
   "0.0009485028780423045`", ",", "1.5705942611418011`", ",", 
   "1.5707244145481938`", ",", "3.1408567225599944`", ",", 
   "1.5707028825968934`"}], "}"}]], "Output",
 CellLabel->"Out[73]=",
 CellID->1865425746,ExpressionUUID->"e48b65e0-4dde-4321-bf8f-0f8e499a88f8"]
}, Open  ]],

Cell["Find the optimal values of the parameters iteratively.", "TechNoteText",
 CellID->1706189206,ExpressionUUID->"0e83ced9-b8b9-4d51-bda0-a880031b3488"],

Cell[CellGroupData[{

Cell[BoxData[{
 RowBox[{
  RowBox[{
   RowBox[{"$R", "=", "5"}], ";"}], 
  RowBox[{"(*", " ", 
   RowBox[{"the", " ", "number", " ", "of", " ", "iterations"}], " ", 
   "*)"}]}], "\[IndentingNewLine]", 
 RowBox[{"ww", "=", 
  RowBox[{"Nest", "[", 
   RowBox[{"optimizer", ",", "w0", ",", "$R"}], "]"}]}]}], "Input",
 CellLabel->"In[74]:=",
 CellID->601893948,ExpressionUUID->"76652f84-4032-4061-8acb-62750ee46043"],

Cell[CellGroupData[{

Cell[BoxData["0.098922`"], "EchoTiming",
 CellID->608323898,ExpressionUUID->"002407e4-5d7a-4ec7-9ea0-11bcc6e3342e"],

Cell[BoxData[
 RowBox[{
  TagBox["\<\"{avg, yy, cost}\"\>",
   "EchoLabel"], "  ", 
  RowBox[{"{", 
   RowBox[{
    RowBox[{"{", 
     RowBox[{"0.9999980617716818`", ",", 
      RowBox[{"-", "0.9999980617716818`"}], ",", "0.9999980617716818`", ",", 
      "0.9999980617716818`"}], "}"}], ",", 
    RowBox[{"{", 
     RowBox[{"1", ",", 
      RowBox[{"-", "1"}], ",", "1", ",", 
      RowBox[{"-", "1"}]}], "}"}], ",", "0.25000096911509834`"}], 
   "}"}]}]], "Echo",
 CellID->2077593966,ExpressionUUID->"307a3479-0c4e-43bf-b2c4-5940b214f4d0"],

Cell[BoxData["0.054929`"], "EchoTiming",
 CellID->1675041834,ExpressionUUID->"b3f36d5b-a815-4f1f-9b15-06d6c24a2431"],

Cell[BoxData[
 RowBox[{
  TagBox["\<\"{avg, yy, cost}\"\>",
   "EchoLabel"], "  ", 
  RowBox[{"{", 
   RowBox[{
    RowBox[{"{", 
     RowBox[{
      RowBox[{"-", "0.8518347787735547`"}], ",", "0.8518347787735547`", ",", 
      "0.8518347787735547`", ",", "0.8518347787735547`"}], "}"}], ",", 
    RowBox[{"{", 
     RowBox[{
      RowBox[{"-", "1"}], ",", "1", ",", 
      RowBox[{"-", "1"}], ",", 
      RowBox[{"-", "1"}]}], "}"}], ",", "1.0000000000000004`"}], 
   "}"}]}]], "Echo",
 CellID->1064975515,ExpressionUUID->"4a77616e-e169-418c-905c-a816fefe2e3e"],

Cell[BoxData["0.207805`"], "EchoTiming",
 CellID->1379733269,ExpressionUUID->"b4951d64-1511-43e0-a66b-d55e7aa8dbc1"],

Cell[BoxData[
 RowBox[{
  TagBox["\<\"{avg, yy, cost}\"\>",
   "EchoLabel"], "  ", 
  RowBox[{"{", 
   RowBox[{
    RowBox[{"{", 
     RowBox[{"0.999999727040889`", ",", 
      RowBox[{"-", "0.999999727040889`"}], ",", "0.999999727040889`", ",", 
      RowBox[{"-", "0.999999727040889`"}]}], "}"}], ",", 
    RowBox[{"{", 
     RowBox[{"1", ",", "1", ",", "1", ",", 
      RowBox[{"-", "1"}]}], "}"}], ",", "0.2500001364795741`"}], 
   "}"}]}]], "Echo",
 CellID->648631777,ExpressionUUID->"2bd1e25c-d3ad-489f-bf04-6fc59995fa85"],

Cell[BoxData["0.081851`"], "EchoTiming",
 CellID->11680682,ExpressionUUID->"2ae46b8a-5b13-477a-b6f1-478818bd5e3f"],

Cell[BoxData[
 RowBox[{
  TagBox["\<\"{avg, yy, cost}\"\>",
   "EchoLabel"], "  ", 
  RowBox[{"{", 
   RowBox[{
    RowBox[{"{", 
     RowBox[{
      RowBox[{"-", "0.9999986699207465`"}], ",", "0.9999986699207465`", ",", 
      RowBox[{"-", "0.9999986699207465`"}], ",", 
      RowBox[{"-", "0.9999986699207465`"}]}], "}"}], ",", 
    RowBox[{"{", 
     RowBox[{
      RowBox[{"-", "1"}], ",", "1", ",", 
      RowBox[{"-", "1"}], ",", "1"}], "}"}], ",", "0.25000066504006896`"}], 
   "}"}]}]], "Echo",
 CellID->896210497,ExpressionUUID->"1c360f38-dda5-4da9-83b2-30063f506ac0"],

Cell[BoxData["0.094613`"], "EchoTiming",
 CellID->1780564869,ExpressionUUID->"805b9777-d0c1-4ce2-b9f6-872248a5d405"],

Cell[BoxData[
 RowBox[{
  TagBox["\<\"{avg, yy, cost}\"\>",
   "EchoLabel"], "  ", 
  RowBox[{"{", 
   RowBox[{
    RowBox[{"{", 
     RowBox[{
     "0.9997139913212072`", ",", "0.9997139913212072`", ",", 
      "0.9997139913212072`", ",", 
      RowBox[{"-", "0.9997139913212072`"}]}], "}"}], ",", 
    RowBox[{"{", 
     RowBox[{"1", ",", "1", ",", "1", ",", 
      RowBox[{"-", "1"}]}], "}"}], ",", "8.180096434480257`*^-8"}], 
   "}"}]}]], "Echo",
 CellID->769132338,ExpressionUUID->"0a41b380-846f-4f18-a619-3820cf84ec29"]
}, Open  ]],

Cell[BoxData[
 RowBox[{"{", 
  RowBox[{
  "1.570795652677979`", ",", "1.570791788670641`", ",", "1.5707955867524352`",
    ",", "1.5707963778564433`", ",", "3.1277776957099044`", ",", 
   "1.5707960853320755`", ",", "1.5707970764639219`", ",", 
   "0.01379763985628336`", ",", "1.5707980997489712`", ",", 
   "1.570795249307117`", ",", "3.127777695597203`", ",", 
   "1.5707949399558616`"}], "}"}]], "Output",
 CellLabel->"Out[75]=",
 CellID->1103133473,ExpressionUUID->"690c6551-3972-45ec-b9e4-9b54078a3d90"]
}, Open  ]],

Cell["From the optimized parameters, make predictions.", "TechNoteText",
 CellID->1452621094,ExpressionUUID->"92210034-9a29-4ae6-a0b2-ca7e8131d86f"],

Cell[CellGroupData[{

Cell[BoxData[{
 RowBox[{
  RowBox[{"mm", "=", 
   RowBox[{"mat", "/.", 
    RowBox[{"Thread", "[", 
     RowBox[{"aa", "->", "ww"}], "]"}]}]}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"vv", "=", 
   RowBox[{"Transpose", "[", 
    RowBox[{"mm", ".", 
     RowBox[{"Transpose", "[", "$in", "]"}]}], "]"}]}], ";"}], "\[IndentingNewLine]", 
 RowBox[{"predicted", "=", 
  RowBox[{"Map", "[", 
   RowBox[{
    RowBox[{
     RowBox[{"Sign", "@", 
      RowBox[{"Chop", "[", 
       RowBox[{
        RowBox[{"Conjugate", "[", "#", "]"}], ".", "Z1", ".", "#"}], "]"}]}], 
     "&"}], ",", "vv"}], "]"}]}]}], "Input",
 CellLabel->"In[76]:=",
 CellID->1659547112,ExpressionUUID->"379f96f6-73af-47c9-8e27-c5679ad607ac"],

Cell[BoxData[
 RowBox[{"{", 
  RowBox[{"1", ",", 
   RowBox[{"-", "1"}], ",", 
   RowBox[{"-", "1"}], ",", "1", ",", 
   RowBox[{"-", "1"}], ",", "1", ",", "1", ",", 
   RowBox[{"-", "1"}], ",", "1", ",", 
   RowBox[{"-", "1"}], ",", 
   RowBox[{"-", "1"}], ",", "1", ",", 
   RowBox[{"-", "1"}], ",", "1", ",", "1", ",", 
   RowBox[{"-", "1"}]}], "}"}]], "Output",
 CellLabel->"Out[78]=",
 CellID->1182264054,ExpressionUUID->"d2c63a77-cd1f-4534-b5b3-7b7494866db2"]
}, Open  ]],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"predicted", "-", 
  RowBox[{"Values", "[", "data", "]"}]}]], "Input",
 CellLabel->"In[79]:=",
 CellID->1832052457,ExpressionUUID->"ae9fb96e-ec85-4965-a10a-c7740e4c9d39"],

Cell[BoxData[
 RowBox[{"{", 
  RowBox[{"2", ",", 
   RowBox[{"-", "2"}], ",", 
   RowBox[{"-", "2"}], ",", "2", ",", 
   RowBox[{"-", "2"}], ",", "2", ",", "2", ",", 
   RowBox[{"-", "2"}], ",", "0", ",", "0", ",", "0", ",", "0", ",", "0", ",", 
   "0", ",", "0", ",", "0"}], "}"}]], "Output",
 CellLabel->"Out[79]=",
 CellID->2021408429,ExpressionUUID->"24975bb4-adf7-40a4-be41-8d208f216f88"]
}, Open  ]],

Cell[CellGroupData[{

Cell["Verdict", "Subsubsection",
 CellID->1629533764,ExpressionUUID->"9bce849b-6657-4c80-969b-1fe4131ef421"],

Cell["\<\
A single-layer is not sufficient to predict the parity values properly.\
\>", "Item",
 CellID->859927202,ExpressionUUID->"94f4583e-31a2-49e5-80bb-cdb58873987b"],

Cell[TextData[{
 "Using the ",
 StyleBox["Method->\[OpenCurlyDoubleQuote]IPOPT\[CloseCurlyDoubleQuote],", 
  "Input"],
 " ",
 ButtonBox["FindMinimum",
  BaseStyle->"Link",
  ButtonData->"paclet:ref/FindMinimum"],
 " is significantly faster than the default method or any other documented \
methods (IPOTP seems to refer to the non-linear interior-point method from \
the IPOPT library)."
}], "Item",
 CellID->1326966863,ExpressionUUID->"1b37f78b-8845-44a7-851f-e4ca9ee40232"]
}, Open  ]]
}, Open  ]],

Cell[CellGroupData[{

Cell["Using two layers without imposing the constraints", "Subsection",
 CellID->1489533743,ExpressionUUID->"dababac0-17d0-44bd-bd06-4e2ad2a6bddf"],

Cell[BoxData[
 RowBox[{
  RowBox[{"$L", "=", "2"}], ";"}]], "Input",
 CellLabel->"In[82]:=",
 CellID->1376745522,ExpressionUUID->"8438bf0f-6e35-400b-b0f0-edc8b6d55fd8"],

Cell["Pick a quantum circuit layer to apply on the input states.", \
"TechNoteText",
 CellID->1973175476,ExpressionUUID->"6b22b83a-df6a-46eb-af73-0fbe23929e13"],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"op", "=", 
  RowBox[{"layer", "[", "$L", "]"}]}]], "Input",
 CellLabel->"In[83]:=",
 CellID->1717748158,ExpressionUUID->"f1fb43e9-ceaa-4a92-b1f8-9974b3680dfa"],

Cell[BoxData[
 InterpretationBox[
  GraphicsBox[{
    {Dashing[{Small, Small}], LineBox[{}]}, 
    LineBox[{{{0, -1}, {11, -1}}, {{0, -2}, {11, -2}}, {{0, -3}, {11, -3}}, {{
     0, -4}, {11, -4}}}], {{
      {GrayLevel[1], EdgeForm[None], RectangleBox[{0.6, -1.4}, {1.4, -0.6}]}, 
      LineBox[{{0.6, -1.4}, {1.4, -1.4}, {1.4, -0.6}, {0.6, -0.6}, {
       0.6, -1.4}}], InsetBox[
       StyleBox[
        SubscriptBox["\<\"U\"\>", "\<\"E\"\>"],
        StripOnInput->False,
        FontSize->Scaled[0.03636363636363637],
        FontWeight->"Light",
        FontSlant->Italic], {1, -1}, NCache[
       ImageScaled[{Rational[1, 2], Rational[1, 2]}], 
        ImageScaled[{0.5, 0.5}]]]}, {
      {GrayLevel[1], EdgeForm[None], RectangleBox[{0.6, -2.4}, {1.4, -1.6}]}, 
      LineBox[{{0.6, -2.4}, {1.4, -2.4}, {1.4, -1.6}, {0.6, -1.6}, {
       0.6, -2.4}}], InsetBox[
       StyleBox[
        SubscriptBox["\<\"U\"\>", "\<\"E\"\>"],
        StripOnInput->False,
        FontSize->Scaled[0.03636363636363637],
        FontWeight->"Light",
        FontSlant->Italic], {1, -2}, NCache[
       ImageScaled[{Rational[1, 2], Rational[1, 2]}], 
        ImageScaled[{0.5, 0.5}]]]}, {
      {GrayLevel[1], EdgeForm[None], RectangleBox[{0.6, -3.4}, {1.4, -2.6}]}, 
      LineBox[{{0.6, -3.4}, {1.4, -3.4}, {1.4, -2.6}, {0.6, -2.6}, {
       0.6, -3.4}}], InsetBox[
       StyleBox[
        SubscriptBox["\<\"U\"\>", "\<\"E\"\>"],
        StripOnInput->False,
        FontSize->Scaled[0.03636363636363637],
        FontWeight->"Light",
        FontSlant->Italic], {1, -3}, NCache[
       ImageScaled[{Rational[1, 2], Rational[1, 2]}], 
        ImageScaled[{0.5, 0.5}]]]}, {
      {GrayLevel[1], EdgeForm[None], RectangleBox[{0.6, -4.4}, {1.4, -3.6}]}, 
      LineBox[{{0.6, -4.4}, {1.4, -4.4}, {1.4, -3.6}, {0.6, -3.6}, {
       0.6, -4.4}}], InsetBox[
       StyleBox[
        SubscriptBox["\<\"U\"\>", "\<\"E\"\>"],
        StripOnInput->False,
        FontSize->Scaled[0.03636363636363637],
        FontWeight->"Light",
        FontSlant->Italic], {1, -4}, NCache[
       ImageScaled[{Rational[1, 2], Rational[1, 2]}], 
        ImageScaled[{0.5, 0.5}]]]}}, {LineBox[{{2, -1}, {2, -2}}], 
     DiskBox[{2, -1}, 0.09], {CircleBox[{2, -2}, 0.26666666666666666], 
      LineBox[{{{1.7333333333333334`, -2}, {2.2666666666666666`, -2}}, {{
         2, -2.2666666666666666`}, {2, -1.7333333333333334`}}}]}}, {
     LineBox[{{3, -2}, {3, -3}}], 
     DiskBox[{3, -2}, 0.09], {CircleBox[{3, -3}, 0.26666666666666666], 
      LineBox[{{{2.7333333333333334`, -3}, {3.2666666666666666`, -3}}, {{
         3, -3.2666666666666666`}, {3, -2.7333333333333334`}}}]}}, {
     LineBox[{{4, -3}, {4, -4}}], 
     DiskBox[{4, -3}, 0.09], {CircleBox[{4, -4}, 0.26666666666666666], 
      LineBox[{{{3.7333333333333334`, -4}, {4.266666666666667, -4}}, {{
         4, -4.266666666666667}, {4, -3.7333333333333334`}}}]}}, {
     LineBox[{{5, -4}, {5, -1}}], 
     DiskBox[{5, -4}, 0.09], {CircleBox[{5, -1}, 0.26666666666666666], 
      LineBox[{{{4.733333333333333, -1}, {5.266666666666667, -1}}, {{
         5, -1.2666666666666666`}, {5, -0.7333333333333334}}}]}}, {{
      {GrayLevel[1], EdgeForm[None], RectangleBox[{5.6, -1.4}, {6.4, -0.6}]}, 
      LineBox[{{5.6, -1.4}, {6.4, -1.4}, {6.4, -0.6}, {5.6, -0.6}, {
       5.6, -1.4}}], InsetBox[
       StyleBox[
        SubscriptBox["\<\"U\"\>", "\<\"E\"\>"],
        StripOnInput->False,
        FontSize->Scaled[0.03636363636363637],
        FontWeight->"Light",
        FontSlant->Italic], {6, -1}, NCache[
       ImageScaled[{Rational[1, 2], Rational[1, 2]}], 
        ImageScaled[{0.5, 0.5}]]]}, {
      {GrayLevel[1], EdgeForm[None], RectangleBox[{5.6, -2.4}, {6.4, -1.6}]}, 
      LineBox[{{5.6, -2.4}, {6.4, -2.4}, {6.4, -1.6}, {5.6, -1.6}, {
       5.6, -2.4}}], InsetBox[
       StyleBox[
        SubscriptBox["\<\"U\"\>", "\<\"E\"\>"],
        StripOnInput->False,
        FontSize->Scaled[0.03636363636363637],
        FontWeight->"Light",
        FontSlant->Italic], {6, -2}, NCache[
       ImageScaled[{Rational[1, 2], Rational[1, 2]}], 
        ImageScaled[{0.5, 0.5}]]]}, {
      {GrayLevel[1], EdgeForm[None], RectangleBox[{5.6, -3.4}, {6.4, -2.6}]}, 
      LineBox[{{5.6, -3.4}, {6.4, -3.4}, {6.4, -2.6}, {5.6, -2.6}, {
       5.6, -3.4}}], InsetBox[
       StyleBox[
        SubscriptBox["\<\"U\"\>", "\<\"E\"\>"],
        StripOnInput->False,
        FontSize->Scaled[0.03636363636363637],
        FontWeight->"Light",
        FontSlant->Italic], {6, -3}, NCache[
       ImageScaled[{Rational[1, 2], Rational[1, 2]}], 
        ImageScaled[{0.5, 0.5}]]]}, {
      {GrayLevel[1], EdgeForm[None], RectangleBox[{5.6, -4.4}, {6.4, -3.6}]}, 
      LineBox[{{5.6, -4.4}, {6.4, -4.4}, {6.4, -3.6}, {5.6, -3.6}, {
       5.6, -4.4}}], InsetBox[
       StyleBox[
        SubscriptBox["\<\"U\"\>", "\<\"E\"\>"],
        StripOnInput->False,
        FontSize->Scaled[0.03636363636363637],
        FontWeight->"Light",
        FontSlant->Italic], {6, -4}, NCache[
       ImageScaled[{Rational[1, 2], Rational[1, 2]}], 
        ImageScaled[{0.5, 0.5}]]]}}, {LineBox[{{7, -1}, {7, -2}}], 
     DiskBox[{7, -1}, 0.09], {CircleBox[{7, -2}, 0.26666666666666666], 
      LineBox[{{{6.733333333333333, -2}, {7.266666666666667, -2}}, {{
         7, -2.2666666666666666`}, {7, -1.7333333333333334`}}}]}}, {
     LineBox[{{8, -2}, {8, -3}}], 
     DiskBox[{8, -2}, 0.09], {CircleBox[{8, -3}, 0.26666666666666666], 
      LineBox[{{{7.733333333333333, -3}, {8.266666666666667, -3}}, {{
         8, -3.2666666666666666`}, {8, -2.7333333333333334`}}}]}}, {
     LineBox[{{9, -3}, {9, -4}}], 
     DiskBox[{9, -3}, 0.09], {CircleBox[{9, -4}, 0.26666666666666666], 
      LineBox[{{{8.733333333333333, -4}, {9.266666666666667, -4}}, {{
         9, -4.266666666666667}, {9, -3.7333333333333334`}}}]}}, {
     LineBox[{{10, -4}, {10, -1}}], 
     DiskBox[{10, -4}, 0.09], {CircleBox[{10, -1}, 0.26666666666666666], 
      LineBox[{{{9.733333333333333, -1}, {10.266666666666667`, -1}}, {{
         10, -1.2666666666666666`}, {10, -0.7333333333333334}}}]}}},
   AxesStyle->Large,
   FrameStyle->Large,
   ImagePadding->{{23.400000000000002`, 23.400000000000002`}, {1, 1}},
   ImageSize->442.8,
   PlotRange->NCache[{Full, {
       Rational[-9, 2], 
       Rational[-1, 2]}}, {Full, {-4.5, -0.5}}],
   PlotRangePadding->Scaled[0.025]],
  Q3S`QuantumCircuit[{
    Q3S`EulerRotation[{
      $CellContext`a[1, 1, 1], 
      $CellContext`a[1, 1, 2], 
      $CellContext`a[1, 1, 3]}, 
     $CellContext`S[1, Q3S`$]], 
    Q3S`EulerRotation[{
      $CellContext`a[1, 2, 1], 
      $CellContext`a[1, 2, 2], 
      $CellContext`a[1, 2, 3]}, 
     $CellContext`S[2, Q3S`$]], 
    Q3S`EulerRotation[{
      $CellContext`a[1, 3, 1], 
      $CellContext`a[1, 3, 2], 
      $CellContext`a[1, 3, 3]}, 
     $CellContext`S[3, Q3S`$]], 
    Q3S`EulerRotation[{
      $CellContext`a[1, 4, 1], 
      $CellContext`a[1, 4, 2], 
      $CellContext`a[1, 4, 3]}, 
     $CellContext`S[4, Q3S`$]]}, 
   Q3S`CNOT[{
      $CellContext`S[1, Q3S`$]} -> {1}, {
     $CellContext`S[2, Q3S`$]}], 
   Q3S`CNOT[{
      $CellContext`S[2, Q3S`$]} -> {1}, {
     $CellContext`S[3, Q3S`$]}], 
   Q3S`CNOT[{
      $CellContext`S[3, Q3S`$]} -> {1}, {
     $CellContext`S[4, Q3S`$]}], 
   Q3S`CNOT[{
      $CellContext`S[4, Q3S`$]} -> {1}, {
     $CellContext`S[1, Q3S`$]}], {
    Q3S`EulerRotation[{
      $CellContext`a[2, 1, 1], 
      $CellContext`a[2, 1, 2], 
      $CellContext`a[2, 1, 3]}, 
     $CellContext`S[1, Q3S`$]], 
    Q3S`EulerRotation[{
      $CellContext`a[2, 2, 1], 
      $CellContext`a[2, 2, 2], 
      $CellContext`a[2, 2, 3]}, 
     $CellContext`S[2, Q3S`$]], 
    Q3S`EulerRotation[{
      $CellContext`a[2, 3, 1], 
      $CellContext`a[2, 3, 2], 
      $CellContext`a[2, 3, 3]}, 
     $CellContext`S[3, Q3S`$]], 
    Q3S`EulerRotation[{
      $CellContext`a[2, 4, 1], 
      $CellContext`a[2, 4, 2], 
      $CellContext`a[2, 4, 3]}, 
     $CellContext`S[4, Q3S`$]]}, 
   Q3S`CNOT[{
      $CellContext`S[1, Q3S`$]} -> {1}, {
     $CellContext`S[2, Q3S`$]}], 
   Q3S`CNOT[{
      $CellContext`S[2, Q3S`$]} -> {1}, {
     $CellContext`S[3, Q3S`$]}], 
   Q3S`CNOT[{
      $CellContext`S[3, Q3S`$]} -> {1}, {
     $CellContext`S[4, Q3S`$]}], 
   Q3S`CNOT[{
      $CellContext`S[4, Q3S`$]} -> {1}, {
     $CellContext`S[1, Q3S`$]}]]]], "Output",
 CellLabel->"Out[83]=",
 CellID->1868547815,ExpressionUUID->"2793f279-d226-4ce1-9823-8d85ea5fa878"]
}, Open  ]],

Cell["\<\
Check which parameters are actually involved in the above quantum circuit.\
\>", "TechNoteText",
 CellID->420656279,ExpressionUUID->"560f15ec-4f86-421d-ae8d-9a1bb94a6399"],

Cell[CellGroupData[{

Cell[BoxData[{
 RowBox[{"param", "=", 
  RowBox[{"Cases", "[", 
   RowBox[{"op", ",", "_a", ",", "Infinity"}], "]"}]}], "\[IndentingNewLine]", 
 RowBox[{"Length", "[", "param", "]"}]}], "Input",
 CellLabel->"In[84]:=",
 CellID->19230539,ExpressionUUID->"5bf93de4-c141-407b-8dad-6e0fc2451c47"],

Cell[BoxData[
 RowBox[{"{", 
  RowBox[{
   InterpretationBox[
    SubscriptBox["a", 
     TemplateBox[{",", "\",\"", "1", "1", "1"},
      "RowWithSeparators"]],
    $CellContext`a[1, 1, 1]], ",", 
   InterpretationBox[
    SubscriptBox["a", 
     TemplateBox[{",", "\",\"", "1", "1", "2"},
      "RowWithSeparators"]],
    $CellContext`a[1, 1, 2]], ",", 
   InterpretationBox[
    SubscriptBox["a", 
     TemplateBox[{",", "\",\"", "1", "1", "3"},
      "RowWithSeparators"]],
    $CellContext`a[1, 1, 3]], ",", 
   InterpretationBox[
    SubscriptBox["a", 
     TemplateBox[{",", "\",\"", "1", "2", "1"},
      "RowWithSeparators"]],
    $CellContext`a[1, 2, 1]], ",", 
   InterpretationBox[
    SubscriptBox["a", 
     TemplateBox[{",", "\",\"", "1", "2", "2"},
      "RowWithSeparators"]],
    $CellContext`a[1, 2, 2]], ",", 
   InterpretationBox[
    SubscriptBox["a", 
     TemplateBox[{",", "\",\"", "1", "2", "3"},
      "RowWithSeparators"]],
    $CellContext`a[1, 2, 3]], ",", 
   InterpretationBox[
    SubscriptBox["a", 
     TemplateBox[{",", "\",\"", "1", "3", "1"},
      "RowWithSeparators"]],
    $CellContext`a[1, 3, 1]], ",", 
   InterpretationBox[
    SubscriptBox["a", 
     TemplateBox[{",", "\",\"", "1", "3", "2"},
      "RowWithSeparators"]],
    $CellContext`a[1, 3, 2]], ",", 
   InterpretationBox[
    SubscriptBox["a", 
     TemplateBox[{",", "\",\"", "1", "3", "3"},
      "RowWithSeparators"]],
    $CellContext`a[1, 3, 3]], ",", 
   InterpretationBox[
    SubscriptBox["a", 
     TemplateBox[{",", "\",\"", "1", "4", "1"},
      "RowWithSeparators"]],
    $CellContext`a[1, 4, 1]], ",", 
   InterpretationBox[
    SubscriptBox["a", 
     TemplateBox[{",", "\",\"", "1", "4", "2"},
      "RowWithSeparators"]],
    $CellContext`a[1, 4, 2]], ",", 
   InterpretationBox[
    SubscriptBox["a", 
     TemplateBox[{",", "\",\"", "1", "4", "3"},
      "RowWithSeparators"]],
    $CellContext`a[1, 4, 3]], ",", 
   InterpretationBox[
    SubscriptBox["a", 
     TemplateBox[{",", "\",\"", "2", "1", "1"},
      "RowWithSeparators"]],
    $CellContext`a[2, 1, 1]], ",", 
   InterpretationBox[
    SubscriptBox["a", 
     TemplateBox[{",", "\",\"", "2", "1", "2"},
      "RowWithSeparators"]],
    $CellContext`a[2, 1, 2]], ",", 
   InterpretationBox[
    SubscriptBox["a", 
     TemplateBox[{",", "\",\"", "2", "1", "3"},
      "RowWithSeparators"]],
    $CellContext`a[2, 1, 3]], ",", 
   InterpretationBox[
    SubscriptBox["a", 
     TemplateBox[{",", "\",\"", "2", "2", "1"},
      "RowWithSeparators"]],
    $CellContext`a[2, 2, 1]], ",", 
   InterpretationBox[
    SubscriptBox["a", 
     TemplateBox[{",", "\",\"", "2", "2", "2"},
      "RowWithSeparators"]],
    $CellContext`a[2, 2, 2]], ",", 
   InterpretationBox[
    SubscriptBox["a", 
     TemplateBox[{",", "\",\"", "2", "2", "3"},
      "RowWithSeparators"]],
    $CellContext`a[2, 2, 3]], ",", 
   InterpretationBox[
    SubscriptBox["a", 
     TemplateBox[{",", "\",\"", "2", "3", "1"},
      "RowWithSeparators"]],
    $CellContext`a[2, 3, 1]], ",", 
   InterpretationBox[
    SubscriptBox["a", 
     TemplateBox[{",", "\",\"", "2", "3", "2"},
      "RowWithSeparators"]],
    $CellContext`a[2, 3, 2]], ",", 
   InterpretationBox[
    SubscriptBox["a", 
     TemplateBox[{",", "\",\"", "2", "3", "3"},
      "RowWithSeparators"]],
    $CellContext`a[2, 3, 3]], ",", 
   InterpretationBox[
    SubscriptBox["a", 
     TemplateBox[{",", "\",\"", "2", "4", "1"},
      "RowWithSeparators"]],
    $CellContext`a[2, 4, 1]], ",", 
   InterpretationBox[
    SubscriptBox["a", 
     TemplateBox[{",", "\",\"", "2", "4", "2"},
      "RowWithSeparators"]],
    $CellContext`a[2, 4, 2]], ",", 
   InterpretationBox[
    SubscriptBox["a", 
     TemplateBox[{",", "\",\"", "2", "4", "3"},
      "RowWithSeparators"]],
    $CellContext`a[2, 4, 3]]}], "}"}]], "Output",
 CellLabel->"Out[84]=",
 CellID->1854040587,ExpressionUUID->"9edbfe9f-5442-46ce-ac45-7849a3eac738"],

Cell[BoxData["24"], "Output",
 CellLabel->"Out[85]=",
 CellID->872427739,ExpressionUUID->"ec1f97bd-0a0c-4f7e-b376-fe82f32549c8"]
}, Open  ]],

Cell[CellGroupData[{

Cell[BoxData[{
 RowBox[{
  RowBox[{"mat", "=", 
   RowBox[{"Normal", "@", 
    RowBox[{"N", "@", 
     RowBox[{"Matrix", "[", "op", "]"}]}]}]}], ";"}], "\[IndentingNewLine]", 
 RowBox[{"Dimensions", "[", "mat", "]"}]}], "Input",
 CellLabel->"In[86]:=",
 CellID->623453271,ExpressionUUID->"7b64d646-a6df-45a1-9450-04010b647cee"],

Cell[BoxData[
 RowBox[{"{", 
  RowBox[{"16", ",", "16"}], "}"}]], "Output",
 CellLabel->"Out[87]=",
 CellID->976808628,ExpressionUUID->"8ca2ed06-1284-499b-8bf0-9c18c3985522"]
}, Open  ]],

Cell[CellGroupData[{

Cell[BoxData[{
 RowBox[{
  RowBox[{"Z1", "=", 
   RowBox[{"Matrix", "[", 
    RowBox[{
     RowBox[{"S", "[", 
      RowBox[{"1", ",", "3"}], "]"}], ",", "SS"}], "]"}]}], ";"}], "\[IndentingNewLine]", 
 RowBox[{"Dimensions", "[", "Z1", "]"}]}], "Input",
 CellLabel->"In[88]:=",
 CellID->806411984,ExpressionUUID->"7ca78c02-a7e2-4d65-9bee-4d7a2fe82861"],

Cell[BoxData[
 RowBox[{"{", 
  RowBox[{"16", ",", "16"}], "}"}]], "Output",
 CellLabel->"Out[89]=",
 CellID->1857613128,ExpressionUUID->"0c30c24f-192a-402a-8bec-21040975e15a"]
}, Open  ]],

Cell[CellGroupData[{

Cell[BoxData[{
 RowBox[{"w0", "=", 
  RowBox[{"Flatten", "@", 
   RowBox[{"RandomReal", "[", 
    RowBox[{
     RowBox[{
      RowBox[{"{", 
       RowBox[{"0", ",", "1"}], "}"}], "Pi"}], ",", 
     RowBox[{"{", 
      RowBox[{"$L", ",", "$n", ",", "3"}], "}"}]}], "]"}]}]}], "\[IndentingNewLine]", 
 RowBox[{"Length", "[", "w0", "]"}]}], "Input",
 CellLabel->"In[90]:=",
 CellID->596918871,ExpressionUUID->"2a1e3e47-aff4-460a-b898-5b4cf9a195fc"],

Cell[BoxData[
 RowBox[{"{", 
  RowBox[{
  "1.9332931545422873`", ",", "2.2627763580881437`", ",", 
   "0.6866293027175208`", ",", "1.621113487672444`", ",", "2.57820031040543`",
    ",", "2.9130525225276687`", ",", "2.613500565483305`", ",", 
   "1.8745808426470099`", ",", "1.1721600718953242`", ",", 
   "1.5613276581507778`", ",", "1.0599165814959903`", ",", 
   "2.551186703712121`", ",", "1.2998580554147576`", ",", 
   "1.177178009225286`", ",", "2.3148799657215893`", ",", 
   "2.5733495448138317`", ",", "3.057841761577185`", ",", 
   "0.030226450269048577`", ",", "1.4601273580086804`", ",", 
   "2.05695649551794`", ",", "1.395953453125486`", ",", "0.4632573267881295`",
    ",", "0.507190948921536`", ",", "1.0972254122627714`"}], "}"}]], "Output",\

 CellLabel->"Out[90]=",
 CellID->827078182,ExpressionUUID->"cb17895c-e0b2-464b-b897-ba922aa1819b"],

Cell[BoxData["24"], "Output",
 CellLabel->"Out[91]=",
 CellID->41357843,ExpressionUUID->"bd6d920d-aa4a-461f-ad21-804f183ada3e"]
}, Open  ]],

Cell["The set of parameters.", "TechNoteText",
 CellID->1764677153,ExpressionUUID->"50e87b29-defc-447f-9179-7b0ea1537629"],

Cell[BoxData[
 RowBox[{
  RowBox[{"aa", "=", 
   RowBox[{"a", "[", 
    RowBox[{
     RowBox[{"Range", "@", "$L"}], ",", 
     RowBox[{"Range", "@", "$n"}], ",", 
     RowBox[{"{", 
      RowBox[{"1", ",", "2", ",", "3"}], "}"}]}], "]"}]}], ";"}]], "Input",
 CellLabel->"In[92]:=",
 CellID->2130853490,ExpressionUUID->"a0b8284d-1158-46f1-a853-d52dc3539bda"],

Cell["\<\
We prepare the natural constraints, but in this example, we will not impose \
them.\
\>", "TechNoteText",
 CellID->384767242,ExpressionUUID->"bf7dac4a-d05d-4f43-87e4-1edbd2cdc140"],

Cell[BoxData[
 RowBox[{
  RowBox[{"constraints", "=", 
   RowBox[{"Thread", "[", 
    RowBox[{"0", "<=", "aa", "<", "Pi"}], "]"}]}], ";"}]], "Input",
 CellLabel->"In[93]:=",
 CellID->933528989,ExpressionUUID->"5f15a103-c589-4337-a8a2-59c0981ef0f7"],

Cell[BoxData[{
 RowBox[{
  RowBox[{"Clear", "[", "optimizer", "]"}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"optimizer", "[", "ww_", "]"}], ":=", 
  RowBox[{"Module", "[", "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"{", 
     RowBox[{
      RowBox[{"ii", "=", 
       RowBox[{"RandomChoice", "[", 
        RowBox[{
         RowBox[{"Range", "@", 
          RowBox[{"Length", "@", "data"}]}], ",", "4"}], "]"}]}], ",", 
      "\[IndentingNewLine]", "yy", ",", "vv", ",", "avg", ",", "sol", ",", 
      "cost"}], "}"}], ",", "\[IndentingNewLine]", 
    RowBox[{
     RowBox[{"Echo", "[", 
      RowBox[{"ii", ",", "\"\<ii\>\""}], "]"}], ";", "\[IndentingNewLine]", 
     RowBox[{"yy", "=", 
      RowBox[{"Part", "[", 
       RowBox[{
        RowBox[{"Values", "@", "data"}], ",", "ii"}], "]"}]}], ";", 
     "\[IndentingNewLine]", 
     RowBox[{"vv", "=", 
      RowBox[{"Transpose", "@", 
       RowBox[{"SparseArray", "@", 
        RowBox[{"Part", "[", 
         RowBox[{"$in", ",", "ii"}], "]"}]}]}]}], ";", "\[IndentingNewLine]", 
     
     RowBox[{"vv", "=", 
      RowBox[{"Transpose", "[", 
       RowBox[{"mat", ".", "vv"}], "]"}]}], ";", "\[IndentingNewLine]", 
     RowBox[{"avg", "=", 
      RowBox[{"Map", "[", 
       RowBox[{
        RowBox[{
         RowBox[{
          RowBox[{"Conjugate", "[", "#", "]"}], ".", "Z1", ".", "#"}], "&"}], 
        ",", "vv"}], "]"}]}], ";", "\[IndentingNewLine]", 
     RowBox[{"cost", "=", 
      RowBox[{
       RowBox[{"Mean", "@", 
        RowBox[{"Abs", "[", 
         RowBox[{"avg", "-", "yy"}], "]"}]}], "^", "2"}]}], ";", 
     "\[IndentingNewLine]", 
     RowBox[{"Echo", "[", 
      RowBox[{
       RowBox[{
        RowBox[{
         RowBox[{"{", 
          RowBox[{"avg", ",", "cost"}], "}"}], "/.", 
         RowBox[{"Thread", "[", 
          RowBox[{"aa", "->", "ww"}], "]"}]}], "//", "Chop"}], 
       ",", "\"\<{avg, cost}\>\""}], "]"}], ";", "\[IndentingNewLine]", 
     RowBox[{"EchoTiming", "[", "\[IndentingNewLine]", 
      RowBox[{
       RowBox[{
        RowBox[{"{", 
         RowBox[{"cost", ",", "sol"}], "}"}], "=", 
        RowBox[{"FindMinimum", "[", 
         RowBox[{
          RowBox[{"{", 
           RowBox[{"cost", ",", "constraints"}], "}"}], ",", 
          RowBox[{"Transpose", "@", 
           RowBox[{"{", 
            RowBox[{"aa", ",", "ww"}], "}"}]}], ",", "\[IndentingNewLine]", 
          RowBox[{"StepMonitor", ":>", 
           RowBox[{"PrintTemporary", "[", 
            RowBox[{"\"\<Cost: \>\"", ",", "cost"}], "]"}]}], ",", 
          "\[IndentingNewLine]", 
          RowBox[{"Method", "->", "\"\<IPOPT\>\""}]}], "]"}]}], ";"}], 
      "\[IndentingNewLine]", "]"}], ";", "\[IndentingNewLine]", 
     RowBox[{"Echo", "[", 
      RowBox[{
       RowBox[{"{", 
        RowBox[{
         RowBox[{"Chop", "[", 
          RowBox[{"avg", "/.", "sol"}], "]"}], ",", "yy", ",", "cost"}], 
        "}"}], ",", "\"\<{avg, yy, cost}\>\""}], "]"}], ";", 
     "\[IndentingNewLine]", 
     RowBox[{"Return", "[", 
      RowBox[{"aa", "/.", "sol"}], "]"}]}]}], "\[IndentingNewLine]", 
   "]"}]}]}], "Input",
 CellLabel->"In[97]:=",
 CellID->1817309058,ExpressionUUID->"adc27f04-b3fb-4415-80d6-d928da7d8ca1"],

Cell["Test the optimizer.", "TechNoteText",
 CellID->2000910172,ExpressionUUID->"b8492996-ce80-4e38-a139-a227f96e476b"],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"optimizer", "[", "w0", "]"}]], "Input",
 CellLabel->"In[99]:=",
 CellID->1850832431,ExpressionUUID->"94339c37-f633-4330-a4e6-993cd5f42fed"],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{
  TagBox["\<\"ii\"\>",
   "EchoLabel"], "  ", 
  RowBox[{"{", 
   RowBox[{"3", ",", "16", ",", "15", ",", "3"}], "}"}]}]], "Echo",
 CellID->1308991796,ExpressionUUID->"0cda98db-ff65-4a4d-9ffe-131b3e24d380"],

Cell[BoxData[
 RowBox[{
  TagBox["\<\"{avg, cost}\"\>",
   "EchoLabel"], "  ", 
  RowBox[{"{", 
   RowBox[{
    RowBox[{"{", 
     RowBox[{
      RowBox[{"-", "0.25414479005917884`"}], ",", "0.2555046198518733`", ",", 
      
      RowBox[{"-", "0.24282266763990845`"}], ",", 
      RowBox[{"-", "0.25414479005917884`"}]}], "}"}], ",", 
    "1.5666382786898978`"}], "}"}]}]], "Echo",
 CellID->1402635504,ExpressionUUID->"573305e2-85f3-4386-ae9c-5c1ef6603b5c"],

Cell[BoxData["1.508448`"], "EchoTiming",
 CellID->1149357693,ExpressionUUID->"18e715b7-421a-444a-b758-0430bb38ab46"],

Cell[BoxData[
 RowBox[{
  TagBox["\<\"{avg, yy, cost}\"\>",
   "EchoLabel"], "  ", 
  RowBox[{"{", 
   RowBox[{
    RowBox[{"{", 
     RowBox[{"0.9997484045342848`", ",", 
      RowBox[{"-", "0.9997802206385531`"}], ",", "0.9997156199289219`", ",", 
      "0.9997484045342848`"}], "}"}], ",", 
    RowBox[{"{", 
     RowBox[{"1", ",", 
      RowBox[{"-", "1"}], ",", "1", ",", "1"}], "}"}], ",", 
    "6.342217223507924`*^-8"}], "}"}]}]], "Echo",
 CellID->639341486,ExpressionUUID->"8647d20b-0c17-4212-b0c7-36bd264ff114"]
}, Open  ]],

Cell[BoxData[
 RowBox[{"{", 
  RowBox[{
  "1.8722023245344122`", ",", "1.910533171219098`", ",", 
   "0.9926655673875707`", ",", "1.5910888200617472`", ",", 
   "2.1181946396626987`", ",", "2.3381701949283262`", ",", 
   "1.5712343882023958`", ",", "1.5735880328586271`", ",", 
   "1.2922207081204682`", ",", "1.5707968447648526`", ",", 
   "1.5736448446175788`", ",", "2.198232384326009`", ",", 
   "1.3799151545886028`", ",", "1.2956140785283985`", ",", 
   "2.0700489357128142`", ",", "2.208954355600384`", ",", 
   "3.1294086746901613`", ",", "0.6959141657090034`", ",", 
   "1.4923806072040167`", ",", "1.5562321502186103`", ",", 
   "0.01184942606971996`", ",", "0.8853839708567515`", ",", 
   "0.019320821918119523`", ",", "1.2882689805857424`"}], "}"}]], "Output",
 CellLabel->"Out[99]=",
 CellID->1551669261,ExpressionUUID->"dd4715cd-387a-4222-9957-cd889abec401"]
}, Open  ]],

Cell["Find the optimal values of the parameters iteratively.", "TechNoteText",
 CellID->1878469324,ExpressionUUID->"a3ad78e0-850e-45d0-abae-57fb19e53728"],

Cell[CellGroupData[{

Cell[BoxData[{
 RowBox[{
  RowBox[{
   RowBox[{"$R", "=", "3"}], ";"}], 
  RowBox[{"(*", " ", 
   RowBox[{"the", " ", "number", " ", "of", " ", "iterations"}], " ", 
   "*)"}]}], "\[IndentingNewLine]", 
 RowBox[{"ww", "=", 
  RowBox[{"Nest", "[", 
   RowBox[{"optimizer", ",", "w0", ",", "$R"}], "]"}]}]}], "Input",
 CellLabel->"In[100]:=",
 CellID->379501823,ExpressionUUID->"24d88733-3144-4f9f-adbb-cbbff110b40d"],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{
  TagBox["\<\"ii\"\>",
   "EchoLabel"], "  ", 
  RowBox[{"{", 
   RowBox[{"14", ",", "6", ",", "13", ",", "1"}], "}"}]}]], "Echo",
 CellID->998172092,ExpressionUUID->"a9b0113e-2f18-4ec1-a834-6c6a5f8a2dac"],

Cell[BoxData[
 RowBox[{
  TagBox["\<\"{avg, cost}\"\>",
   "EchoLabel"], "  ", 
  RowBox[{"{", 
   RowBox[{
    RowBox[{"{", 
     RowBox[{
      RowBox[{"-", "0.34187319707329666`"}], ",", "0.45796062799548515`", ",",
       "0.3258702151092797`", ",", "0.32946273624669453`"}], "}"}], ",", 
    "1.859927784913029`"}], "}"}]}]], "Echo",
 CellID->136099880,ExpressionUUID->"12ba5c96-9d6f-41dd-9ba9-4d5ebd6ce6b1"],

Cell[BoxData["1.562568`"], "EchoTiming",
 CellID->1084925220,ExpressionUUID->"b37ff312-4b50-4e0c-86c9-c52ccd62b93e"],

Cell[BoxData[
 RowBox[{
  TagBox["\<\"{avg, yy, cost}\"\>",
   "EchoLabel"], "  ", 
  RowBox[{"{", 
   RowBox[{
    RowBox[{"{", 
     RowBox[{"0.9998338624046488`", ",", 
      RowBox[{"-", "0.9998338628760808`"}], ",", 
      RowBox[{"-", "0.9998338431290932`"}], ",", 
      RowBox[{"-", "0.9998324585858206`"}]}], "}"}], ",", 
    RowBox[{"{", 
     RowBox[{"1", ",", 
      RowBox[{"-", "1"}], ",", 
      RowBox[{"-", "1"}], ",", 
      RowBox[{"-", "1"}]}], "}"}], ",", "2.77200026582311`*^-8"}], 
   "}"}]}]], "Echo",
 CellID->54525863,ExpressionUUID->"71c9a31f-d143-4a14-9b3f-6581f73099cd"],

Cell[BoxData[
 RowBox[{
  TagBox["\<\"ii\"\>",
   "EchoLabel"], "  ", 
  RowBox[{"{", 
   RowBox[{"3", ",", "15", ",", "9", ",", "5"}], "}"}]}]], "Echo",
 CellID->1588145819,ExpressionUUID->"bbeb02ee-f6d0-432f-8122-c29591da6558"],

Cell[BoxData[
 RowBox[{
  TagBox["\<\"{avg, cost}\"\>",
   "EchoLabel"], "  ", 
  RowBox[{"{", 
   RowBox[{
    RowBox[{"{", 
     RowBox[{
      RowBox[{"-", "0.000048028315523022946`"}], ",", 
      RowBox[{"-", "0.00004803041755000598`"}], ",", "0.999832459057255`", ",",
       "0.9998338436005249`"}], "}"}], ",", "0.25010745056196615`"}], 
   "}"}]}]], "Echo",
 CellID->892531370,ExpressionUUID->"b16f2a02-b1f3-423b-af49-4bf8046ac874"],

Cell[BoxData["1.264226`"], "EchoTiming",
 CellID->526385277,ExpressionUUID->"bee3e8d7-be5d-4d7e-9bb3-b3221ac78290"],

Cell[BoxData[
 RowBox[{
  TagBox["\<\"{avg, yy, cost}\"\>",
   "EchoLabel"], "  ", 
  RowBox[{"{", 
   RowBox[{
    RowBox[{"{", 
     RowBox[{
     "0.9997377933869305`", ",", "0.999737793390885`", ",", 
      "0.9997384284724758`", ",", "0.9997384284685215`"}], "}"}], ",", 
    RowBox[{"{", 
     RowBox[{"1", ",", "1", ",", "1", ",", "1"}], "}"}], ",", 
    "6.858588514094816`*^-8"}], "}"}]}]], "Echo",
 CellID->1472208546,ExpressionUUID->"d12fb046-6a2a-448b-9539-41fe1e55de9a"],

Cell[BoxData[
 RowBox[{
  TagBox["\<\"ii\"\>",
   "EchoLabel"], "  ", 
  RowBox[{"{", 
   RowBox[{"5", ",", "2", ",", "10", ",", "16"}], "}"}]}]], "Echo",
 CellID->102451888,ExpressionUUID->"c5348b66-dbc2-4587-8005-97f5392c49f7"],

Cell[BoxData[
 RowBox[{
  TagBox["\<\"{avg, cost}\"\>",
   "EchoLabel"], "  ", 
  RowBox[{"{", 
   RowBox[{
    RowBox[{"{", 
     RowBox[{"0.9997384284685215`", ",", "0.99973812471738`", ",", 
      RowBox[{"-", "0.9997381247174406`"}], ",", 
      RowBox[{"-", "0.9997374896359432`"}]}], "}"}], ",", 
    "6.86220541079441`*^-8"}], "}"}]}]], "Echo",
 CellID->1774480369,ExpressionUUID->"e15bbb20-5dc2-4b0b-a16d-786e3e7a8841"],

Cell[BoxData["1.126082`"], "EchoTiming",
 CellID->2138213177,ExpressionUUID->"e48c6dc3-2253-4df6-b2e2-afa7bc4ba8bf"],

Cell[BoxData[
 RowBox[{
  TagBox["\<\"{avg, yy, cost}\"\>",
   "EchoLabel"], "  ", 
  RowBox[{"{", 
   RowBox[{
    RowBox[{"{", 
     RowBox[{"0.9998407268039011`", ",", "0.9998407268047316`", ",", 
      RowBox[{"-", "0.9998407268047311`"}], ",", 
      RowBox[{"-", "0.999335120942786`"}]}], "}"}], ",", 
    RowBox[{"{", 
     RowBox[{"1", ",", "1", ",", 
      RowBox[{"-", "1"}], ",", 
      RowBox[{"-", "1"}]}], "}"}], ",", "8.161001191604025`*^-8"}], 
   "}"}]}]], "Echo",
 CellID->957516941,ExpressionUUID->"df0fc459-d377-4e96-903b-418c62296d52"]
}, Open  ]],

Cell[BoxData[
 RowBox[{"{", 
  RowBox[{
  "1.5707979570843906`", ",", "1.5707977215653328`", ",", 
   "1.570796473023025`", ",", "1.570797721330485`", ",", 
   "1.5787335451453797`", ",", "1.5707966743450514`", ",", 
   "3.127776333489387`", ",", "1.5707977209348907`", ",", 
   "1.570796265565531`", ",", "1.570799476589355`", ",", "3.125664131273447`",
    ",", "1.570794941991233`", ",", "1.5707965674001152`", ",", 
   "1.5707976942931041`", ",", "1.5707956560423757`", ",", 
   "1.5707968138265365`", ",", "3.1256641312978193`", ",", 
   "1.5708391978289353`", ",", "1.57079646998551`", ",", 
   "1.5787335449720783`", ",", "1.5707971626787496`", ",", 
   "1.5707974272459846`", ",", "1.5707977216527407`", ",", 
   "1.5707971622162162`"}], "}"}]], "Output",
 CellLabel->"Out[101]=",
 CellID->1892260416,ExpressionUUID->"ba63d36d-becb-4e46-a6ae-499f8f81ac38"]
}, Open  ]],

Cell["From the optimized parameters, make predictions.", "TechNoteText",
 CellID->205804175,ExpressionUUID->"0398b792-86b3-414d-b6c9-b70210dacc57"],

Cell[CellGroupData[{

Cell[BoxData[{
 RowBox[{
  RowBox[{"mm", "=", 
   RowBox[{"mat", "/.", 
    RowBox[{"Thread", "[", 
     RowBox[{"aa", "->", "ww"}], "]"}]}]}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"vv", "=", 
   RowBox[{"Transpose", "[", 
    RowBox[{"mm", ".", 
     RowBox[{"Transpose", "[", "$in", "]"}]}], "]"}]}], ";"}], "\[IndentingNewLine]", 
 RowBox[{"predicted", "=", 
  RowBox[{"Map", "[", 
   RowBox[{
    RowBox[{
     RowBox[{"Sign", "@", 
      RowBox[{"Chop", "[", 
       RowBox[{
        RowBox[{"Conjugate", "[", "#", "]"}], ".", "Z1", ".", "#"}], "]"}]}], 
     "&"}], ",", "vv"}], "]"}]}]}], "Input",
 CellLabel->"In[102]:=",
 CellID->1502097555,ExpressionUUID->"829b7f89-03f1-4764-936c-9eae7443f5a1"],

Cell[BoxData[
 RowBox[{"{", 
  RowBox[{
   RowBox[{"-", "1"}], ",", "1", ",", "1", ",", 
   RowBox[{"-", "1"}], ",", "1", ",", 
   RowBox[{"-", "1"}], ",", 
   RowBox[{"-", "1"}], ",", "1", ",", "1", ",", 
   RowBox[{"-", "1"}], ",", 
   RowBox[{"-", "1"}], ",", "1", ",", 
   RowBox[{"-", "1"}], ",", "1", ",", "1", ",", 
   RowBox[{"-", "1"}]}], "}"}]], "Output",
 CellLabel->"Out[104]=",
 CellID->906684559,ExpressionUUID->"dd2b0934-e8c2-48c7-a0c3-c87b5a74f5a6"]
}, Open  ]],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"predicted", "-", 
  RowBox[{"Values", "[", "data", "]"}]}]], "Input",
 CellLabel->"In[105]:=",
 CellID->2061494112,ExpressionUUID->"9765e165-d73d-40ee-9084-ae97213fee34"],

Cell[BoxData[
 RowBox[{"{", 
  RowBox[{
  "0", ",", "0", ",", "0", ",", "0", ",", "0", ",", "0", ",", "0", ",", "0", ",",
    "0", ",", "0", ",", "0", ",", "0", ",", "0", ",", "0", ",", "0", ",", 
   "0"}], "}"}]], "Output",
 CellLabel->"Out[105]=",
 CellID->1509038801,ExpressionUUID->"00cac822-6ac7-4ac9-866b-9aa87daf94d3"]
}, Open  ]],

Cell[CellGroupData[{

Cell["Verdict", "Subsubsection",
 CellID->511955943,ExpressionUUID->"3fed6972-10dd-4270-bf0b-35f9637fb5d6"],

Cell["\<\
Two layers is sufficient to properly predict the parity values.\
\>", "Item",
 CellID->1759076356,ExpressionUUID->"449c6d75-2bdc-48a4-b98f-cdb3b38cdae9"],

Cell[TextData[{
 "Using the ",
 StyleBox["Method->\[OpenCurlyDoubleQuote]IPOPT\[CloseCurlyDoubleQuote],", 
  "Input"],
 " ",
 ButtonBox["FindMinimum",
  BaseStyle->"Link",
  ButtonData->"paclet:ref/FindMinimum"],
 " is significantly faster than the default method or any other documented \
methods (IPOTP seems to refer to the non-linear interior-point method from \
the IPOPT library)."
}], "Item",
 CellID->792143574,ExpressionUUID->"f780c406-4c80-43a1-b938-9aff60f7dd12"],

Cell[TextData[{
 "Otherwise, ",
 ButtonBox["FindMinimum",
  BaseStyle->"Link",
  ButtonData->"paclet:ref/FindMinimum"],
 " is rather slow to handle 24 parameters."
}], "Item",
 CellID->635288345,ExpressionUUID->"070b2f7d-3c24-470c-a7c0-9f4fc170af1c"]
}, Open  ]]
}, Open  ]],

Cell[CellGroupData[{

Cell["Using two layers imposing the constraints", "Subsection",
 CellID->1428432396,ExpressionUUID->"24d45229-728e-4226-a6e8-19893d83cd7b"],

Cell[BoxData[
 RowBox[{
  RowBox[{"$L", "=", "2"}], ";"}]], "Input",
 CellLabel->"In[106]:=",
 CellID->943589759,ExpressionUUID->"180b9b92-778e-4f17-865e-7ad34c748bae"],

Cell["Pick a quantum circuit layer to apply on the input states.", \
"TechNoteText",
 CellID->1893830065,ExpressionUUID->"2debbbc9-719b-4a03-a620-3731ee6ee3f0"],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"op", "=", 
  RowBox[{"layer", "[", "$L", "]"}]}]], "Input",
 CellLabel->"In[107]:=",
 CellID->1746770268,ExpressionUUID->"0114d54f-4ad3-499a-909a-a7307a801b0a"],

Cell[BoxData[
 InterpretationBox[
  GraphicsBox[{
    {Dashing[{Small, Small}], LineBox[{}]}, 
    LineBox[{{{0, -1}, {11, -1}}, {{0, -2}, {11, -2}}, {{0, -3}, {11, -3}}, {{
     0, -4}, {11, -4}}}], {{
      {GrayLevel[1], EdgeForm[None], RectangleBox[{0.6, -1.4}, {1.4, -0.6}]}, 
      LineBox[{{0.6, -1.4}, {1.4, -1.4}, {1.4, -0.6}, {0.6, -0.6}, {
       0.6, -1.4}}], InsetBox[
       StyleBox[
        SubscriptBox["\<\"U\"\>", "\<\"E\"\>"],
        StripOnInput->False,
        FontSize->Scaled[0.03636363636363637],
        FontWeight->"Light",
        FontSlant->Italic], {1, -1}, NCache[
       ImageScaled[{Rational[1, 2], Rational[1, 2]}], 
        ImageScaled[{0.5, 0.5}]]]}, {
      {GrayLevel[1], EdgeForm[None], RectangleBox[{0.6, -2.4}, {1.4, -1.6}]}, 
      LineBox[{{0.6, -2.4}, {1.4, -2.4}, {1.4, -1.6}, {0.6, -1.6}, {
       0.6, -2.4}}], InsetBox[
       StyleBox[
        SubscriptBox["\<\"U\"\>", "\<\"E\"\>"],
        StripOnInput->False,
        FontSize->Scaled[0.03636363636363637],
        FontWeight->"Light",
        FontSlant->Italic], {1, -2}, NCache[
       ImageScaled[{Rational[1, 2], Rational[1, 2]}], 
        ImageScaled[{0.5, 0.5}]]]}, {
      {GrayLevel[1], EdgeForm[None], RectangleBox[{0.6, -3.4}, {1.4, -2.6}]}, 
      LineBox[{{0.6, -3.4}, {1.4, -3.4}, {1.4, -2.6}, {0.6, -2.6}, {
       0.6, -3.4}}], InsetBox[
       StyleBox[
        SubscriptBox["\<\"U\"\>", "\<\"E\"\>"],
        StripOnInput->False,
        FontSize->Scaled[0.03636363636363637],
        FontWeight->"Light",
        FontSlant->Italic], {1, -3}, NCache[
       ImageScaled[{Rational[1, 2], Rational[1, 2]}], 
        ImageScaled[{0.5, 0.5}]]]}, {
      {GrayLevel[1], EdgeForm[None], RectangleBox[{0.6, -4.4}, {1.4, -3.6}]}, 
      LineBox[{{0.6, -4.4}, {1.4, -4.4}, {1.4, -3.6}, {0.6, -3.6}, {
       0.6, -4.4}}], InsetBox[
       StyleBox[
        SubscriptBox["\<\"U\"\>", "\<\"E\"\>"],
        StripOnInput->False,
        FontSize->Scaled[0.03636363636363637],
        FontWeight->"Light",
        FontSlant->Italic], {1, -4}, NCache[
       ImageScaled[{Rational[1, 2], Rational[1, 2]}], 
        ImageScaled[{0.5, 0.5}]]]}}, {LineBox[{{2, -1}, {2, -2}}], 
     DiskBox[{2, -1}, 0.09], {CircleBox[{2, -2}, 0.26666666666666666], 
      LineBox[{{{1.7333333333333334`, -2}, {2.2666666666666666`, -2}}, {{
         2, -2.2666666666666666`}, {2, -1.7333333333333334`}}}]}}, {
     LineBox[{{3, -2}, {3, -3}}], 
     DiskBox[{3, -2}, 0.09], {CircleBox[{3, -3}, 0.26666666666666666], 
      LineBox[{{{2.7333333333333334`, -3}, {3.2666666666666666`, -3}}, {{
         3, -3.2666666666666666`}, {3, -2.7333333333333334`}}}]}}, {
     LineBox[{{4, -3}, {4, -4}}], 
     DiskBox[{4, -3}, 0.09], {CircleBox[{4, -4}, 0.26666666666666666], 
      LineBox[{{{3.7333333333333334`, -4}, {4.266666666666667, -4}}, {{
         4, -4.266666666666667}, {4, -3.7333333333333334`}}}]}}, {
     LineBox[{{5, -4}, {5, -1}}], 
     DiskBox[{5, -4}, 0.09], {CircleBox[{5, -1}, 0.26666666666666666], 
      LineBox[{{{4.733333333333333, -1}, {5.266666666666667, -1}}, {{
         5, -1.2666666666666666`}, {5, -0.7333333333333334}}}]}}, {{
      {GrayLevel[1], EdgeForm[None], RectangleBox[{5.6, -1.4}, {6.4, -0.6}]}, 
      LineBox[{{5.6, -1.4}, {6.4, -1.4}, {6.4, -0.6}, {5.6, -0.6}, {
       5.6, -1.4}}], InsetBox[
       StyleBox[
        SubscriptBox["\<\"U\"\>", "\<\"E\"\>"],
        StripOnInput->False,
        FontSize->Scaled[0.03636363636363637],
        FontWeight->"Light",
        FontSlant->Italic], {6, -1}, NCache[
       ImageScaled[{Rational[1, 2], Rational[1, 2]}], 
        ImageScaled[{0.5, 0.5}]]]}, {
      {GrayLevel[1], EdgeForm[None], RectangleBox[{5.6, -2.4}, {6.4, -1.6}]}, 
      LineBox[{{5.6, -2.4}, {6.4, -2.4}, {6.4, -1.6}, {5.6, -1.6}, {
       5.6, -2.4}}], InsetBox[
       StyleBox[
        SubscriptBox["\<\"U\"\>", "\<\"E\"\>"],
        StripOnInput->False,
        FontSize->Scaled[0.03636363636363637],
        FontWeight->"Light",
        FontSlant->Italic], {6, -2}, NCache[
       ImageScaled[{Rational[1, 2], Rational[1, 2]}], 
        ImageScaled[{0.5, 0.5}]]]}, {
      {GrayLevel[1], EdgeForm[None], RectangleBox[{5.6, -3.4}, {6.4, -2.6}]}, 
      LineBox[{{5.6, -3.4}, {6.4, -3.4}, {6.4, -2.6}, {5.6, -2.6}, {
       5.6, -3.4}}], InsetBox[
       StyleBox[
        SubscriptBox["\<\"U\"\>", "\<\"E\"\>"],
        StripOnInput->False,
        FontSize->Scaled[0.03636363636363637],
        FontWeight->"Light",
        FontSlant->Italic], {6, -3}, NCache[
       ImageScaled[{Rational[1, 2], Rational[1, 2]}], 
        ImageScaled[{0.5, 0.5}]]]}, {
      {GrayLevel[1], EdgeForm[None], RectangleBox[{5.6, -4.4}, {6.4, -3.6}]}, 
      LineBox[{{5.6, -4.4}, {6.4, -4.4}, {6.4, -3.6}, {5.6, -3.6}, {
       5.6, -4.4}}], InsetBox[
       StyleBox[
        SubscriptBox["\<\"U\"\>", "\<\"E\"\>"],
        StripOnInput->False,
        FontSize->Scaled[0.03636363636363637],
        FontWeight->"Light",
        FontSlant->Italic], {6, -4}, NCache[
       ImageScaled[{Rational[1, 2], Rational[1, 2]}], 
        ImageScaled[{0.5, 0.5}]]]}}, {LineBox[{{7, -1}, {7, -2}}], 
     DiskBox[{7, -1}, 0.09], {CircleBox[{7, -2}, 0.26666666666666666], 
      LineBox[{{{6.733333333333333, -2}, {7.266666666666667, -2}}, {{
         7, -2.2666666666666666`}, {7, -1.7333333333333334`}}}]}}, {
     LineBox[{{8, -2}, {8, -3}}], 
     DiskBox[{8, -2}, 0.09], {CircleBox[{8, -3}, 0.26666666666666666], 
      LineBox[{{{7.733333333333333, -3}, {8.266666666666667, -3}}, {{
         8, -3.2666666666666666`}, {8, -2.7333333333333334`}}}]}}, {
     LineBox[{{9, -3}, {9, -4}}], 
     DiskBox[{9, -3}, 0.09], {CircleBox[{9, -4}, 0.26666666666666666], 
      LineBox[{{{8.733333333333333, -4}, {9.266666666666667, -4}}, {{
         9, -4.266666666666667}, {9, -3.7333333333333334`}}}]}}, {
     LineBox[{{10, -4}, {10, -1}}], 
     DiskBox[{10, -4}, 0.09], {CircleBox[{10, -1}, 0.26666666666666666], 
      LineBox[{{{9.733333333333333, -1}, {10.266666666666667`, -1}}, {{
         10, -1.2666666666666666`}, {10, -0.7333333333333334}}}]}}},
   AxesStyle->Large,
   FrameStyle->Large,
   ImagePadding->{{23.400000000000002`, 23.400000000000002`}, {1, 1}},
   ImageSize->442.8,
   PlotRange->NCache[{Full, {
       Rational[-9, 2], 
       Rational[-1, 2]}}, {Full, {-4.5, -0.5}}],
   PlotRangePadding->Scaled[0.025]],
  Q3S`QuantumCircuit[{
    Q3S`EulerRotation[{
      $CellContext`a[1, 1, 1], 
      $CellContext`a[1, 1, 2], 
      $CellContext`a[1, 1, 3]}, 
     $CellContext`S[1, Q3S`$]], 
    Q3S`EulerRotation[{
      $CellContext`a[1, 2, 1], 
      $CellContext`a[1, 2, 2], 
      $CellContext`a[1, 2, 3]}, 
     $CellContext`S[2, Q3S`$]], 
    Q3S`EulerRotation[{
      $CellContext`a[1, 3, 1], 
      $CellContext`a[1, 3, 2], 
      $CellContext`a[1, 3, 3]}, 
     $CellContext`S[3, Q3S`$]], 
    Q3S`EulerRotation[{
      $CellContext`a[1, 4, 1], 
      $CellContext`a[1, 4, 2], 
      $CellContext`a[1, 4, 3]}, 
     $CellContext`S[4, Q3S`$]]}, 
   Q3S`CNOT[{
      $CellContext`S[1, Q3S`$]} -> {1}, {
     $CellContext`S[2, Q3S`$]}], 
   Q3S`CNOT[{
      $CellContext`S[2, Q3S`$]} -> {1}, {
     $CellContext`S[3, Q3S`$]}], 
   Q3S`CNOT[{
      $CellContext`S[3, Q3S`$]} -> {1}, {
     $CellContext`S[4, Q3S`$]}], 
   Q3S`CNOT[{
      $CellContext`S[4, Q3S`$]} -> {1}, {
     $CellContext`S[1, Q3S`$]}], {
    Q3S`EulerRotation[{
      $CellContext`a[2, 1, 1], 
      $CellContext`a[2, 1, 2], 
      $CellContext`a[2, 1, 3]}, 
     $CellContext`S[1, Q3S`$]], 
    Q3S`EulerRotation[{
      $CellContext`a[2, 2, 1], 
      $CellContext`a[2, 2, 2], 
      $CellContext`a[2, 2, 3]}, 
     $CellContext`S[2, Q3S`$]], 
    Q3S`EulerRotation[{
      $CellContext`a[2, 3, 1], 
      $CellContext`a[2, 3, 2], 
      $CellContext`a[2, 3, 3]}, 
     $CellContext`S[3, Q3S`$]], 
    Q3S`EulerRotation[{
      $CellContext`a[2, 4, 1], 
      $CellContext`a[2, 4, 2], 
      $CellContext`a[2, 4, 3]}, 
     $CellContext`S[4, Q3S`$]]}, 
   Q3S`CNOT[{
      $CellContext`S[1, Q3S`$]} -> {1}, {
     $CellContext`S[2, Q3S`$]}], 
   Q3S`CNOT[{
      $CellContext`S[2, Q3S`$]} -> {1}, {
     $CellContext`S[3, Q3S`$]}], 
   Q3S`CNOT[{
      $CellContext`S[3, Q3S`$]} -> {1}, {
     $CellContext`S[4, Q3S`$]}], 
   Q3S`CNOT[{
      $CellContext`S[4, Q3S`$]} -> {1}, {
     $CellContext`S[1, Q3S`$]}]]]], "Output",
 CellLabel->"Out[107]=",
 CellID->347131738,ExpressionUUID->"8a105d3c-95c4-4870-8b0c-e107167ac78d"]
}, Open  ]],

Cell["\<\
Check which parameters are actually involved in the above quantum circuit.\
\>", "TechNoteText",
 CellID->959851573,ExpressionUUID->"b3931c72-ba1e-4d00-8f0b-71bcb84544cc"],

Cell[CellGroupData[{

Cell[BoxData[{
 RowBox[{"param", "=", 
  RowBox[{"Cases", "[", 
   RowBox[{"op", ",", "_a", ",", "Infinity"}], "]"}]}], "\[IndentingNewLine]", 
 RowBox[{"Length", "[", "param", "]"}]}], "Input",
 CellLabel->"In[108]:=",
 CellID->328231147,ExpressionUUID->"e57267d3-714e-482a-bc34-08cb8cba92b0"],

Cell[BoxData[
 RowBox[{"{", 
  RowBox[{
   InterpretationBox[
    SubscriptBox["a", 
     TemplateBox[{",", "\",\"", "1", "1", "1"},
      "RowWithSeparators"]],
    $CellContext`a[1, 1, 1]], ",", 
   InterpretationBox[
    SubscriptBox["a", 
     TemplateBox[{",", "\",\"", "1", "1", "2"},
      "RowWithSeparators"]],
    $CellContext`a[1, 1, 2]], ",", 
   InterpretationBox[
    SubscriptBox["a", 
     TemplateBox[{",", "\",\"", "1", "1", "3"},
      "RowWithSeparators"]],
    $CellContext`a[1, 1, 3]], ",", 
   InterpretationBox[
    SubscriptBox["a", 
     TemplateBox[{",", "\",\"", "1", "2", "1"},
      "RowWithSeparators"]],
    $CellContext`a[1, 2, 1]], ",", 
   InterpretationBox[
    SubscriptBox["a", 
     TemplateBox[{",", "\",\"", "1", "2", "2"},
      "RowWithSeparators"]],
    $CellContext`a[1, 2, 2]], ",", 
   InterpretationBox[
    SubscriptBox["a", 
     TemplateBox[{",", "\",\"", "1", "2", "3"},
      "RowWithSeparators"]],
    $CellContext`a[1, 2, 3]], ",", 
   InterpretationBox[
    SubscriptBox["a", 
     TemplateBox[{",", "\",\"", "1", "3", "1"},
      "RowWithSeparators"]],
    $CellContext`a[1, 3, 1]], ",", 
   InterpretationBox[
    SubscriptBox["a", 
     TemplateBox[{",", "\",\"", "1", "3", "2"},
      "RowWithSeparators"]],
    $CellContext`a[1, 3, 2]], ",", 
   InterpretationBox[
    SubscriptBox["a", 
     TemplateBox[{",", "\",\"", "1", "3", "3"},
      "RowWithSeparators"]],
    $CellContext`a[1, 3, 3]], ",", 
   InterpretationBox[
    SubscriptBox["a", 
     TemplateBox[{",", "\",\"", "1", "4", "1"},
      "RowWithSeparators"]],
    $CellContext`a[1, 4, 1]], ",", 
   InterpretationBox[
    SubscriptBox["a", 
     TemplateBox[{",", "\",\"", "1", "4", "2"},
      "RowWithSeparators"]],
    $CellContext`a[1, 4, 2]], ",", 
   InterpretationBox[
    SubscriptBox["a", 
     TemplateBox[{",", "\",\"", "1", "4", "3"},
      "RowWithSeparators"]],
    $CellContext`a[1, 4, 3]], ",", 
   InterpretationBox[
    SubscriptBox["a", 
     TemplateBox[{",", "\",\"", "2", "1", "1"},
      "RowWithSeparators"]],
    $CellContext`a[2, 1, 1]], ",", 
   InterpretationBox[
    SubscriptBox["a", 
     TemplateBox[{",", "\",\"", "2", "1", "2"},
      "RowWithSeparators"]],
    $CellContext`a[2, 1, 2]], ",", 
   InterpretationBox[
    SubscriptBox["a", 
     TemplateBox[{",", "\",\"", "2", "1", "3"},
      "RowWithSeparators"]],
    $CellContext`a[2, 1, 3]], ",", 
   InterpretationBox[
    SubscriptBox["a", 
     TemplateBox[{",", "\",\"", "2", "2", "1"},
      "RowWithSeparators"]],
    $CellContext`a[2, 2, 1]], ",", 
   InterpretationBox[
    SubscriptBox["a", 
     TemplateBox[{",", "\",\"", "2", "2", "2"},
      "RowWithSeparators"]],
    $CellContext`a[2, 2, 2]], ",", 
   InterpretationBox[
    SubscriptBox["a", 
     TemplateBox[{",", "\",\"", "2", "2", "3"},
      "RowWithSeparators"]],
    $CellContext`a[2, 2, 3]], ",", 
   InterpretationBox[
    SubscriptBox["a", 
     TemplateBox[{",", "\",\"", "2", "3", "1"},
      "RowWithSeparators"]],
    $CellContext`a[2, 3, 1]], ",", 
   InterpretationBox[
    SubscriptBox["a", 
     TemplateBox[{",", "\",\"", "2", "3", "2"},
      "RowWithSeparators"]],
    $CellContext`a[2, 3, 2]], ",", 
   InterpretationBox[
    SubscriptBox["a", 
     TemplateBox[{",", "\",\"", "2", "3", "3"},
      "RowWithSeparators"]],
    $CellContext`a[2, 3, 3]], ",", 
   InterpretationBox[
    SubscriptBox["a", 
     TemplateBox[{",", "\",\"", "2", "4", "1"},
      "RowWithSeparators"]],
    $CellContext`a[2, 4, 1]], ",", 
   InterpretationBox[
    SubscriptBox["a", 
     TemplateBox[{",", "\",\"", "2", "4", "2"},
      "RowWithSeparators"]],
    $CellContext`a[2, 4, 2]], ",", 
   InterpretationBox[
    SubscriptBox["a", 
     TemplateBox[{",", "\",\"", "2", "4", "3"},
      "RowWithSeparators"]],
    $CellContext`a[2, 4, 3]]}], "}"}]], "Output",
 CellLabel->"Out[108]=",
 CellID->2094261547,ExpressionUUID->"10f165b5-7664-45bb-b5f8-7dd9e9ac7ae8"],

Cell[BoxData["24"], "Output",
 CellLabel->"Out[109]=",
 CellID->996846099,ExpressionUUID->"738dccc5-66fb-4007-98f9-59c854dfee4b"]
}, Open  ]],

Cell[CellGroupData[{

Cell[BoxData[{
 RowBox[{
  RowBox[{"mat", "=", 
   RowBox[{"Normal", "@", 
    RowBox[{"N", "@", 
     RowBox[{"Matrix", "[", "op", "]"}]}]}]}], ";"}], "\[IndentingNewLine]", 
 RowBox[{"Dimensions", "[", "mat", "]"}]}], "Input",
 CellLabel->"In[110]:=",
 CellID->1252799684,ExpressionUUID->"82a4e600-7de4-4dd8-bef0-d600dff061b1"],

Cell[BoxData[
 RowBox[{"{", 
  RowBox[{"16", ",", "16"}], "}"}]], "Output",
 CellLabel->"Out[111]=",
 CellID->478776493,ExpressionUUID->"f9afc66b-8c4b-43b7-9d8b-ce17b8614271"]
}, Open  ]],

Cell[CellGroupData[{

Cell[BoxData[{
 RowBox[{
  RowBox[{"Z1", "=", 
   RowBox[{"Matrix", "[", 
    RowBox[{
     RowBox[{"S", "[", 
      RowBox[{"1", ",", "3"}], "]"}], ",", "SS"}], "]"}]}], ";"}], "\[IndentingNewLine]", 
 RowBox[{"Dimensions", "[", "Z1", "]"}]}], "Input",
 CellLabel->"In[112]:=",
 CellID->901551463,ExpressionUUID->"0bd57d38-60e9-45eb-bc88-b2d2fea99e84"],

Cell[BoxData[
 RowBox[{"{", 
  RowBox[{"16", ",", "16"}], "}"}]], "Output",
 CellLabel->"Out[113]=",
 CellID->542611287,ExpressionUUID->"588eefa0-7eba-4835-b98c-2ccd2adcd4ae"]
}, Open  ]],

Cell[CellGroupData[{

Cell[BoxData[{
 RowBox[{"w0", "=", 
  RowBox[{"Flatten", "@", 
   RowBox[{"RandomReal", "[", 
    RowBox[{
     RowBox[{
      RowBox[{"{", 
       RowBox[{"0", ",", "1"}], "}"}], "Pi"}], ",", 
     RowBox[{"{", 
      RowBox[{"$L", ",", "$n", ",", "3"}], "}"}]}], "]"}]}]}], "\[IndentingNewLine]", 
 RowBox[{"Length", "[", "w0", "]"}]}], "Input",
 CellLabel->"In[114]:=",
 CellID->730693292,ExpressionUUID->"a33acb8c-8014-4457-8325-08aabdff51da"],

Cell[BoxData[
 RowBox[{"{", 
  RowBox[{
  "1.9455729994565703`", ",", "0.9875888336693048`", ",", 
   "1.522081961792125`", ",", "2.949585483646528`", ",", "2.355612533929432`",
    ",", "1.6682448123363525`", ",", "2.2027977219264967`", ",", 
   "0.5243783118532455`", ",", "0.8031012908992308`", ",", 
   "0.6293496621806569`", ",", "1.4201662241035145`", ",", 
   "1.3262955388930555`", ",", "1.9253544519554033`", ",", 
   "0.3149530507566145`", ",", "1.373703253207661`", ",", 
   "2.547456363607443`", ",", "3.0801039847781366`", ",", 
   "3.0567497633504317`", ",", "2.810345695257795`", ",", 
   "0.5518708227873268`", ",", "1.3418726513957715`", ",", 
   "2.813538651280399`", ",", "2.2024353475202103`", ",", 
   "0.6379632454757496`"}], "}"}]], "Output",
 CellLabel->"Out[114]=",
 CellID->780936058,ExpressionUUID->"bc704445-5268-4adc-b6b0-c765d21517d7"],

Cell[BoxData["24"], "Output",
 CellLabel->"Out[115]=",
 CellID->1919759989,ExpressionUUID->"a5991160-fdfb-4e57-803e-742a765346fb"]
}, Open  ]],

Cell["The set of parameters.", "TechNoteText",
 CellID->1695059541,ExpressionUUID->"2a2bea68-31b0-448c-9c79-c24f0012451c"],

Cell[BoxData[
 RowBox[{
  RowBox[{"aa", "=", 
   RowBox[{"a", "[", 
    RowBox[{
     RowBox[{"Range", "@", "$L"}], ",", 
     RowBox[{"Range", "@", "$n"}], ",", 
     RowBox[{"{", 
      RowBox[{"1", ",", "2", ",", "3"}], "}"}]}], "]"}]}], ";"}]], "Input",
 CellLabel->"In[116]:=",
 CellID->347644485,ExpressionUUID->"9ce5c5b9-d447-4bfd-badf-81b6170ac234"],

Cell["Prepare the natural constraints for angles.", "TechNoteText",
 CellID->258268342,ExpressionUUID->"ea16e30e-fbf9-430f-a0b0-24a219fe35d9"],

Cell[BoxData[
 RowBox[{
  RowBox[{"constraints", "=", 
   RowBox[{"Thread", "[", 
    RowBox[{"0", "<=", "aa", "<", "Pi"}], "]"}]}], ";"}]], "Input",
 CellLabel->"In[117]:=",
 CellID->703106536,ExpressionUUID->"6ac23f7c-e721-4e64-bc2c-a28d4ab2200e"],

Cell[BoxData[{
 RowBox[{
  RowBox[{"Clear", "[", "optimizer", "]"}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"optimizer", "[", "ww_", "]"}], ":=", 
  RowBox[{"Module", "[", "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"{", 
     RowBox[{
      RowBox[{"ii", "=", 
       RowBox[{"RandomChoice", "[", 
        RowBox[{
         RowBox[{"Range", "@", 
          RowBox[{"Length", "@", "data"}]}], ",", "4"}], "]"}]}], ",", 
      "\[IndentingNewLine]", "yy", ",", "vv", ",", "avg", ",", "sol", ",", 
      "cost"}], "}"}], ",", "\[IndentingNewLine]", 
    RowBox[{
     RowBox[{"Echo", "[", 
      RowBox[{"ii", ",", "\"\<ii\>\""}], "]"}], ";", "\[IndentingNewLine]", 
     RowBox[{"yy", "=", 
      RowBox[{"Part", "[", 
       RowBox[{
        RowBox[{"Values", "@", "data"}], ",", "ii"}], "]"}]}], ";", 
     "\[IndentingNewLine]", 
     RowBox[{"vv", "=", 
      RowBox[{"Transpose", "@", 
       RowBox[{"SparseArray", "@", 
        RowBox[{"Part", "[", 
         RowBox[{"$in", ",", "ii"}], "]"}]}]}]}], ";", "\[IndentingNewLine]", 
     
     RowBox[{"vv", "=", 
      RowBox[{"Transpose", "[", 
       RowBox[{"mat", ".", "vv"}], "]"}]}], ";", "\[IndentingNewLine]", 
     RowBox[{"avg", "=", 
      RowBox[{"Map", "[", 
       RowBox[{
        RowBox[{
         RowBox[{
          RowBox[{"Conjugate", "[", "#", "]"}], ".", "Z1", ".", "#"}], "&"}], 
        ",", "vv"}], "]"}]}], ";", "\[IndentingNewLine]", 
     RowBox[{"cost", "=", 
      RowBox[{
       RowBox[{"Mean", "@", 
        RowBox[{"Abs", "[", 
         RowBox[{"avg", "-", "yy"}], "]"}]}], "^", "2"}]}], ";", 
     "\[IndentingNewLine]", 
     RowBox[{"Echo", "[", 
      RowBox[{
       RowBox[{
        RowBox[{
         RowBox[{"{", 
          RowBox[{"avg", ",", "cost"}], "}"}], "/.", 
         RowBox[{"Thread", "[", 
          RowBox[{"aa", "->", "ww"}], "]"}]}], "//", "Chop"}], 
       ",", "\"\<{avg, cost}\>\""}], "]"}], ";", "\[IndentingNewLine]", 
     RowBox[{"EchoTiming", "[", "\[IndentingNewLine]", 
      RowBox[{
       RowBox[{"{", 
        RowBox[{"cost", ",", "sol"}], "}"}], "=", 
       RowBox[{"FindMinimum", "[", 
        RowBox[{
         RowBox[{"{", 
          RowBox[{"cost", ",", "constraints"}], "}"}], ",", 
         RowBox[{"Transpose", "@", 
          RowBox[{"{", 
           RowBox[{"aa", ",", "ww"}], "}"}]}], ",", "\[IndentingNewLine]", 
         RowBox[{"StepMonitor", ":>", 
          RowBox[{"PrintTemporary", "[", 
           RowBox[{"\"\<Cost: \>\"", ",", "cost"}], "]"}]}], ",", 
         "\[IndentingNewLine]", 
         RowBox[{"Method", "->", "\"\<IPOPT\>\""}]}], "]"}]}], 
      "\[IndentingNewLine]", "]"}], ";", "\[IndentingNewLine]", 
     RowBox[{"Echo", "[", 
      RowBox[{
       RowBox[{"{", 
        RowBox[{
         RowBox[{"Chop", "[", 
          RowBox[{"avg", "/.", "sol"}], "]"}], ",", "yy", ",", "cost"}], 
        "}"}], ",", "\"\<{avg, yy, cost}\>\""}], "]"}], ";", 
     "\[IndentingNewLine]", 
     RowBox[{"Return", "[", 
      RowBox[{"aa", "/.", "sol"}], "]"}]}]}], "\[IndentingNewLine]", 
   "]"}]}]}], "Input",
 CellLabel->"In[118]:=",
 CellID->1656524758,ExpressionUUID->"d2a84c97-0495-4926-b3e8-18d297518ca8"],

Cell["Test the optimizer.", "TechNoteText",
 CellID->1233607998,ExpressionUUID->"f0569e67-94f5-405d-9628-f696b584720b"],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"optimizer", "[", "w0", "]"}]], "Input",
 CellLabel->"In[120]:=",
 CellID->1442494248,ExpressionUUID->"28f1f257-0302-419d-8c02-cd54ec884781"],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{
  TagBox["\<\"ii\"\>",
   "EchoLabel"], "  ", 
  RowBox[{"{", 
   RowBox[{"3", ",", "10", ",", "3", ",", "5"}], "}"}]}]], "Echo",
 CellID->407130219,ExpressionUUID->"9141f7c1-7fb8-4e4d-9133-710c9638bfc3"],

Cell[BoxData[
 RowBox[{
  TagBox["\<\"{avg, cost}\"\>",
   "EchoLabel"], "  ", 
  RowBox[{"{", 
   RowBox[{
    RowBox[{"{", 
     RowBox[{
      RowBox[{"-", "0.1472054294238407`"}], ",", "0.03886799418132819`", ",", 
      
      RowBox[{"-", "0.1472054294238407`"}], ",", 
      RowBox[{"-", "0.11777386860557829`"}]}], "}"}], ",", 
    "1.2382418956731673`"}], "}"}]}]], "Echo",
 CellID->754691391,ExpressionUUID->"2156e411-1415-47a0-bbdb-927eaa514be0"],

Cell[BoxData["1.422026`"], "EchoTiming",
 CellID->1271708988,ExpressionUUID->"b4cd2ccd-1ec7-44cc-9a03-3f75cbca8874"],

Cell[BoxData[
 RowBox[{
  TagBox["\<\"{avg, yy, cost}\"\>",
   "EchoLabel"], "  ", 
  RowBox[{"{", 
   RowBox[{
    RowBox[{"{", 
     RowBox[{"0.9996849254692504`", ",", 
      RowBox[{"-", "0.9995501313629811`"}], ",", "0.9996849254692504`", ",", 
      "0.9994562544611263`"}], "}"}], ",", 
    RowBox[{"{", 
     RowBox[{"1", ",", 
      RowBox[{"-", "1"}], ",", "1", ",", "1"}], "}"}], ",", 
    "1.6478794069405787`*^-7"}], "}"}]}]], "Echo",
 CellID->1855706372,ExpressionUUID->"363ca7dc-6dab-40f6-b7de-9072bf57260c"]
}, Open  ]],

Cell[BoxData[
 RowBox[{"{", 
  RowBox[{
  "0.01067720111761463`", ",", "1.5707966408705278`", ",", 
   "1.5593498112126596`", ",", "3.1309150576008755`", ",", 
   "1.570796760699315`", ",", "1.593759139923935`", ",", 
   "1.6117181986182803`", ",", "0.022712304715846055`", ",", 
   "1.3515923090614181`", ",", "0.010678050529396566`", ",", 
   "1.5707959445479809`", ",", "1.5120174985123342`", ",", 
   "1.6581013061152468`", ",", "1.1350483104096538`", ",", 
   "1.523808778603328`", ",", "1.8756818026496043`", ",", 
   "3.1225995977419068`", ",", "1.7693702044988875`", ",", 
   "1.9986821480726356`", ",", "0.01836347125411022`", ",", 
   "1.1227040206701338`", ",", "2.0002210346247873`", ",", 
   "1.5707978949558654`", ",", "0.010676842825131462`"}], "}"}]], "Output",
 CellLabel->"Out[120]=",
 CellID->951988823,ExpressionUUID->"4a64ae43-8ffc-4a4d-b9a1-903b3d0b33f7"]
}, Open  ]],

Cell["Find the optimal values of the parameters iteratively.", "TechNoteText",
 CellID->1771739654,ExpressionUUID->"c95e3753-086f-4a91-84e8-21017974de6d"],

Cell[CellGroupData[{

Cell[BoxData[{
 RowBox[{
  RowBox[{
   RowBox[{"$R", "=", "3"}], ";"}], 
  RowBox[{"(*", " ", 
   RowBox[{"the", " ", "number", " ", "of", " ", "iterations"}], " ", 
   "*)"}]}], "\[IndentingNewLine]", 
 RowBox[{"ww", "=", 
  RowBox[{"Nest", "[", 
   RowBox[{"optimizer", ",", "w0", ",", "$R"}], "]"}]}]}], "Input",
 CellLabel->"In[121]:=",
 CellID->620115476,ExpressionUUID->"d98dc372-aef2-4093-a365-3520bad99284"],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{
  TagBox["\<\"ii\"\>",
   "EchoLabel"], "  ", 
  RowBox[{"{", 
   RowBox[{"3", ",", "7", ",", "6", ",", "10"}], "}"}]}]], "Echo",
 CellID->16673400,ExpressionUUID->"9a02be45-0c49-481a-a9ce-462c5d706504"],

Cell[BoxData[
 RowBox[{
  TagBox["\<\"{avg, cost}\"\>",
   "EchoLabel"], "  ", 
  RowBox[{"{", 
   RowBox[{
    RowBox[{"{", 
     RowBox[{
      RowBox[{"-", "0.1472054294238407`"}], ",", "0.11046119754944508`", ",", 
      "0.04328049912172899`", ",", "0.03886799418132819`"}], "}"}], ",", 
    "1.1771247048861984`"}], "}"}]}]], "Echo",
 CellID->1056959690,ExpressionUUID->"6862de72-002d-4c5c-9618-0c7903cd9d06"],

Cell[BoxData["1.493493`"], "EchoTiming",
 CellID->914814556,ExpressionUUID->"38208726-524e-423e-afea-dec97c08ce93"],

Cell[BoxData[
 RowBox[{
  TagBox["\<\"{avg, yy, cost}\"\>",
   "EchoLabel"], "  ", 
  RowBox[{"{", 
   RowBox[{
    RowBox[{"{", 
     RowBox[{"0.999661328246716`", ",", 
      RowBox[{"-", "0.9996613493044926`"}], ",", 
      RowBox[{"-", "0.9996614109553`"}], ",", 
      RowBox[{"-", "0.9996613899094731`"}]}], "}"}], ",", 
    RowBox[{"{", 
     RowBox[{"1", ",", 
      RowBox[{"-", "1"}], ",", 
      RowBox[{"-", "1"}], ",", 
      RowBox[{"-", "1"}]}], "}"}], ",", "1.1467054509810449`*^-7"}], 
   "}"}]}]], "Echo",
 CellID->1598930799,ExpressionUUID->"2b4504a7-cfd2-409b-87cf-3d5e095f218c"],

Cell[BoxData[
 RowBox[{
  TagBox["\<\"ii\"\>",
   "EchoLabel"], "  ", 
  RowBox[{"{", 
   RowBox[{"3", ",", "10", ",", "15", ",", "14"}], "}"}]}]], "Echo",
 CellID->1767063882,ExpressionUUID->"ed2c9f10-b84c-402d-a203-7aeabc02bebb"],

Cell[BoxData[
 RowBox[{
  TagBox["\<\"{avg, cost}\"\>",
   "EchoLabel"], "  ", 
  RowBox[{"{", 
   RowBox[{
    RowBox[{"{", 
     RowBox[{"0.999661328246716`", ",", 
      RowBox[{"-", "0.9996613899094731`"}], ",", "0.9996613492925415`", ",", 
      "0.9996614109672544`"}], "}"}], ",", "1.1467054509770361`*^-7"}], 
   "}"}]}]], "Echo",
 CellID->1597649186,ExpressionUUID->"8fa48cc4-1ff8-46b8-bd1b-9324a728f52c"],

Cell[BoxData["1.189055`"], "EchoTiming",
 CellID->704843046,ExpressionUUID->"8c88d44b-ad02-4416-90fd-47b773385cd8"],

Cell[BoxData[
 RowBox[{
  TagBox["\<\"{avg, yy, cost}\"\>",
   "EchoLabel"], "  ", 
  RowBox[{"{", 
   RowBox[{
    RowBox[{"{", 
     RowBox[{"0.9996862204999271`", ",", 
      RowBox[{"-", "0.9996862117680494`"}], ",", "0.9996862235355927`", ",", 
      "0.9996862148053676`"}], "}"}], ",", 
    RowBox[{"{", 
     RowBox[{"1", ",", 
      RowBox[{"-", "1"}], ",", "1", ",", "1"}], "}"}], ",", 
    "9.84593617694503`*^-8"}], "}"}]}]], "Echo",
 CellID->777277270,ExpressionUUID->"63b1f09c-483a-4cae-83c7-8e5ba37bffde"],

Cell[BoxData[
 RowBox[{
  TagBox["\<\"ii\"\>",
   "EchoLabel"], "  ", 
  RowBox[{"{", 
   RowBox[{"1", ",", "12", ",", "2", ",", "7"}], "}"}]}]], "Echo",
 CellID->556052189,ExpressionUUID->"df13b447-eaaa-4480-8c20-bb4e7f3f5abc"],

Cell[BoxData[
 RowBox[{
  TagBox["\<\"{avg, cost}\"\>",
   "EchoLabel"], "  ", 
  RowBox[{"{", 
   RowBox[{
    RowBox[{"{", 
     RowBox[{
      RowBox[{"-", "0.9988486822293846`"}], ",", "0.9988486734942412`", ",", 
      "0.9996862117663967`", ",", 
      RowBox[{"-", "0.9996862235372455`"}]}], "}"}], ",", 
    "5.366327889923826`*^-7"}], "}"}]}]], "Echo",
 CellID->1268130734,ExpressionUUID->"4535d240-e8c3-4b03-948d-793422bf042a"],

Cell[BoxData["1.166843`"], "EchoTiming",
 CellID->1754250845,ExpressionUUID->"b903d1d5-bf73-4f29-8c46-716133256042"],

Cell[BoxData[
 RowBox[{
  TagBox["\<\"{avg, yy, cost}\"\>",
   "EchoLabel"], "  ", 
  RowBox[{"{", 
   RowBox[{
    RowBox[{"{", 
     RowBox[{
      RowBox[{"-", "0.9996690780819809`"}], ",", "0.9996690581160135`", ",", 
      "0.9997243425885042`", ",", 
      RowBox[{"-", "0.9995710646218299`"}]}], "}"}], ",", 
    RowBox[{"{", 
     RowBox[{
      RowBox[{"-", "1"}], ",", "1", ",", "1", ",", 
      RowBox[{"-", "1"}]}], "}"}], ",", "1.1670022605769657`*^-7"}], 
   "}"}]}]], "Echo",
 CellID->890962252,ExpressionUUID->"018a4f73-1f9f-4860-8f33-916e5ff96cc4"]
}, Open  ]],

Cell[BoxData[
 RowBox[{"{", 
  RowBox[{
  "1.5596843952261885`", ",", "1.5707974895813879`", ",", 
   "1.5708116173058815`", ",", "1.5707534888614136`", ",", 
   "3.129614894077515`", ",", "1.5707710041812488`", ",", 
   "1.5707989032369194`", ",", "1.5707973070085923`", ",", 
   "1.5707834339604074`", ",", "0.011965956139412776`", ",", 
   "1.5707973179507095`", ",", "1.5707351651864734`", ",", 
   "1.570757452818087`", ",", "1.5707022200482745`", ",", 
   "1.5707889486431201`", ",", "1.5707764599428091`", ",", 
   "1.5707974732245165`", ",", "3.1269219509974477`", ",", 
   "1.5708911193227537`", ",", "0.012812975821419482`", ",", 
   "2.2223853786578527`", ",", "1.5707813588831372`", ",", 
   "1.5707978442217843`", ",", "0.011966281278770901`"}], "}"}]], "Output",
 CellLabel->"Out[122]=",
 CellID->2146582480,ExpressionUUID->"4b1f6e4c-7365-41e5-811c-bdddacba5a3f"]
}, Open  ]],

Cell["From the optimized parameters, make predictions.", "TechNoteText",
 CellID->565591423,ExpressionUUID->"eda69608-2dbc-4d5b-b06c-7a9785f42fdf"],

Cell[CellGroupData[{

Cell[BoxData[{
 RowBox[{
  RowBox[{"mm", "=", 
   RowBox[{"mat", "/.", 
    RowBox[{"Thread", "[", 
     RowBox[{"aa", "->", "ww"}], "]"}]}]}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"vv", "=", 
   RowBox[{"Transpose", "[", 
    RowBox[{"mm", ".", 
     RowBox[{"Transpose", "[", "$in", "]"}]}], "]"}]}], ";"}], "\[IndentingNewLine]", 
 RowBox[{"predicted", "=", 
  RowBox[{"Map", "[", 
   RowBox[{
    RowBox[{
     RowBox[{"Sign", "@", 
      RowBox[{"Chop", "[", 
       RowBox[{
        RowBox[{"Conjugate", "[", "#", "]"}], ".", "Z1", ".", "#"}], "]"}]}], 
     "&"}], ",", "vv"}], "]"}]}]}], "Input",
 CellLabel->"In[123]:=",
 CellID->1132424739,ExpressionUUID->"568a654c-f63a-456d-8b8c-5ce9d1af2374"],

Cell[BoxData[
 RowBox[{"{", 
  RowBox[{
   RowBox[{"-", "1"}], ",", "1", ",", "1", ",", 
   RowBox[{"-", "1"}], ",", "1", ",", 
   RowBox[{"-", "1"}], ",", 
   RowBox[{"-", "1"}], ",", "1", ",", "1", ",", 
   RowBox[{"-", "1"}], ",", 
   RowBox[{"-", "1"}], ",", "1", ",", 
   RowBox[{"-", "1"}], ",", "1", ",", "1", ",", 
   RowBox[{"-", "1"}]}], "}"}]], "Output",
 CellLabel->"Out[125]=",
 CellID->898965578,ExpressionUUID->"7702a8bd-fe3d-4584-85e4-f84782b8c0ac"]
}, Open  ]],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"predicted", "-", 
  RowBox[{"Values", "[", "data", "]"}]}]], "Input",
 CellLabel->"In[126]:=",
 CellID->873300696,ExpressionUUID->"78aee007-526f-4131-9286-1bc05284864f"],

Cell[BoxData[
 RowBox[{"{", 
  RowBox[{
  "0", ",", "0", ",", "0", ",", "0", ",", "0", ",", "0", ",", "0", ",", "0", ",",
    "0", ",", "0", ",", "0", ",", "0", ",", "0", ",", "0", ",", "0", ",", 
   "0"}], "}"}]], "Output",
 CellLabel->"Out[126]=",
 CellID->693635637,ExpressionUUID->"985a00d6-5ea5-464d-824b-7bb20d167a4e"]
}, Open  ]],

Cell[CellGroupData[{

Cell["Verdict", "Subsubsection",
 CellID->351030337,ExpressionUUID->"37896b0e-0e6e-4e1c-9374-add83f24131a"],

Cell["\<\
Two layers is sufficient to properly predict the parity values.\
\>", "Item",
 CellID->32805757,ExpressionUUID->"0c8a4005-3f02-4dd3-854b-4df26e6c0f4b"],

Cell[TextData[{
 "Using the ",
 StyleBox["Method->\[OpenCurlyDoubleQuote]IPOPT\[CloseCurlyDoubleQuote],", 
  "Input"],
 " ",
 ButtonBox["FindMinimum",
  BaseStyle->"Link",
  ButtonData->"paclet:ref/FindMinimum"],
 " is significantly faster than the default method or any other documented \
methods (IPOTP seems to refer to the non-linear interior-point method from \
the IPOPT library)."
}], "Item",
 CellID->1610544267,ExpressionUUID->"3f2f9e93-47c1-4cd7-9671-35738865a89c"],

Cell[TextData[{
 "Otherwise, ",
 ButtonBox["FindMinimum",
  BaseStyle->"Link",
  ButtonData->"paclet:ref/FindMinimum"],
 " is rather slow to handle 24 parameters."
}], "Item",
 CellID->1533608681,ExpressionUUID->"aefbcec7-68cf-4308-942e-11648ba34bf1"]
}, Open  ]]
}, Open  ]]
}, Open  ]],

Cell[BoxData[GridBox[{
   {
    DynamicBox[FEPrivate`ImportImage[
      FrontEnd`FileName[{"Documentation", "FooterIcons"}, "RelatedGuide.png"]],
     ImageSizeCache->{50., {26.47265625, 33.52734375}}], GridBox[{
      {
       StyleBox[
        RowBox[{"Related", " ", "Guides"}], "TutorialMoreAboutSection"]},
      {
       RowBox[{
       "\[FilledVerySmallSquare]", Cell[TextData[ButtonBox[
        "Quantum Information Systems",
         BaseStyle->"Link",
         ButtonData->
          "paclet:QuantumMob/Q3S/guide/QuantumInformationSystems"]], 
         "TutorialMoreAbout",ExpressionUUID->
         "aa28481b-a900-41cd-ab13-13e1480c44ff"]}]},
      {
       RowBox[{
       "\[FilledVerySmallSquare]", Cell[TextData[ButtonBox[
        "Quantum Many-Body Systems",
         BaseStyle->"Link",
         ButtonData->"paclet:QuantumMob/Q3S/guide/QuantumManyBodySystems"]], 
         "TutorialMoreAbout",ExpressionUUID->
         "a5fd631b-9f78-4e38-8ee0-74cec59100a8"]}]},
      {
       RowBox[{
       "\[FilledVerySmallSquare]", Cell[TextData[ButtonBox[
        "Quantum Spin Systems",
         BaseStyle->"Link",
         ButtonData->"paclet:QuantumMob/Q3S/guide/QuantumSpinSystems"]], 
         "TutorialMoreAbout",ExpressionUUID->
         "299ed72d-8e49-4278-aa72-c5c1d6acdda3"]}]}
     }]}
  }]], "TutorialMoreAboutSection",ExpressionUUID->"e3a147f6-8a73-457c-9c4b-\
9d12316928d4"],

Cell[BoxData[GridBox[{
   {
    DynamicBox[FEPrivate`ImportImage[
      FrontEnd`FileName[{"Documentation", "FooterIcons"}, 
       "RelatedTutorial.png"]],
     ImageSizeCache->{50., {26.47265625, 33.52734375}}], GridBox[{
      {
       StyleBox[
        RowBox[{"Related", " ", "Tech", " ", "Notes"}], 
        "RelatedTutorialsSection"]},
      {
       RowBox[{
       "\[FilledVerySmallSquare]", Cell[TextData[ButtonBox[
        "A Quantum Playbook",
         BaseStyle->"Link",
         ButtonData->
          "paclet:QuantumMob/QuantumPlaybook/tutorial/QuantumPlaybook"]], 
         "RelatedTutorials",ExpressionUUID->
         "0b0a8b77-f75e-4659-b6e3-d0b25474cde9"]}]},
      {
       RowBox[{
       "\[FilledVerySmallSquare]", Cell[TextData[ButtonBox[
        "Quantum Information Systems with Q3",
         BaseStyle->"Link",
         ButtonData->
          "paclet:QuantumMob/Q3S/tutorial/QuantumInformationSystems"]], 
         "RelatedTutorials",ExpressionUUID->
         "cab59cda-632d-4680-b5ba-e87ba5ef5da2"]}]},
      {
       RowBox[{
       "\[FilledVerySmallSquare]", Cell[TextData[ButtonBox[
        "Quantum Many-Body Systems with Q3",
         BaseStyle->"Link",
         ButtonData->
          "paclet:QuantumMob/Q3S/tutorial/QuantumManyBodySystems"]], 
         "RelatedTutorials",ExpressionUUID->
         "cebc9026-0b8f-4d2d-8427-f456f8e307b5"]}]},
      {
       RowBox[{
       "\[FilledVerySmallSquare]", Cell[TextData[ButtonBox[
        "Quantum Spin Systems with Q3",
         BaseStyle->"Link",
         ButtonData->"paclet:QuantumMob/Q3S/tutorial/QuantumSpinSystems"]], 
         "RelatedTutorials",ExpressionUUID->
         "d39cebc3-6231-47d6-8734-690b58415041"]}]}
     }]}
  }]], "RelatedTutorialsSection",ExpressionUUID->"e1b0cc6b-dc63-40cb-b760-\
670f37b98cb9"],

Cell[BoxData[GridBox[{
   {
    TemplateBox[{29},
     "Spacer1"], GridBox[{
      {
       RowBox[{
        TemplateBox[{17},
         "Spacer1"], 
        StyleBox[
         RowBox[{"Related", " ", "Links"}], 
         "TutorialRelatedLinksSection"]}]},
      {Cell[TextData[{
        "Maria Should, PennyLane demonstration \[OpenCurlyDoubleQuote]",
        Cell[BoxData[
         TemplateBox[{
           Cell[
            TextData["Variational classifier"]], 
           "https://pennylane.ai/qml/demos/tutorial_variational_classifier"},
          "WebLink",
          BaseStyle->{"RelatedTutorials"}]],ExpressionUUID->
         "79a02f4e-8a6f-4847-aa81-045bf49f9d82"],
        "\[CloseCurlyDoubleQuote]."
       }], "RelatedTutorials",ExpressionUUID->
        "7968f3ec-2866-460e-92c9-8d78c5219393"]},
      {Cell[TextData[{
        Cell[BoxData[
         RowBox[{
          TemplateBox[{16},
           "Spacer1"], "\[FilledVerySmallSquare]", Cell[BoxData[
           TemplateBox[{
             Cell[
              TextData[
               Cell[
                TextData[{
                  Cell[
                   BoxData[
                    TemplateBox[{2}, "Spacer1"]]], 
                  "Mahn-Soo Choi (2022)"}]]]], 
             "https://doi.org/10.1007/978-3-030-91214-7"},
            "WebLink",
            BaseStyle->{"TutorialRelatedLinks"}]],ExpressionUUID->
           "b42f21b1-fe3d-4ccb-9dde-6754c5f3726a"]}]],ExpressionUUID->
         "fcf9db64-f51b-4d90-b132-93afe8b1196f"],
        ", A Quantum Computation Workbook (Springer, 2022)."
       }], "TutorialRelatedLinks",ExpressionUUID->
        "520ba694-edb5-43be-9817-d9ca9d43aebd"]}
     }]}
  }]], "TutorialRelatedLinksSection",ExpressionUUID->"f26d50cf-c493-4434-8a5c-\
75c16f86543d"]
}, Open  ]],

Cell[" ", "FooterCell",ExpressionUUID->"213701fd-a242-43fd-ae34-05e004cd850e"]
},
Saveable->False,
ScreenStyleEnvironment->"Working",
WindowSize->{900, 830},
WindowMargins->{{0, Automatic}, {Automatic, 0}},
WindowTitle->"Variational Quantum Classifier: Parity",
TaggingRules->{
 "ModificationHighlight" -> False, "ColorType" -> "", "LinkTrails" -> "", 
  "ExampleCounter" -> 1, 
  "Openers" -> {
   "PrimaryExamplesSection" -> Open, "ExampleSection" -> {"0" -> Open}}, 
  "NewStyles" -> True, "CitationPopupData" -> {"2023", ""}, "ShowCitation" -> 
  False, "RootCaptions" -> "", "HeaderCoreAreaLink" -> {}, 
  "Metadata" -> {
   "built" -> "{2025, 3, 4, 1, 37, 46.985477}", 
    "history" -> {"13.3", "", "", ""}, "context" -> 
    "QuantumMob`QuantumPlaybook`", 
    "keywords" -> {
     "quantum machine learning", "variational quantum classifier"}, 
    "specialkeywords" -> {}, "tutorialcollectionlinks" -> {}, "index" -> True,
     "label" -> "Quantum Mob/ Quantum Playbook Tech Note", "language" -> "en",
     "paclet" -> "QuantumMob/QuantumPlaybook", "status" -> "None", "summary" -> 
    "This demonstration is a translation of the tutorial 'Variational \
classifier' in PennyLane by Maria Schuld. It demonstrates variational quantum \
classifiers; that is, quantum circuits that can be trained from labelled data \
to classify new data samples. In particular, we will see that the variational \
quantum classifier can reproduce the parity function \
f:{0,1}^n\\[RightArrow]{1,-1}, where f(x)=1 if there are even number of ones \
in x and -1 otherwise. This optimization example demonstrates how to encode \
binary inputs into the initial state of the variational circuit, which is \
simply a computational basis state. The qubits to be modeled are S[i,$] for \
i=1,\\[Ellipsis],n.", "synonyms" -> {}, "tabletags" -> {}, "title" -> 
    "Variational Quantum Classifier: Parity", "titlemodifier" -> "", 
    "metadescription" -> "", "windowtitle" -> 
    "Variational Quantum Classifier: Parity", "type" -> "Tech Note", "uri" -> 
    "QuantumMob/QuantumPlaybook/tutorial/VariationalQuantumClassifierParity"}},
FrontEndVersion->"14.2 for Mac OS X ARM (64-bit) (December 26, 2024)",
StyleDefinitions->Notebook[{
   Cell[
    StyleData[
    StyleDefinitions -> FrontEnd`FileName[{"Wolfram"}, "Reference.nb"]]], 
   Cell[
    StyleData["Input"], CellContext -> Notebook], 
   Cell[
    StyleData["Output"], CellContext -> Notebook], 
   Cell[
    StyleData["TutorialMoreAboutSection"], 
    CellGroupingRules -> {"SectionGrouping", 30}], 
   Cell[
    StyleData["RelatedTutorialsSection"], 
    CellGroupingRules -> {"SectionGrouping", 30}], 
   Cell[
    StyleData["TutorialRelatedLinksSection"], 
    CellGroupingRules -> {"SectionGrouping", 30}]}, Visible -> False, 
  FrontEndVersion -> "14.2 for Mac OS X ARM (64-bit) (December 26, 2024)", 
  StyleDefinitions -> "PrivateStylesheetFormatting.nb"],
ExpressionUUID->"c1e2e04d-5885-4b05-a01a-39520b5ce38a"
]
(* End of Notebook Content *)

(* Internal cache information *)
(*CellTagsOutline
CellTagsIndex->{}
*)
(*CellTagsIndex
CellTagsIndex->{}
*)
(*NotebookFileOutline
Notebook[{
Cell[606, 21, 7479, 182, 50, "AnchorBarGrid",ExpressionUUID->"389a2d78-5774-47f4-9c13-3f39896b9a62",
 CellID->1],
Cell[CellGroupData[{
Cell[8110, 207, 138, 1, 67, "TechNoteTitle",ExpressionUUID->"647c5c2c-d616-45b5-a467-f5352ac5ba41",
 CellID->519812075],
Cell[8251, 210, 3996, 92, 86, "TechNoteJumpBox",ExpressionUUID->"d9fd18e5-5c0a-4a2e-8dae-8d47966deace"],
Cell[12250, 304, 658, 14, 57, "TechNoteText",ExpressionUUID->"da6a3aab-c035-4ebb-8530-73e784c7ee2e",
 CellID->239396700],
Cell[12911, 320, 1190, 33, 80, "TechNoteText",ExpressionUUID->"f6ff7e9e-be6c-410e-8633-2cde9b3d68a2",
 CellID->1384746856],
Cell[14104, 355, 781, 19, 90, "DefinitionBox",ExpressionUUID->"53677078-2d3d-4e66-bbe1-6e7642f00d82",
 CellID->1292802137],
Cell[14888, 376, 160, 2, 30, "TechNoteCaption",ExpressionUUID->"6fabdab9-8d2f-424b-a4af-2835696bb07d",
 CellID->2033459860],
Cell[15051, 380, 140, 1, 35, "TechNoteMathCaption",ExpressionUUID->"2aef7f18-68da-4d06-8903-f614aa182f96",
 CellID->1305108662],
Cell[15194, 383, 179, 3, 28, "Input",ExpressionUUID->"970fe880-592b-4284-9559-cebcd8d40f4a",
 CellID->563311776],
Cell[CellGroupData[{
Cell[15398, 390, 108, 1, 79, "TechNoteSection",ExpressionUUID->"0f32a0ac-4e9c-4e23-b4ba-875b59d34396",
 CellID->2070070916],
Cell[15509, 393, 527, 15, 38, "TechNoteText",ExpressionUUID->"35c0cdc3-414f-4a85-8934-8d159076594d",
 CellID->1080054462],
Cell[16039, 410, 181, 4, 28, "Input",ExpressionUUID->"4538a37b-a0ca-402f-8587-a5747f66411a",
 CellID->551157850],
Cell[CellGroupData[{
Cell[16245, 418, 504, 14, 81, "Input",ExpressionUUID->"77191089-1e5e-4d9d-8246-925bd3554e1c",
 CellID->1447508049],
Cell[16752, 434, 749, 24, 36, "Output",ExpressionUUID->"820c5d1f-164c-401f-a2ac-ae891848fe34",
 CellID->2057153310]
}, Open  ]]
}, Open  ]],
Cell[CellGroupData[{
Cell[17550, 464, 107, 1, 79, "TechNoteSection",ExpressionUUID->"07653698-93ca-433b-bd56-6f2d2e6d6c2d",
 CellID->1599589615],
Cell[17660, 467, 129, 1, 70, "TechNoteText",ExpressionUUID->"3edbdc37-1c60-4053-a7f2-69664532d85e",
 CellID->1845640457],
Cell[CellGroupData[{
Cell[17814, 472, 845, 25, 70, "Input",ExpressionUUID->"337583ad-045f-4dac-8927-1da4ac39bd00",
 CellID->2006481062],
Cell[18662, 499, 2742, 96, 282, "Output",ExpressionUUID->"1f6d71e0-a9d7-46fd-abc3-fa01e654595a",
 CellID->1941040869]
}, Open  ]],
Cell[21419, 598, 139, 1, 70, "TechNoteText",ExpressionUUID->"abde0806-0353-4839-a67f-68ea337dc538",
 CellID->1049292018],
Cell[CellGroupData[{
Cell[21583, 603, 439, 11, 70, "Input",ExpressionUUID->"ac7f38ce-fc75-4d96-915e-2388fe18e0d7",
 CellID->332895033],
Cell[22025, 616, 12976, 517, 269, "Output",ExpressionUUID->"2fba8b63-e53a-4c88-9d53-6b417626c991",
 CellID->370112065]
}, Open  ]]
}, Open  ]],
Cell[CellGroupData[{
Cell[35050, 1139, 124, 1, 70, "TechNoteSection",ExpressionUUID->"173b22c8-40b5-4016-9854-d3c190c3aa67",
 CellID->1732304737],
Cell[35177, 1142, 770, 24, 70, "TechNoteText",ExpressionUUID->"675a987c-6e94-40d0-9940-0f17d4aeb9e0",
 CellID->1481153565],
Cell[35950, 1168, 181, 4, 70, "Input",ExpressionUUID->"147347a8-a7a7-4c23-98b6-157d6feaab5b",
 CellID->226058522],
Cell[36134, 1174, 130, 1, 70, "TechNoteText",ExpressionUUID->"26e73af7-7d57-4b4b-92ce-a3d7f413c158",
 CellID->935626912],
Cell[36267, 1177, 1769, 52, 70, "Input",ExpressionUUID->"aa35a60b-d40f-44c2-bd96-1cc87f31c3ab",
 CellID->602466469],
Cell[38039, 1231, 821, 23, 70, "TechNoteText",ExpressionUUID->"76331035-de8c-41b6-8eb3-60f6a951d06a",
 CellID->1287530389],
Cell[CellGroupData[{
Cell[38885, 1258, 181, 4, 70, "Input",ExpressionUUID->"49bbca86-90db-4edf-a7e9-bfdf352a9ad6",
 CellID->791747932],
Cell[39069, 1264, 8434, 198, 167, "Output",ExpressionUUID->"5678e635-672d-4cf6-8e1e-55d3269c595e",
 CellID->1082089555]
}, Open  ]]
}, Open  ]],
Cell[CellGroupData[{
Cell[47552, 1468, 115, 1, 70, "TechNoteSection",ExpressionUUID->"111a4759-abc0-4afd-9106-1cb2facf3f30",
 CellID->1787628089],
Cell[CellGroupData[{
Cell[47692, 1473, 118, 1, 70, "Subsection",ExpressionUUID->"46c1c25b-65a3-4a2e-aff4-65604050e730",
 CellID->1045681763],
Cell[47813, 1476, 168, 4, 70, "Input",ExpressionUUID->"7a4d53d8-34a9-4acf-876e-f1c9ce6038b0",
 CellID->1530851286],
Cell[47984, 1482, 159, 2, 70, "TechNoteText",ExpressionUUID->"9f6d96bf-2c8a-4209-928b-11be2236953a",
 CellID->988267993],
Cell[CellGroupData[{
Cell[48168, 1488, 182, 4, 70, "Input",ExpressionUUID->"93c310ba-cb78-4c88-a4b6-dffb50c24159",
 CellID->787654452],
Cell[48353, 1494, 4519, 107, 167, "Output",ExpressionUUID->"1c47cac9-e4cc-470d-bae7-a84e2861696e",
 CellID->2088087738]
}, Open  ]],
Cell[52887, 1604, 233, 6, 70, "Input",ExpressionUUID->"e8a11652-d67f-496b-95b6-15ca0bbc30ca",
 CellID->359017298],
Cell[53123, 1612, 286, 8, 70, "Input",ExpressionUUID->"f2c7596c-642d-4110-abb9-fc0b98bf656d",
 CellID->1806786521],
Cell[CellGroupData[{
Cell[53434, 1624, 384, 11, 70, "Input",ExpressionUUID->"d2d53f54-f0b6-411a-820e-1cc33435e4a4",
 CellID->1331466339],
Cell[53821, 1637, 508, 10, 52, "Output",ExpressionUUID->"5f98e01b-fe40-4ad2-b393-882849c0d2b3",
 CellID->513750506]
}, Open  ]],
Cell[54344, 1650, 128, 1, 70, "TechNoteMathCaption",ExpressionUUID->"5289728c-e174-40cf-b656-cd61cbdc864f",
 CellID->778390898],
Cell[54475, 1653, 357, 10, 70, "Input",ExpressionUUID->"b4eb6b98-549a-43d6-942a-887093eefa91",
 CellID->1785137132],
Cell[54835, 1665, 182, 3, 70, "TechNoteMathCaption",ExpressionUUID->"13f9b5f8-cee7-451d-9be5-8948ed0d08cd",
 CellID->904180189],
Cell[55020, 1670, 249, 6, 70, "Input",ExpressionUUID->"45e89a60-092e-4e4d-ab16-2ac96b72fd95",
 CellID->1028409558],
Cell[55272, 1678, 2647, 70, 70, "Input",ExpressionUUID->"0f3760c7-cd21-4d1f-9903-9f8ad31f13d3",
 CellID->450103983],
Cell[57922, 1750, 125, 1, 70, "TechNoteMathCaption",ExpressionUUID->"8bb3d6f0-287e-4639-a450-7559c86b18c2",
 CellID->390365273],
Cell[CellGroupData[{
Cell[58072, 1755, 162, 3, 70, "Input",ExpressionUUID->"bfa05406-9a2e-4019-b6e8-501f3b1168c9",
 CellID->742028701],
Cell[CellGroupData[{
Cell[58259, 1762, 116, 1, 70, "EchoTiming",ExpressionUUID->"184e32ac-426a-4481-90e1-45da9253e228",
 CellID->1848226052],
Cell[58378, 1765, 577, 16, 70, "Echo",ExpressionUUID->"b84bb44c-3d46-4977-b4b1-94d8e8f064dd",
 CellID->1931785756]
}, Open  ]],
Cell[58970, 1784, 512, 10, 52, "Output",ExpressionUUID->"e48b65e0-4dde-4321-bf8f-0f8e499a88f8",
 CellID->1865425746]
}, Open  ]],
Cell[59497, 1797, 154, 1, 70, "TechNoteText",ExpressionUUID->"0e83ced9-b8b9-4d51-bda0-a880031b3488",
 CellID->1706189206],
Cell[CellGroupData[{
Cell[59676, 1802, 414, 11, 70, "Input",ExpressionUUID->"76652f84-4032-4061-8acb-62750ee46043",
 CellID->601893948],
Cell[CellGroupData[{
Cell[60115, 1817, 115, 1, 70, "EchoTiming",ExpressionUUID->"002407e4-5d7a-4ec7-9ea0-11bcc6e3342e",
 CellID->608323898],
Cell[60233, 1820, 541, 15, 70, "Echo",ExpressionUUID->"307a3479-0c4e-43bf-b2c4-5940b214f4d0",
 CellID->2077593966],
Cell[60777, 1837, 116, 1, 70, "EchoTiming",ExpressionUUID->"b3f36d5b-a815-4f1f-9b15-06d6c24a2431",
 CellID->1675041834],
Cell[60896, 1840, 562, 16, 70, "Echo",ExpressionUUID->"4a77616e-e169-418c-905c-a816fefe2e3e",
 CellID->1064975515],
Cell[61461, 1858, 116, 1, 70, "EchoTiming",ExpressionUUID->"b4951d64-1511-43e0-a66b-d55e7aa8dbc1",
 CellID->1379733269],
Cell[61580, 1861, 528, 14, 70, "Echo",ExpressionUUID->"2bd1e25c-d3ad-489f-bf04-6fc59995fa85",
 CellID->648631777],
Cell[62111, 1877, 114, 1, 70, "EchoTiming",ExpressionUUID->"2ae46b8a-5b13-477a-b6f1-478818bd5e3f",
 CellID->11680682],
Cell[62228, 1880, 577, 16, 70, "Echo",ExpressionUUID->"1c360f38-dda5-4da9-83b2-30063f506ac0",
 CellID->896210497],
Cell[62808, 1898, 116, 1, 70, "EchoTiming",ExpressionUUID->"805b9777-d0c1-4ce2-b9f6-872248a5d405",
 CellID->1780564869],
Cell[62927, 1901, 526, 15, 70, "Echo",ExpressionUUID->"0a41b380-846f-4f18-a619-3820cf84ec29",
 CellID->769132338]
}, Open  ]],
Cell[63468, 1919, 509, 10, 36, "Output",ExpressionUUID->"690c6551-3972-45ec-b9e4-9b54078a3d90",
 CellID->1103133473]
}, Open  ]],
Cell[63992, 1932, 148, 1, 70, "TechNoteText",ExpressionUUID->"92210034-9a29-4ae6-a0b2-ca7e8131d86f",
 CellID->1452621094],
Cell[CellGroupData[{
Cell[64165, 1937, 718, 21, 70, "Input",ExpressionUUID->"379f96f6-73af-47c9-8e27-c5679ad607ac",
 CellID->1659547112],
Cell[64886, 1960, 465, 12, 36, "Output",ExpressionUUID->"d2c63a77-cd1f-4534-b5b3-7b7494866db2",
 CellID->1182264054]
}, Open  ]],
Cell[CellGroupData[{
Cell[65388, 1977, 193, 4, 70, "Input",ExpressionUUID->"ae9fb96e-ec85-4965-a10a-c7740e4c9d39",
 CellID->1832052457],
Cell[65584, 1983, 393, 9, 36, "Output",ExpressionUUID->"24975bb4-adf7-40a4-be41-8d208f216f88",
 CellID->2021408429]
}, Open  ]],
Cell[CellGroupData[{
Cell[66014, 1997, 108, 1, 70, "Subsubsection",ExpressionUUID->"9bce849b-6657-4c80-969b-1fe4131ef421",
 CellID->1629533764],
Cell[66125, 2000, 170, 3, 70, "Item",ExpressionUUID->"94f4583e-31a2-49e5-80bb-cdb58873987b",
 CellID->859927202],
Cell[66298, 2005, 475, 12, 70, "Item",ExpressionUUID->"1b37f78b-8845-44a7-851f-e4ca9ee40232",
 CellID->1326966863]
}, Open  ]]
}, Open  ]],
Cell[CellGroupData[{
Cell[66822, 2023, 147, 1, 70, "Subsection",ExpressionUUID->"dababac0-17d0-44bd-bd06-4e2ad2a6bddf",
 CellID->1489533743],
Cell[66972, 2026, 168, 4, 70, "Input",ExpressionUUID->"8438bf0f-6e35-400b-b0f0-edc8b6d55fd8",
 CellID->1376745522],
Cell[67143, 2032, 160, 2, 70, "TechNoteText",ExpressionUUID->"6b22b83a-df6a-46eb-af73-0fbe23929e13",
 CellID->1973175476],
Cell[CellGroupData[{
Cell[67328, 2038, 183, 4, 70, "Input",ExpressionUUID->"f1fb43e9-ceaa-4a92-b1f8-9974b3680dfa",
 CellID->1717748158],
Cell[67514, 2044, 8434, 198, 167, "Output",ExpressionUUID->"2793f279-d226-4ce1-9823-8d85ea5fa878",
 CellID->1868547815]
}, Open  ]],
Cell[75963, 2245, 181, 3, 70, "TechNoteText",ExpressionUUID->"560f15ec-4f86-421d-ae8d-9a1bb94a6399",
 CellID->420656279],
Cell[CellGroupData[{
Cell[76169, 2252, 292, 6, 70, "Input",ExpressionUUID->"5bf93de4-c141-407b-8dad-6e0fc2451c47",
 CellID->19230539],
Cell[76464, 2260, 3945, 124, 54, "Output",ExpressionUUID->"9edbfe9f-5442-46ce-ac45-7849a3eac738",
 CellID->1854040587],
Cell[80412, 2386, 128, 2, 36, "Output",ExpressionUUID->"ec1f97bd-0a0c-4f7e-b376-fe82f32549c8",
 CellID->872427739]
}, Open  ]],
Cell[CellGroupData[{
Cell[80577, 2393, 327, 8, 70, "Input",ExpressionUUID->"7b64d646-a6df-45a1-9450-04010b647cee",
 CellID->623453271],
Cell[80907, 2403, 174, 4, 36, "Output",ExpressionUUID->"8ca2ed06-1284-499b-8bf0-9c18c3985522",
 CellID->976808628]
}, Open  ]],
Cell[CellGroupData[{
Cell[81118, 2412, 352, 9, 70, "Input",ExpressionUUID->"7ca78c02-a7e2-4d65-9bee-4d7a2fe82861",
 CellID->806411984],
Cell[81473, 2423, 175, 4, 36, "Output",ExpressionUUID->"0c30c24f-192a-402a-8bec-21040975e15a",
 CellID->1857613128]
}, Open  ]],
Cell[CellGroupData[{
Cell[81685, 2432, 446, 12, 70, "Input",ExpressionUUID->"2a1e3e47-aff4-460a-b898-5b4cf9a195fc",
 CellID->596918871],
Cell[82134, 2446, 860, 16, 68, "Output",ExpressionUUID->"cb17895c-e0b2-464b-b897-ba922aa1819b",
 CellID->827078182],
Cell[82997, 2464, 127, 2, 36, "Output",ExpressionUUID->"bd6d920d-aa4a-461f-ad21-804f183ada3e",
 CellID->41357843]
}, Open  ]],
Cell[83139, 2469, 122, 1, 70, "TechNoteText",ExpressionUUID->"50e87b29-defc-447f-9179-7b0ea1537629",
 CellID->1764677153],
Cell[83264, 2472, 357, 10, 70, "Input",ExpressionUUID->"a0b8284d-1158-46f1-a853-d52dc3539bda",
 CellID->2130853490],
Cell[83624, 2484, 190, 4, 70, "TechNoteText",ExpressionUUID->"bf7dac4a-d05d-4f43-87e4-1edbd2cdc140",
 CellID->384767242],
Cell[83817, 2490, 248, 6, 70, "Input",ExpressionUUID->"5f15a103-c589-4337-a8a2-59c0981ef0f7",
 CellID->933528989],
Cell[84068, 2498, 3207, 85, 70, "Input",ExpressionUUID->"adc27f04-b3fb-4415-80d6-d928da7d8ca1",
 CellID->1817309058],
Cell[87278, 2585, 119, 1, 70, "TechNoteText",ExpressionUUID->"b8492996-ce80-4e38-a139-a227f96e476b",
 CellID->2000910172],
Cell[CellGroupData[{
Cell[87422, 2590, 163, 3, 70, "Input",ExpressionUUID->"94339c37-f633-4330-a4e6-993cd5f42fed",
 CellID->1850832431],
Cell[CellGroupData[{
Cell[87610, 2597, 230, 6, 70, "Echo",ExpressionUUID->"0cda98db-ff65-4a4d-9ffe-131b3e24d380",
 CellID->1308991796],
Cell[87843, 2605, 459, 13, 70, "Echo",ExpressionUUID->"573305e2-85f3-4386-ae9c-5c1ef6603b5c",
 CellID->1402635504],
Cell[88305, 2620, 116, 1, 70, "EchoTiming",ExpressionUUID->"18e715b7-421a-444a-b758-0430bb38ab46",
 CellID->1149357693],
Cell[88424, 2623, 521, 14, 70, "Echo",ExpressionUUID->"8647d20b-0c17-4212-b0c7-36bd264ff114",
 CellID->639341486]
}, Open  ]],
Cell[88960, 2640, 872, 16, 68, "Output",ExpressionUUID->"dd4715cd-387a-4222-9957-cd889abec401",
 CellID->1551669261]
}, Open  ]],
Cell[89847, 2659, 154, 1, 70, "TechNoteText",ExpressionUUID->"a3ad78e0-850e-45d0-abae-57fb19e53728",
 CellID->1878469324],
Cell[CellGroupData[{
Cell[90026, 2664, 415, 11, 70, "Input",ExpressionUUID->"24d88733-3144-4f9f-adbb-cbbff110b40d",
 CellID->379501823],
Cell[CellGroupData[{
Cell[90466, 2679, 229, 6, 70, "Echo",ExpressionUUID->"a9b0113e-2f18-4ec1-a834-6c6a5f8a2dac",
 CellID->998172092],
Cell[90698, 2687, 413, 11, 70, "Echo",ExpressionUUID->"12ba5c96-9d6f-41dd-9ba9-4d5ebd6ce6b1",
 CellID->136099880],
Cell[91114, 2700, 116, 1, 70, "EchoTiming",ExpressionUUID->"b37ff312-4b50-4e0c-86c9-c52ccd62b93e",
 CellID->1084925220],
Cell[91233, 2703, 599, 17, 70, "Echo",ExpressionUUID->"71c9a31f-d143-4a14-9b3f-6581f73099cd",
 CellID->54525863],
Cell[91835, 2722, 229, 6, 70, "Echo",ExpressionUUID->"bbeb02ee-f6d0-432f-8122-c29591da6558",
 CellID->1588145819],
Cell[92067, 2730, 441, 12, 70, "Echo",ExpressionUUID->"b16f2a02-b1f3-423b-af49-4bf8046ac874",
 CellID->892531370],
Cell[92511, 2744, 115, 1, 70, "EchoTiming",ExpressionUUID->"bee3e8d7-be5d-4d7e-9bb3-b3221ac78290",
 CellID->526385277],
Cell[92629, 2747, 483, 13, 70, "Echo",ExpressionUUID->"d12fb046-6a2a-448b-9539-41fe1e55de9a",
 CellID->1472208546],
Cell[93115, 2762, 229, 6, 70, "Echo",ExpressionUUID->"c5348b66-dbc2-4587-8005-97f5392c49f7",
 CellID->102451888],
Cell[93347, 2770, 427, 11, 70, "Echo",ExpressionUUID->"e15bbb20-5dc2-4b0b-a16d-786e3e7a8841",
 CellID->1774480369],
Cell[93777, 2783, 116, 1, 70, "EchoTiming",ExpressionUUID->"e48c6dc3-2253-4df6-b2e2-afa7bc4ba8bf",
 CellID->2138213177],
Cell[93896, 2786, 556, 15, 70, "Echo",ExpressionUUID->"df0fc459-d377-4e96-903b-418c62296d52",
 CellID->957516941]
}, Open  ]],
Cell[94467, 2804, 864, 16, 52, "Output",ExpressionUUID->"ba63d36d-becb-4e46-a6ae-499f8f81ac38",
 CellID->1892260416]
}, Open  ]],
Cell[95346, 2823, 147, 1, 70, "TechNoteText",ExpressionUUID->"0398b792-86b3-414d-b6c9-b70210dacc57",
 CellID->205804175],
Cell[CellGroupData[{
Cell[95518, 2828, 719, 21, 70, "Input",ExpressionUUID->"829b7f89-03f1-4764-936c-9eae7443f5a1",
 CellID->1502097555],
Cell[96240, 2851, 465, 12, 36, "Output",ExpressionUUID->"dd2b0934-e8c2-48c7-a0c3-c87b5a74f5a6",
 CellID->906684559]
}, Open  ]],
Cell[CellGroupData[{
Cell[96742, 2868, 194, 4, 70, "Input",ExpressionUUID->"9765e165-d73d-40ee-9084-ae97213fee34",
 CellID->2061494112],
Cell[96939, 2874, 325, 7, 36, "Output",ExpressionUUID->"00cac822-6ac7-4ac9-866b-9aa87daf94d3",
 CellID->1509038801]
}, Open  ]],
Cell[CellGroupData[{
Cell[97301, 2886, 107, 1, 70, "Subsubsection",ExpressionUUID->"3fed6972-10dd-4270-bf0b-35f9637fb5d6",
 CellID->511955943],
Cell[97411, 2889, 163, 3, 70, "Item",ExpressionUUID->"449c6d75-2bdc-48a4-b98f-cdb3b38cdae9",
 CellID->1759076356],
Cell[97577, 2894, 474, 12, 70, "Item",ExpressionUUID->"f780c406-4c80-43a1-b938-9aff60f7dd12",
 CellID->792143574],
Cell[98054, 2908, 250, 7, 70, "Item",ExpressionUUID->"070b2f7d-3c24-470c-a7c0-9f4fc170af1c",
 CellID->635288345]
}, Open  ]]
}, Open  ]],
Cell[CellGroupData[{
Cell[98353, 2921, 139, 1, 70, "Subsection",ExpressionUUID->"24d45229-728e-4226-a6e8-19893d83cd7b",
 CellID->1428432396],
Cell[98495, 2924, 168, 4, 70, "Input",ExpressionUUID->"180b9b92-778e-4f17-865e-7ad34c748bae",
 CellID->943589759],
Cell[98666, 2930, 160, 2, 70, "TechNoteText",ExpressionUUID->"2debbbc9-719b-4a03-a620-3731ee6ee3f0",
 CellID->1893830065],
Cell[CellGroupData[{
Cell[98851, 2936, 184, 4, 70, "Input",ExpressionUUID->"0114d54f-4ad3-499a-909a-a7307a801b0a",
 CellID->1746770268],
Cell[99038, 2942, 8434, 198, 167, "Output",ExpressionUUID->"8a105d3c-95c4-4870-8b0c-e107167ac78d",
 CellID->347131738]
}, Open  ]],
Cell[107487, 3143, 181, 3, 70, "TechNoteText",ExpressionUUID->"b3931c72-ba1e-4d00-8f0b-71bcb84544cc",
 CellID->959851573],
Cell[CellGroupData[{
Cell[107693, 3150, 294, 6, 70, "Input",ExpressionUUID->"e57267d3-714e-482a-bc34-08cb8cba92b0",
 CellID->328231147],
Cell[107990, 3158, 3946, 124, 54, "Output",ExpressionUUID->"10f165b5-7664-45bb-b5f8-7dd9e9ac7ae8",
 CellID->2094261547],
Cell[111939, 3284, 129, 2, 36, "Output",ExpressionUUID->"738dccc5-66fb-4007-98f9-59c854dfee4b",
 CellID->996846099]
}, Open  ]],
Cell[CellGroupData[{
Cell[112105, 3291, 329, 8, 70, "Input",ExpressionUUID->"82a4e600-7de4-4dd8-bef0-d600dff061b1",
 CellID->1252799684],
Cell[112437, 3301, 175, 4, 36, "Output",ExpressionUUID->"f9afc66b-8c4b-43b7-9d8b-ce17b8614271",
 CellID->478776493]
}, Open  ]],
Cell[CellGroupData[{
Cell[112649, 3310, 353, 9, 70, "Input",ExpressionUUID->"0bd57d38-60e9-45eb-bc88-b2d2fea99e84",
 CellID->901551463],
Cell[113005, 3321, 175, 4, 36, "Output",ExpressionUUID->"588eefa0-7eba-4835-b98c-2ccd2adcd4ae",
 CellID->542611287]
}, Open  ]],
Cell[CellGroupData[{
Cell[113217, 3330, 447, 12, 70, "Input",ExpressionUUID->"a33acb8c-8014-4457-8325-08aabdff51da",
 CellID->730693292],
Cell[113667, 3344, 865, 16, 68, "Output",ExpressionUUID->"bc704445-5268-4adc-b6b0-c765d21517d7",
 CellID->780936058],
Cell[114535, 3362, 130, 2, 36, "Output",ExpressionUUID->"a5991160-fdfb-4e57-803e-742a765346fb",
 CellID->1919759989]
}, Open  ]],
Cell[114680, 3367, 122, 1, 70, "TechNoteText",ExpressionUUID->"2a2bea68-31b0-448c-9c79-c24f0012451c",
 CellID->1695059541],
Cell[114805, 3370, 357, 10, 70, "Input",ExpressionUUID->"9ce5c5b9-d447-4bfd-badf-81b6170ac234",
 CellID->347644485],
Cell[115165, 3382, 142, 1, 70, "TechNoteText",ExpressionUUID->"ea16e30e-fbf9-430f-a0b0-24a219fe35d9",
 CellID->258268342],
Cell[115310, 3385, 249, 6, 70, "Input",ExpressionUUID->"6ac23f7c-e721-4e64-bc2c-a28d4ab2200e",
 CellID->703106536],
Cell[115562, 3393, 3171, 84, 70, "Input",ExpressionUUID->"d2a84c97-0495-4926-b3e8-18d297518ca8",
 CellID->1656524758],
Cell[118736, 3479, 119, 1, 70, "TechNoteText",ExpressionUUID->"f0569e67-94f5-405d-9628-f696b584720b",
 CellID->1233607998],
Cell[CellGroupData[{
Cell[118880, 3484, 164, 3, 70, "Input",ExpressionUUID->"28f1f257-0302-419d-8c02-cd54ec884781",
 CellID->1442494248],
Cell[CellGroupData[{
Cell[119069, 3491, 228, 6, 70, "Echo",ExpressionUUID->"9141f7c1-7fb8-4e4d-9133-710c9638bfc3",
 CellID->407130219],
Cell[119300, 3499, 457, 13, 70, "Echo",ExpressionUUID->"2156e411-1415-47a0-bbdb-927eaa514be0",
 CellID->754691391],
Cell[119760, 3514, 116, 1, 70, "EchoTiming",ExpressionUUID->"b4cd2ccd-1ec7-44cc-9a03-3f75cbca8874",
 CellID->1271708988],
Cell[119879, 3517, 523, 14, 70, "Echo",ExpressionUUID->"363ca7dc-6dab-40f6-b7de-9072bf57260c",
 CellID->1855706372]
}, Open  ]],
Cell[120417, 3534, 877, 16, 68, "Output",ExpressionUUID->"4a64ae43-8ffc-4a4d-b9a1-903b3d0b33f7",
 CellID->951988823]
}, Open  ]],
Cell[121309, 3553, 154, 1, 70, "TechNoteText",ExpressionUUID->"c95e3753-086f-4a91-84e8-21017974de6d",
 CellID->1771739654],
Cell[CellGroupData[{
Cell[121488, 3558, 415, 11, 70, "Input",ExpressionUUID->"d98dc372-aef2-4093-a365-3520bad99284",
 CellID->620115476],
Cell[CellGroupData[{
Cell[121928, 3573, 227, 6, 70, "Echo",ExpressionUUID->"9a02be45-0c49-481a-a9ce-462c5d706504",
 CellID->16673400],
Cell[122158, 3581, 415, 11, 70, "Echo",ExpressionUUID->"6862de72-002d-4c5c-9618-0c7903cd9d06",
 CellID->1056959690],
Cell[122576, 3594, 115, 1, 70, "EchoTiming",ExpressionUUID->"38208726-524e-423e-afea-dec97c08ce93",
 CellID->914814556],
Cell[122694, 3597, 599, 17, 70, "Echo",ExpressionUUID->"2b4504a7-cfd2-409b-87cf-3d5e095f218c",
 CellID->1598930799],
Cell[123296, 3616, 231, 6, 70, "Echo",ExpressionUUID->"ed2c9f10-b84c-402d-a203-7aeabc02bebb",
 CellID->1767063882],
Cell[123530, 3624, 414, 11, 70, "Echo",ExpressionUUID->"8fa48cc4-1ff8-46b8-bd1b-9324a728f52c",
 CellID->1597649186],
Cell[123947, 3637, 115, 1, 70, "EchoTiming",ExpressionUUID->"8c88d44b-ad02-4416-90fd-47b773385cd8",
 CellID->704843046],
Cell[124065, 3640, 520, 14, 70, "Echo",ExpressionUUID->"63b1f09c-483a-4cae-83c7-8e5ba37bffde",
 CellID->777277270],
Cell[124588, 3656, 228, 6, 70, "Echo",ExpressionUUID->"df13b447-eaaa-4480-8c20-bb4e7f3f5abc",
 CellID->556052189],
Cell[124819, 3664, 437, 12, 70, "Echo",ExpressionUUID->"4535d240-e8c3-4b03-948d-793422bf042a",
 CellID->1268130734],
Cell[125259, 3678, 116, 1, 70, "EchoTiming",ExpressionUUID->"b903d1d5-bf73-4f29-8c46-716133256042",
 CellID->1754250845],
Cell[125378, 3681, 565, 16, 70, "Echo",ExpressionUUID->"018a4f73-1f9f-4860-8f33-916e5ff96cc4",
 CellID->890962252]
}, Open  ]],
Cell[125958, 3700, 877, 16, 68, "Output",ExpressionUUID->"4b1f6e4c-7365-41e5-811c-bdddacba5a3f",
 CellID->2146582480]
}, Open  ]],
Cell[126850, 3719, 147, 1, 70, "TechNoteText",ExpressionUUID->"eda69608-2dbc-4d5b-b06c-7a9785f42fdf",
 CellID->565591423],
Cell[CellGroupData[{
Cell[127022, 3724, 719, 21, 70, "Input",ExpressionUUID->"568a654c-f63a-456d-8b8c-5ce9d1af2374",
 CellID->1132424739],
Cell[127744, 3747, 465, 12, 36, "Output",ExpressionUUID->"7702a8bd-fe3d-4584-85e4-f84782b8c0ac",
 CellID->898965578]
}, Open  ]],
Cell[CellGroupData[{
Cell[128246, 3764, 193, 4, 70, "Input",ExpressionUUID->"78aee007-526f-4131-9286-1bc05284864f",
 CellID->873300696],
Cell[128442, 3770, 324, 7, 36, "Output",ExpressionUUID->"985a00d6-5ea5-464d-824b-7bb20d167a4e",
 CellID->693635637]
}, Open  ]],
Cell[CellGroupData[{
Cell[128803, 3782, 107, 1, 70, "Subsubsection",ExpressionUUID->"37896b0e-0e6e-4e1c-9374-add83f24131a",
 CellID->351030337],
Cell[128913, 3785, 161, 3, 70, "Item",ExpressionUUID->"0c8a4005-3f02-4dd3-854b-4df26e6c0f4b",
 CellID->32805757],
Cell[129077, 3790, 475, 12, 70, "Item",ExpressionUUID->"3f2f9e93-47c1-4cd7-9671-35738865a89c",
 CellID->1610544267],
Cell[129555, 3804, 251, 7, 70, "Item",ExpressionUUID->"aefbcec7-68cf-4308-942e-11648ba34bf1",
 CellID->1533608681]
}, Open  ]]
}, Open  ]]
}, Open  ]],
Cell[129845, 3816, 1396, 35, 70, "TutorialMoreAboutSection",ExpressionUUID->"e3a147f6-8a73-457c-9c4b-9d12316928d4"],
Cell[131244, 3853, 1804, 47, 70, "RelatedTutorialsSection",ExpressionUUID->"e1b0cc6b-dc63-40cb-b760-670f37b98cb9"],
Cell[133051, 3902, 1765, 48, 70, "TutorialRelatedLinksSection",ExpressionUUID->"f26d50cf-c493-4434-8a5c-75c16f86543d"]
}, Open  ]],
Cell[134831, 3953, 78, 0, 70, "FooterCell",ExpressionUUID->"213701fd-a242-43fd-ae34-05e004cd850e"]
}
]
*)

(* End of internal cache information *)

